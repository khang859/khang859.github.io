function it(){}const Kn=e=>e;function di(e,t){for(const n in t)e[n]=t[n];return e}function pi(e){return e&&typeof e=="object"&&typeof e.then=="function"}function mr(e){return e()}function Zn(){return Object.create(null)}function Me(e){e.forEach(mr)}function Pn(e){return typeof e=="function"}function So(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function vi(e){return Object.keys(e).length===0}function ko(e,t,n,r){if(e){const i=gr(e,t,n,r);return e[0](i)}}function gr(e,t,n,r){return e[1]&&r?di(n.ctx.slice(),e[1](r(t))):n.ctx}function Ro(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const a=[],o=Math.max(t.dirty.length,i.length);for(let u=0;u<o;u+=1)a[u]=t.dirty[u]|i[u];return a}return t.dirty|i}return t.dirty}function To(e,t,n,r,i,a){if(i){const o=gr(t,n,r,a);e.p(o,i)}}function Ko(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}const _r=typeof window!="undefined";let br=_r?()=>window.performance.now():()=>Date.now(),Dn=_r?e=>requestAnimationFrame(e):it;const De=new Set;function wr(e){De.forEach(t=>{t.c(e)||(De.delete(t),t.f())}),De.size!==0&&Dn(wr)}function xr(e){let t;return De.size===0&&Dn(wr),{promise:new Promise(n=>{De.add(t={c:e,f:n})}),abort(){De.delete(t)}}}function yi(e,t){e.appendChild(t)}function Er(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function mi(e){const t=bi("style");return gi(Er(e),t),t.sheet}function gi(e,t){yi(e.head||e,t)}function Po(e,t,n){e.insertBefore(t,n||null)}function _i(e){e.parentNode.removeChild(e)}function Do(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function bi(e){return document.createElement(e)}function Ar(e){return document.createTextNode(e)}function Io(){return Ar(" ")}function Oo(){return Ar("")}function Bo(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Mo(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function wi(e){return Array.from(e.childNodes)}function Fo(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Lo(e,t){e.value=t==null?"":t}function jo(e,t,n){e.classList[n?"add":"remove"](t)}function xi(e,t,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}const Tt=new Map;let Kt=0;function Ei(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ai(e,t){const n={stylesheet:mi(t),rules:{}};return Tt.set(e,n),n}function Cr(e,t,n,r,i,a,o,u=0){const s=16.666/r;let c=`{
`;for(let v=0;v<=1;v+=s){const _=t+(n-t)*a(v);c+=v*100+`%{${o(_,1-_)}}
`}const l=c+`100% {${o(n,1-n)}}
}`,f=`__svelte_${Ei(l)}_${u}`,h=Er(e),{stylesheet:m,rules:p}=Tt.get(h)||Ai(h,e);p[f]||(p[f]=!0,m.insertRule(`@keyframes ${f} ${l}`,m.cssRules.length));const d=e.style.animation||"";return e.style.animation=`${d?`${d}, `:""}${f} ${r}ms linear ${i}ms 1 both`,Kt+=1,f}function tn(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?a=>a.indexOf(t)<0:a=>a.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),Kt-=i,Kt||Ci())}function Ci(){Dn(()=>{Kt||(Tt.forEach(e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}}),Tt.clear())})}let Xe;function ue(e){Xe=e}function Si(){if(!Xe)throw new Error("Function called outside component initialization");return Xe}const Ve=[],er=[],wt=[],tr=[],ki=Promise.resolve();let nn=!1;function Ri(){nn||(nn=!0,ki.then(In))}function Qe(e){wt.push(e)}const Yt=new Set;let vt=0;function In(){const e=Xe;do{for(;vt<Ve.length;){const t=Ve[vt];vt++,ue(t),Ti(t.$$)}for(ue(null),Ve.length=0,vt=0;er.length;)er.pop()();for(let t=0;t<wt.length;t+=1){const n=wt[t];Yt.has(n)||(Yt.add(n),n())}wt.length=0}while(Ve.length);for(;tr.length;)tr.pop()();nn=!1,Yt.clear(),ue(e)}function Ti(e){if(e.fragment!==null){e.update(),Me(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Qe)}}let $e;function Sr(){return $e||($e=Promise.resolve(),$e.then(()=>{$e=null})),$e}function Pt(e,t,n){e.dispatchEvent(xi(`${t?"intro":"outro"}${n}`))}const xt=new Set;let me;function Ki(){me={r:0,c:[],p:me}}function Pi(){me.r||Me(me.c),me=me.p}function kr(e,t){e&&e.i&&(xt.delete(e),e.i(t))}function Di(e,t,n,r){if(e&&e.o){if(xt.has(e))return;xt.add(e),me.c.push(()=>{xt.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const Rr={duration:0};function No(e,t,n){let r=t(e,n),i=!1,a,o,u=0;function s(){a&&tn(e,a)}function c(){const{delay:f=0,duration:h=300,easing:m=Kn,tick:p=it,css:d}=r||Rr;d&&(a=Cr(e,0,1,h,f,m,d,u++)),p(0,1);const v=br()+f,_=v+h;o&&o.abort(),i=!0,Qe(()=>Pt(e,!0,"start")),o=xr(w=>{if(i){if(w>=_)return p(1,0),Pt(e,!0,"end"),s(),i=!1;if(w>=v){const g=m((w-v)/h);p(g,1-g)}}return i})}let l=!1;return{start(){l||(l=!0,tn(e),Pn(r)?(r=r(),Sr().then(c)):c())},invalidate(){l=!1},end(){i&&(s(),i=!1)}}}function Uo(e,t,n){let r=t(e,n),i=!0,a;const o=me;o.r+=1;function u(){const{delay:s=0,duration:c=300,easing:l=Kn,tick:f=it,css:h}=r||Rr;h&&(a=Cr(e,1,0,c,s,l,h));const m=br()+s,p=m+c;Qe(()=>Pt(e,!1,"start")),xr(d=>{if(i){if(d>=p)return f(0,1),Pt(e,!1,"end"),--o.r||Me(o.c),!1;if(d>=m){const v=l((d-m)/c);f(1-v,v)}}return i})}return Pn(r)?Sr().then(()=>{r=r(),u()}):u(),{end(s){s&&r.tick&&r.tick(1,0),i&&(a&&tn(e,a),i=!1)}}}function $o(e,t){const n=t.token={};function r(i,a,o,u){if(t.token!==n)return;t.resolved=u;let s=t.ctx;o!==void 0&&(s=s.slice(),s[o]=u);const c=i&&(t.current=i)(s);let l=!1;t.block&&(t.blocks?t.blocks.forEach((f,h)=>{h!==a&&f&&(Ki(),Di(f,1,1,()=>{t.blocks[h]===f&&(t.blocks[h]=null)}),Pi())}):t.block.d(1),c.c(),kr(c,1),c.m(t.mount(),t.anchor),l=!0),t.block=c,t.blocks&&(t.blocks[a]=c),l&&In()}if(pi(e)){const i=Si();if(e.then(a=>{ue(i),r(t.then,1,t.value,a),ue(null)},a=>{if(ue(i),r(t.catch,2,t.error,a),ue(null),!t.hasCatch)throw a}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function Vo(e,t,n){const r=t.slice(),{resolved:i}=e;e.current===e.then&&(r[e.value]=i),e.current===e.catch&&(r[e.error]=i),e.block.p(r,n)}function zo(e){e&&e.c()}function Ii(e,t,n,r){const{fragment:i,on_mount:a,on_destroy:o,after_update:u}=e.$$;i&&i.m(t,n),r||Qe(()=>{const s=a.map(mr).filter(Pn);o?o.push(...s):Me(s),e.$$.on_mount=[]}),u.forEach(Qe)}function Oi(e,t){const n=e.$$;n.fragment!==null&&(Me(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Bi(e,t){e.$$.dirty[0]===-1&&(Ve.push(e),Ri(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ho(e,t,n,r,i,a,o,u=[-1]){const s=Xe;ue(e);const c=e.$$={fragment:null,ctx:null,props:a,update:it,not_equal:i,bound:Zn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Zn(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};o&&o(c.root);let l=!1;if(c.ctx=n?n(e,t.props||{},(f,h,...m)=>{const p=m.length?m[0]:h;return c.ctx&&i(c.ctx[f],c.ctx[f]=p)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](p),l&&Bi(e,f)),h}):[],c.update(),l=!0,Me(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const f=wi(t.target);c.fragment&&c.fragment.l(f),f.forEach(_i)}else c.fragment&&c.fragment.c();t.intro&&kr(e.$$.fragment),Ii(e,t.target,t.anchor,t.customElement),In()}ue(s)}class Wo{$destroy(){Oi(this,1),this.$destroy=it}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!vi(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var rn=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},at=Dr,Mi=On,Fi=Ui,Li=Tr,ji=Pr,Ni=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function On(e){for(var t=[],n=0,r=0,i="",a;(a=Ni.exec(e))!=null;){var o=a[0],u=a[1],s=a.index;if(i+=e.slice(r,s),r=s+o.length,u){i+=u[1];continue}i&&(t.push(i),i="");var c=a[2],l=a[3],f=a[4],h=a[5],m=a[6],p=a[7],d=m==="+"||m==="*",v=m==="?"||m==="*",_=c||"/",w=f||h||(p?".*":"[^"+_+"]+?");t.push({name:l||n++,prefix:c||"",delimiter:_,optional:v,repeat:d,pattern:$i(w)})}return r<e.length&&(i+=e.substr(r)),i&&t.push(i),t}function Ui(e){return Tr(On(e))}function Tr(e){for(var t=new Array(e.length),n=0;n<e.length;n++)typeof e[n]=="object"&&(t[n]=new RegExp("^"+e[n].pattern+"$"));return function(r){for(var i="",a=r||{},o=0;o<e.length;o++){var u=e[o];if(typeof u=="string"){i+=u;continue}var s=a[u.name],c;if(s==null){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to be defined')}if(rn(s)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received "'+s+'"');if(s.length===0){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var l=0;l<s.length;l++){if(c=encodeURIComponent(s[l]),!t[o].test(c))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received "'+c+'"');i+=(l===0?u.prefix:u.delimiter)+c}continue}if(c=encodeURIComponent(s),!t[o].test(c))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+c+'"');i+=u.prefix+c}return i}}function nr(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function $i(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Bn(e,t){return e.keys=t,e}function Kr(e){return e.sensitive?"":"i"}function Vi(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return Bn(e,t)}function zi(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(Dr(e[i],t,n).source);var a=new RegExp("(?:"+r.join("|")+")",Kr(n));return Bn(a,t)}function Hi(e,t,n){for(var r=On(e),i=Pr(r,n),a=0;a<r.length;a++)typeof r[a]!="string"&&t.push(r[a]);return Bn(i,t)}function Pr(e,t){t=t||{};for(var n=t.strict,r=t.end!==!1,i="",a=e[e.length-1],o=typeof a=="string"&&/\/$/.test(a),u=0;u<e.length;u++){var s=e[u];if(typeof s=="string")i+=nr(s);else{var c=nr(s.prefix),l=s.pattern;s.repeat&&(l+="(?:"+c+l+")*"),s.optional?c?l="(?:"+c+"("+l+"))?":l="("+l+")?":l=c+"("+l+")",i+=l}}return n||(i=(o?i.slice(0,-2):i)+"(?:\\/(?=$))?"),r?i+="$":i+=n&&o?"":"(?=\\/|$)",new RegExp("^"+i,Kr(t))}function Dr(e,t,n){return t=t||[],rn(t)?n||(n={}):(n=t,t=[]),e instanceof RegExp?Vi(e,t):rn(e)?zi(e,t,n):Hi(e,t,n)}at.parse=Mi;at.compile=Fi;at.tokensToFunction=Li;at.tokensToRegExp=ji;var Oe=typeof document!="undefined",X=typeof window!="undefined",Ut=typeof history!="undefined",Wi=typeof process!="undefined",an=Oe&&document.ontouchstart?"touchstart":"click",ce=X&&!!(window.history.location||window.location);function j(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}j.prototype.configure=function(e){var t=e||{};this._window=t.window||X&&window,this._decodeURLComponents=t.decodeURLComponents!==!1,this._popstate=t.popstate!==!1&&X,this._click=t.click!==!1&&Oe,this._hashbang=!!t.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):X&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener(an,this.clickHandler,!1):Oe&&n.document.removeEventListener(an,this.clickHandler,!1),this._hashbang&&X&&!Ut?n.addEventListener("hashchange",this._onpopstate,!1):X&&n.removeEventListener("hashchange",this._onpopstate,!1)};j.prototype.base=function(e){if(arguments.length===0)return this._base;this._base=e};j.prototype._getBase=function(){var e=this._base;if(e)return e;var t=X&&this._window&&this._window.location;return X&&this._hashbang&&t&&t.protocol==="file:"&&(e=t.pathname),e};j.prototype.strict=function(e){if(arguments.length===0)return this._strict;this._strict=e};j.prototype.start=function(e){var t=e||{};if(this.configure(t),t.dispatch!==!1){this._running=!0;var n;if(ce){var r=this._window,i=r.location;this._hashbang&&~i.hash.indexOf("#!")?n=i.hash.substr(2)+i.search:this._hashbang?n=i.search+i.hash:n=i.pathname+i.search+i.hash}this.replace(n,null,!0,t.dispatch)}};j.prototype.stop=function(){if(!!this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(an,this.clickHandler,!1),X&&e.removeEventListener("popstate",this._onpopstate,!1),X&&e.removeEventListener("hashchange",this._onpopstate,!1)}};j.prototype.show=function(e,t,n,r){var i=new ot(e,t,this),a=this.prevContext;return this.prevContext=i,this.current=i.path,n!==!1&&this.dispatch(i,a),i.handled!==!1&&r!==!1&&i.pushState(),i};j.prototype.back=function(e,t){var n=this;if(this.len>0){var r=this._window;Ut&&r.history.back(),this.len--}else setTimeout(e?function(){n.show(e,t)}:function(){n.show(n._getBase(),t)})};j.prototype.redirect=function(e,t){var n=this;typeof e=="string"&&typeof t=="string"&&$t.call(this,e,function(r){setTimeout(function(){n.replace(t)},0)}),typeof e=="string"&&typeof t=="undefined"&&setTimeout(function(){n.replace(e)},0)};j.prototype.replace=function(e,t,n,r){var i=new ot(e,t,this),a=this.prevContext;return this.prevContext=i,this.current=i.path,i.init=n,i.save(),r!==!1&&this.dispatch(i,a),i};j.prototype.dispatch=function(e,t){var n=0,r=0,i=this;function a(){var u=i.exits[r++];if(!u)return o();u(t,a)}function o(){var u=i.callbacks[n++];if(e.path!==i.current){e.handled=!1;return}if(!u)return Yi.call(i,e);u(e,o)}t?a():o()};j.prototype.exit=function(e,t){if(typeof e=="function")return this.exit("*",e);for(var n=new ut(e,null,this),r=1;r<arguments.length;++r)this.exits.push(n.middleware(arguments[r]))};j.prototype.clickHandler=function(e){if(this._which(e)===1&&!(e.metaKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented){var t=e.target,n=e.path||(e.composedPath?e.composedPath():null);if(n){for(var r=0;r<n.length;r++)if(!!n[r].nodeName&&n[r].nodeName.toUpperCase()==="A"&&!!n[r].href){t=n[r];break}}for(;t&&t.nodeName.toUpperCase()!=="A";)t=t.parentNode;if(!(!t||t.nodeName.toUpperCase()!=="A")){var i=typeof t.href=="object"&&t.href.constructor.name==="SVGAnimatedString";if(!(t.hasAttribute("download")||t.getAttribute("rel")==="external")){var a=t.getAttribute("href");if(!(!this._hashbang&&this._samePath(t)&&(t.hash||a==="#"))&&!(a&&a.indexOf("mailto:")>-1)&&!(i?t.target.baseVal:t.target)&&!(!i&&!this.sameOrigin(t.href))){var o=i?t.href.baseVal:t.pathname+t.search+(t.hash||"");o=o[0]!=="/"?"/"+o:o,Wi&&o.match(/^\/[a-zA-Z]:\//)&&(o=o.replace(/^\/[a-zA-Z]:\//,"/"));var u=o,s=this._getBase();o.indexOf(s)===0&&(o=o.substr(s.length)),this._hashbang&&(o=o.replace("#!","")),!(s&&u===o&&(!ce||this._window.location.protocol!=="file:"))&&(e.preventDefault(),this.show(u))}}}}};j.prototype._onpopstate=function(){var e=!1;return X?(Oe&&document.readyState==="complete"?e=!0:window.addEventListener("load",function(){setTimeout(function(){e=!0},0)}),function(n){if(!!e){var r=this;if(n.state){var i=n.state.path;r.replace(i,n.state)}else if(ce){var a=r._window.location;r.show(a.pathname+a.search+a.hash,void 0,void 0,!1)}}}):function(){}}();j.prototype._which=function(e){return e=e||X&&this._window.event,e.which==null?e.button:e.which};j.prototype._toURL=function(e){var t=this._window;if(typeof URL=="function"&&ce)return new URL(e,t.location.toString());if(Oe){var n=t.document.createElement("a");return n.href=e,n}};j.prototype.sameOrigin=function(e){if(!e||!ce)return!1;var t=this._toURL(e),n=this._window,r=n.location;return r.protocol===t.protocol&&r.hostname===t.hostname&&(r.port===t.port||r.port===""&&(t.port==80||t.port==443))};j.prototype._samePath=function(e){if(!ce)return!1;var t=this._window,n=t.location;return e.pathname===n.pathname&&e.search===n.search};j.prototype._decodeURLEncodedURIComponent=function(e){return typeof e!="string"?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e};function Ir(){var e=new j;function t(){return $t.apply(e,arguments)}return t.callbacks=e.callbacks,t.exits=e.exits,t.base=e.base.bind(e),t.strict=e.strict.bind(e),t.start=e.start.bind(e),t.stop=e.stop.bind(e),t.show=e.show.bind(e),t.back=e.back.bind(e),t.redirect=e.redirect.bind(e),t.replace=e.replace.bind(e),t.dispatch=e.dispatch.bind(e),t.exit=e.exit.bind(e),t.configure=e.configure.bind(e),t.sameOrigin=e.sameOrigin.bind(e),t.clickHandler=e.clickHandler.bind(e),t.create=Ir,Object.defineProperty(t,"len",{get:function(){return e.len},set:function(n){e.len=n}}),Object.defineProperty(t,"current",{get:function(){return e.current},set:function(n){e.current=n}}),t.Context=ot,t.Route=ut,t}function $t(e,t){if(typeof e=="function")return $t.call(this,"*",e);if(typeof t=="function")for(var n=new ut(e,null,this),r=1;r<arguments.length;++r)this.callbacks.push(n.middleware(arguments[r]));else typeof e=="string"?this[typeof t=="string"?"redirect":"show"](e,t):this.start(e)}function Yi(e){if(!e.handled){var t,n=this,r=n._window;n._hashbang?t=ce&&this._getBase()+r.location.hash.replace("#!",""):t=ce&&r.location.pathname+r.location.search,t!==e.canonicalPath&&(n.stop(),e.handled=!1,ce&&(r.location.href=e.canonicalPath))}}function Gi(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function ot(e,t,n){var r=this.page=n||$t,i=r._window,a=r._hashbang,o=r._getBase();e[0]==="/"&&e.indexOf(o)!==0&&(e=o+(a?"#!":"")+e);var u=e.indexOf("?");this.canonicalPath=e;var s=new RegExp("^"+Gi(o));if(this.path=e.replace(s,"")||"/",a&&(this.path=this.path.replace("#!","")||"/"),this.title=Oe&&i.document.title,this.state=t||{},this.state.path=e,this.querystring=~u?r._decodeURLEncodedURIComponent(e.slice(u+1)):"",this.pathname=r._decodeURLEncodedURIComponent(~u?e.slice(0,u):e),this.params={},this.hash="",!a){if(!~this.path.indexOf("#"))return;var c=this.path.split("#");this.path=this.pathname=c[0],this.hash=r._decodeURLEncodedURIComponent(c[1])||"",this.querystring=this.querystring.split("#")[0]}}ot.prototype.pushState=function(){var e=this.page,t=e._window,n=e._hashbang;e.len++,Ut&&t.history.pushState(this.state,this.title,n&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};ot.prototype.save=function(){var e=this.page;Ut&&e._window.history.replaceState(this.state,this.title,e._hashbang&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};function ut(e,t,n){var r=this.page=n||Mn,i=t||{};i.strict=i.strict||r._strict,this.path=e==="*"?"(.*)":e,this.method="GET",this.regexp=at(this.path,this.keys=[],i)}ut.prototype.middleware=function(e){var t=this;return function(n,r){if(t.match(n.path,n.params))return n.routePath=t.path,e(n,r);r()}};ut.prototype.match=function(e,t){var n=this.keys,r=e.indexOf("?"),i=~r?e.slice(0,r):e,a=this.regexp.exec(decodeURIComponent(i));if(!a)return!1;delete t[0];for(var o=1,u=a.length;o<u;++o){var s=n[o-1],c=this.page._decodeURLEncodedURIComponent(a[o]);(c!==void 0||!hasOwnProperty.call(t,s.name))&&(t[s.name]=c)}return!0};var Mn=Ir(),Xi=Mn,Qi=Mn;Xi.default=Qi;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var P=function(){return P=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},P.apply(this,arguments)};function on(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var M=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,L=Object.keys,V=Array.isArray;typeof Promise!="undefined"&&!M.Promise&&(M.Promise=Promise);function H(e,t){return typeof t!="object"||L(t).forEach(function(n){e[n]=t[n]}),e}var qe=Object.getPrototypeOf,qi={}.hasOwnProperty;function Q(e,t){return qi.call(e,t)}function Be(e,t){typeof t=="function"&&(t=t(qe(e))),(typeof Reflect=="undefined"?L:Reflect.ownKeys)(t).forEach(function(n){fe(e,n,t[n])})}var Or=Object.defineProperty;function fe(e,t,n,r){Or(e,t,H(n&&Q(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Fe(e){return{from:function(t){return e.prototype=Object.create(t.prototype),fe(e.prototype,"constructor",e),{extend:Be.bind(null,e.prototype)}}}}var Ji=Object.getOwnPropertyDescriptor;function Fn(e,t){var n=Ji(e,t),r;return n||(r=qe(e))&&Fn(r,t)}var Zi=[].slice;function Vt(e,t,n){return Zi.call(e,t,n)}function Br(e,t){return t(e)}function ze(e){if(!e)throw new Error("Assertion Failed")}function Mr(e){M.setImmediate?setImmediate(e):setTimeout(e,0)}function Fr(e,t){return e.reduce(function(n,r,i){var a=t(r,i);return a&&(n[a[0]]=a[1]),n},{})}function ea(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function le(e,t){if(Q(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=le(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(o!==-1){var u=e[t.substr(0,o)];return u===void 0?void 0:le(u,t.substr(o+1))}}function Z(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ze(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)Z(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var o=t.substr(0,a),u=t.substr(a+1);if(u==="")n===void 0?V(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var s=e[o];s||(s=e[o]={}),Z(s,u,n)}}else n===void 0?V(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ta(e,t){typeof t=="string"?Z(e,t,void 0):"length"in t&&[].map.call(t,function(n){Z(e,n,void 0)})}function Lr(e){var t={};for(var n in e)Q(e,n)&&(t[n]=e[n]);return t}var na=[].concat;function jr(e){return na.apply([],e)}var Nr="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(jr([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return M[e]}),ra=Nr.map(function(e){return M[e]});Fr(Nr,function(e){return[e,!0]});var ye=null;function st(e){ye=typeof WeakMap!="undefined"&&new WeakMap;var t=un(e);return ye=null,t}function un(e){if(!e||typeof e!="object")return e;var t=ye&&ye.get(e);if(t)return t;if(V(e)){t=[],ye&&ye.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(un(e[n]))}else if(ra.indexOf(e.constructor)>=0)t=e;else{var i=qe(e);t=i===Object.prototype?{}:Object.create(i),ye&&ye.set(e,t);for(var a in e)Q(e,a)&&(t[a]=un(e[a]))}return t}var ia={}.toString;function sn(e){return ia.call(e).slice(8,-1)}var cn=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",aa=typeof cn=="symbol"?function(e){var t;return e!=null&&(t=e[cn])&&t.apply(e)}:function(){return null},Pe={};function oe(e){var t,n,r,i;if(arguments.length===1){if(V(e))return e.slice();if(this===Pe&&typeof e=="string")return[e];if(i=aa(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Ln=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},re=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ur(e,t){re=e,$r=t}var $r=function(){return!0},oa=!new Error("").stack;function Re(){if(oa)try{throw Re.arguments,new Error}catch(e){return e}return new Error}function ln(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter($r).map(function(r){return`
`+r}).join("")):""}var ua=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Vr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],jn=ua.concat(Vr),sa={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Le(e,t){this._e=Re(),this.name=e,this.message=t}Fe(Le).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+ln(this._e,2))}},toString:function(){return this.name+": "+this.message}});function zr(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Dt(e,t,n,r){this._e=Re(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=zr(e,t)}Fe(Dt).from(Le);function We(e,t){this._e=Re(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=zr(e,t)}Fe(We).from(Le);var Nn=jn.reduce(function(e,t){return e[t]=t+"Error",e},{}),ca=Le,R=jn.reduce(function(e,t){var n=t+"Error";function r(i,a){this._e=Re(),this.name=n,i?typeof i=="string"?(this.message=""+i+(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=sa[t]||n,this.inner=null)}return Fe(r).from(ca),e[t]=r,e},{});R.Syntax=SyntaxError;R.Type=TypeError;R.Range=RangeError;var rr=Vr.reduce(function(e,t){return e[t+"Error"]=R[t],e},{});function la(e,t){if(!e||e instanceof Le||e instanceof TypeError||e instanceof SyntaxError||!e.name||!rr[e.name])return e;var n=new rr[e.name](t||e.message,e);return"stack"in e&&fe(n,"stack",{get:function(){return this.inner.stack}}),n}var zt=jn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=R[t]),e},{});zt.ModifyError=Dt;zt.DexieError=Le;zt.BulkError=We;function B(){}function ct(e){return e}function fa(e,t){return e==null||e===ct?t:function(n){return t(e(n))}}function Se(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ha(e,t){return e===B?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Se(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Se(i,this.onerror):i),a!==void 0?a:n}}function da(e,t){return e===B?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Se(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Se(r,this.onerror):r)}}function pa(e,t){return e===B?t:function(n){var r=e.apply(this,arguments);H(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Se(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Se(a,this.onerror):a),r===void 0?o===void 0?void 0:o:H(r,o)}}function va(e,t){return e===B?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Un(e,t){return e===B?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var Je={},ya=100,ma=20,Hr=100,$n=typeof Promise=="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,qe(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,qe(t),e]}(),fn=$n[0],It=$n[1],hn=$n[2],Wr=It&&It.then,Et=fn&&fn.constructor,Vn=!!hn,dn=!1,ga=hn?function(){hn.then(yt)}:M.setImmediate?setImmediate.bind(null,yt):M.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){yt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(yt,0)},Ze=function(e,t){He.push([e,t]),Ot&&(ga(),Ot=!1)},pn=!0,Ot=!0,Ae=[],At=[],vn=null,yn=ct,Ie={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:or,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{or(e[0],e[1])}catch{}})}},C=Ie,He=[],Ce=0,Ct=[];function A(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=B,this._lib=!1;var t=this._PSD=C;if(re&&(this._stackHolder=Re(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Je)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&gn(this,this._value);return}this._state=null,this._value=null,++t.ref,Gr(this,e)}var mn={get:function(){var e=C,t=Bt;function n(r,i){var a=this,o=!e.global&&(e!==C||t!==Bt),u=o&&!he(),s=new A(function(c,l){zn(a,new Yr(Ft(r,e,o,u),Ft(i,e,o,u),c,l,e))});return re&&qr(s,this),s}return n.prototype=Je,n},set:function(e){fe(this,"then",e&&e.prototype===Je?mn:{get:function(){return e},set:mn.set})}};Be(A.prototype,{then:mn,_then:function(e,t){zn(this,new Yr(null,null,e,t,C))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):St(r)}):this.then(null,function(r){return r&&r.name===t?n(r):St(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),St(t)})},stack:{get:function(){if(this._stack)return this._stack;try{dn=!0;var e=Qr(this,[],ma),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{dn=!1}}},timeout:function(e,t){var n=this;return e<1/0?new A(function(r,i){var a=setTimeout(function(){return i(new R.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&fe(A.prototype,Symbol.toStringTag,"Dexie.Promise");Ie.env=Jr();function Yr(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Be(A,{all:function(){var e=oe.apply(null,arguments).map(Mt);return new A(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return A.resolve(i).then(function(o){e[a]=o,--r||t(e)},n)})})},resolve:function(e){if(e instanceof A)return e;if(e&&typeof e.then=="function")return new A(function(n,r){e.then(n,r)});var t=new A(Je,!0,e);return qr(t,vn),t},reject:St,race:function(){var e=oe.apply(null,arguments).map(Mt);return new A(function(t,n){e.map(function(r){return A.resolve(r).then(t,n)})})},PSD:{get:function(){return C},set:function(e){return C=e}},totalEchoes:{get:function(){return Bt}},newPSD:_e,usePSD:Ne,scheduler:{get:function(){return Ze},set:function(e){Ze=e}},rejectionMapper:{get:function(){return yn},set:function(e){yn=e}},follow:function(e,t){return new A(function(n,r){return _e(function(i,a){var o=C;o.unhandleds=[],o.onunhandled=a,o.finalize=Se(function(){var u=this;ba(function(){u.unhandleds.length===0?i():a(u.unhandleds[0])})},o.finalize),e()},t,n,r)})}});Et&&(Et.allSettled&&fe(A,"allSettled",function(){var e=oe.apply(null,arguments).map(Mt);return new A(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return A.resolve(i).then(function(o){return r[a]={status:"fulfilled",value:o}},function(o){return r[a]={status:"rejected",reason:o}}).then(function(){return--n||t(r)})})})}),Et.any&&typeof AggregateError!="undefined"&&fe(A,"any",function(){var e=oe.apply(null,arguments).map(Mt);return new A(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,o){return A.resolve(a).then(function(u){return t(u)},function(u){i[o]=u,--r||n(new AggregateError(i))})})})}));function Gr(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&lt();n&&typeof n.then=="function"?Gr(e,function(i,a){n instanceof A?n._then(i,a):n.then(i,a)}):(e._state=!0,e._value=n,Xr(e)),r&&ft()}},gn.bind(null,e))}catch(n){gn(e,n)}}function gn(e,t){if(At.push(t),e._state===null){var n=e._lib&&lt();t=yn(t),e._state=!1,e._value=t,re&&t!==null&&typeof t=="object"&&!t._promise&&ea(function(){var r=Fn(t,"stack");t._promise=e,fe(t,"stack",{get:function(){return dn?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),wa(e),Xr(e),n&&ft()}}function Xr(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)zn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Ce===0&&(++Ce,Ze(function(){--Ce===0&&Hn()},[]))}function zn(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ce,Ze(_a,[n,e,t])}function _a(e,t,n){try{vn=t;var r,i=t._value;t._state?r=e(i):(At.length&&(At=[]),r=e(i),At.indexOf(i)===-1&&xa(t)),n.resolve(r)}catch(a){n.reject(a)}finally{vn=null,--Ce===0&&Hn(),--n.psd.ref||n.psd.finalize()}}function Qr(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,a,o;i!=null?(a=i.name||"Error",o=i.message||i,r=ln(i,0)):(a=i,o=""),t.push(a+(o?": "+o:"")+r)}return re&&(r=ln(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Qr(e._prev,t,n)),t}function qr(e,t){var n=t?t._numPrev+1:0;n<ya&&(e._prev=t,e._numPrev=n)}function yt(){lt()&&ft()}function lt(){var e=pn;return pn=!1,Ot=!1,e}function ft(){var e,t,n;do for(;He.length>0;)for(e=He,He=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(He.length>0);pn=!0,Ot=!0}function Hn(){var e=Ae;Ae=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Ct.slice(0),n=t.length;n;)t[--n]()}function ba(e){function t(){e(),Ct.splice(Ct.indexOf(t),1)}Ct.push(t),++Ce,Ze(function(){--Ce===0&&Hn()},[])}function wa(e){Ae.some(function(t){return t._value===e._value})||Ae.push(e)}function xa(e){for(var t=Ae.length;t;)if(Ae[--t]._value===e._value){Ae.splice(t,1);return}}function St(e){return new A(Je,!1,e)}function F(e,t){var n=C;return function(){var r=lt(),i=C;try{return be(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{be(i,!1),r&&ft()}}}var $={awaits:0,echoes:0,id:0},Ea=0,kt=[],Gt=0,Bt=0,Aa=0;function _e(e,t,n,r){var i=C,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Aa;var o=Ie.env;a.env=Vn?{Promise:A,PromiseProp:{value:A,configurable:!0,writable:!0},all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject,nthen:ir(o.nthen,a),gthen:ir(o.gthen,a)}:{},t&&H(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=Ne(a,e,n,r);return a.ref===0&&a.finalize(),u}function je(){return $.id||($.id=++Ea),++$.awaits,$.echoes+=Hr,$.id}function he(){return $.awaits?(--$.awaits===0&&($.id=0),$.echoes=$.awaits*Hr,!0):!1}(""+Wr).indexOf("[native code]")===-1&&(je=he=B);function Mt(e){return $.echoes&&e&&e.constructor===Et?(je(),e.then(function(t){return he(),t},function(t){return he(),N(t)})):e}function Ca(e){++Bt,(!$.echoes||--$.echoes===0)&&($.echoes=$.id=0),kt.push(C),be(e,!0)}function Sa(){var e=kt[kt.length-1];kt.pop(),be(e,!1)}function be(e,t){var n=C;if((t?$.echoes&&(!Gt++||e!==C):Gt&&(!--Gt||e!==C))&&Zr(t?Ca.bind(null,e):Sa),e!==C&&(C=e,n===Ie&&(Ie.env=Jr()),Vn)){var r=Ie.env.Promise,i=e.env;It.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(M,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Jr(){var e=M.Promise;return Vn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(M,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:It.then,gthen:e.prototype.then}:{}}function Ne(e,t,n,r,i){var a=C;try{return be(e,!0),t(n,r,i)}finally{be(a,!1)}}function Zr(e){Wr.call(fn,e)}function Ft(e,t,n,r){return typeof e!="function"?e:function(){var i=C;n&&je(),be(t,!0);try{return e.apply(this,arguments)}finally{be(i,!1),r&&Zr(he)}}}function ir(e,t){return function(n,r){return e.call(this,Ft(n,t),Ft(r,t))}}var ar="unhandledrejection";function or(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(M.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(ar,!0,!0),H(r,i)):M.CustomEvent&&(r=new CustomEvent(ar,{detail:i}),H(r,i)),r&&M.dispatchEvent&&(dispatchEvent(r),!M.PromiseRejectionEvent&&M.onunhandledrejection))try{M.onunhandledrejection(r)}catch{}re&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var N=A.reject;function _n(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!C.letThrough&&!e._vip){if(e._state.openComplete)return N(new R.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return N(new R.DatabaseClosed);e.open().catch(B)}return e._state.dbReadyPromise.then(function(){return _n(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===Nn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return _n(e,t,n,r)})):N(a)}return i._promise(t,function(a,o){return _e(function(){return C.trans=i,r(a,o,i)})}).then(function(a){return i._completion.then(function(){return a})})}}var ur="3.2.1",Ee=String.fromCharCode(65535),bn=-1/0,ie="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ei="String expected.",Ye=[],Ht=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ka=Ht,Ra=Ht,ti=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Wt="__dbnames",Xt="readonly",Qt="readwrite";function ke(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ni={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function mt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=st(t),delete t[e]),t}:function(t){return t}}var Ta=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||C.trans,a=this.name;function o(s,c,l){if(!l.schema[a])throw new R.NotFound("Table "+a+" not part of transaction");return n(l.idbtrans,l)}var u=lt();try{return i&&i.db===this.db?i===C.trans?i._promise(t,o,r):_e(function(){return i._promise(t,o,r)},{trans:i,transless:C.transless||C}):_n(this.db,t,[this.name],o)}finally{u&&ft()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(V(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=L(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(l){return l.compound&&n.every(function(f){return l.keyPath.indexOf(f)>=0})&&l.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==Ee)return this.where(r.name).equals(r.keyPath.map(function(l){return t[l]}));!r&&re&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,a=this.db._deps.indexedDB;function o(l,f){try{return a.cmp(l,f)===0}catch{return!1}}var u=n.reduce(function(l,f){var h=l[0],m=l[1],p=i[f],d=t[f];return[h||p,h||!p?ke(m,p&&p.multi?function(v){var _=le(v,f);return V(_)&&_.some(function(w){return o(d,w)})}:function(v){return o(d,le(v,f))}):m]},[null,null]),s=u[0],c=u[1];return s?this.where(s.name).equals(t[s.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,V(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var a in r)if(Q(r,a))try{i[a]=r[a]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){H(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=t;return o&&a&&(u=mt(o)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(s){return s.numFailures?A.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{Z(t,o,s)}catch{}return s})},e.prototype.update=function(t,n){if(typeof t=="object"&&!V(t)){var r=le(t,this.schema.primKey.keyPath);if(r===void 0)return N(new R.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?L(n).forEach(function(i){Z(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=t;return o&&a&&(u=mt(o)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?A.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{Z(t,o,s)}catch{}return s})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?A.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:ni})}).then(function(n){return n.numFailures?A.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,c=s.auto,l=s.keyPath;if(l&&a)throw new R.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new R.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=l&&c?t.map(mt(l)):t;return i.core.mutate({trans:u,type:"add",keys:a,values:h,wantResults:o}).then(function(m){var p=m.numFailures,d=m.results,v=m.lastResult,_=m.failures,w=o?d:v;if(p===0)return w;throw new We(i.name+".bulkAdd(): "+p+" of "+f+" operations failed",_)})})},e.prototype.bulkPut=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,c=s.auto,l=s.keyPath;if(l&&a)throw new R.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new R.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=l&&c?t.map(mt(l)):t;return i.core.mutate({trans:u,type:"put",keys:a,values:h,wantResults:o}).then(function(m){var p=m.numFailures,d=m.results,v=m.lastResult,_=m.failures,w=o?d:v;if(p===0)return w;throw new We(i.name+".bulkPut(): "+p+" of "+f+" operations failed",_)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var a=i.numFailures,o=i.lastResult,u=i.failures;if(a===0)return o;throw new We(n.name+".bulkDelete(): "+a+" of "+r+" operations failed",u)})},e}();function ht(e){var t={},n=function(u,s){if(s){for(var c=arguments.length,l=new Array(c-1);--c;)l[c-1]=arguments[c];return t[u].subscribe.apply(null,l),e}else if(typeof u=="string")return t[u]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(u,s,c){if(typeof u=="object")return o(u);s||(s=va),c||(c=B);var l={subscribers:[],fire:c,subscribe:function(f){l.subscribers.indexOf(f)===-1&&(l.subscribers.push(f),l.fire=s(l.fire,f))},unsubscribe:function(f){l.subscribers=l.subscribers.filter(function(h){return h!==f}),l.fire=l.subscribers.reduce(s,c)}};return t[u]=n[u]=l,l}function o(u){L(u).forEach(function(s){var c=u[s];if(V(c))a(s,u[s][0],u[s][1]);else if(c==="asap")var l=a(s,ct,function(){for(var h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];l.subscribers.forEach(function(p){Mr(function(){p.apply(null,m)})})});else throw new R.InvalidArgument("Invalid event config")})}}function dt(e,t){return Fe(t).from({prototype:e}),t}function Ka(e){return dt(Ta.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:ht(null,{creating:[ha,B],reading:[fa,ct],updating:[pa,B],deleting:[da,B]})})}function Te(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function qt(e,t){e.filter=ke(e.filter,t)}function Jt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return ke(r(),t())}:t,e.justLimit=n&&!r}function Pa(e,t){e.isMatch=ke(e.isMatch,t)}function Rt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new R.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function sr(e,t,n){var r=Rt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function gt(e,t,n,r){var i=e.replayFilter?ke(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},o=function(u,s,c){if(!i||i(s,c,function(h){return s.stop(h)},function(h){return s.fail(h)})){var l=s.primaryKey,f=""+l;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(l)),Q(a,f)||(a[f]=!0,t(u,s,c))}};return Promise.all([e.or._iterate(o,n),cr(sr(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}else return cr(sr(e,r,n),ke(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function cr(e,t,n,r){var i=r?function(o,u,s){return n(r(o),u,s)}:n,a=F(i);return e.then(function(o){if(o)return o.start(function(){var u=function(){return o.continue()};(!t||t(o,function(s){return u=s},function(s){o.stop(s),u=B},function(s){o.fail(s),u=B}))&&a(o.value,o,function(s){return u=s}),u()})})}function z(e,t){try{var n=lr(e),r=lr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Ia(fr(e),fr(t));case"Array":return Da(e,t)}}catch{}return NaN}function Da(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var o=z(e[a],t[a]);if(o!==0)return o}return n===r?0:n<r?-1:1}function Ia(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function lr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=sn(e);return n==="ArrayBuffer"?"binary":n}function fr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Oa=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,N.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,N.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=ke(n.algorithm,t)},e.prototype._iterate=function(t,n){return gt(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&H(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return gt(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(Te(i,!0))return a.count({trans:r,query:{index:Rt(i,a.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var o=0;return gt(i,function(){return++o,!1},r,a).then(function(){return o})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],a=r.length-1;function o(c,l){return l?o(c[r[l]],l-1):c[i]}var u=this._ctx.dir==="next"?1:-1;function s(c,l){var f=o(c,a),h=o(l,a);return f<h?-u:f>h?u:0}return this.toArray(function(c){return c.sort(s)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Te(i,!0)&&i.limit>0){var a=i.valueMapper,o=Rt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(s){var c=s.result;return a?c.map(a):c})}else{var u=[];return gt(i,function(s){return u.push(s)},r,i.table.core).then(function(){return u})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,Te(n)?Jt(n,function(){var r=t;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):Jt(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Jt(this._ctx,function(){var n=t;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},e.prototype.until=function(t,n){return qt(this._ctx,function(r,i,a){return t(r.value)?(i(a),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return qt(this._ctx,function(n){return t(n.value)}),Pa(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&Te(n,!0)&&n.limit>0)return this._read(function(i){var a=Rt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return qt(this._ctx,function(i){var a=i.primaryKey.toString(),o=Q(r,a);return r[a]=!0,!o}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof t=="function")a=t;else{var o=L(t),u=o.length;a=function(_){for(var w=!1,g=0;g<u;++g){var b=o[g],y=t[b];le(_,b)!==y&&(Z(_,b,y),w=!0)}return w}}var s=r.table.core,c=s.schema.primaryKey,l=c.outbound,f=c.extractKey,h=n.db._options.modifyChunkSize||200,m=[],p=0,d=[],v=function(_,w){var g=w.failures,b=w.numFailures;p+=_-b;for(var y=0,x=L(g);y<x.length;y++){var S=x[y];m.push(g[S])}};return n.clone().primaryKeys().then(function(_){var w=function(g){var b=Math.min(h,_.length-g);return s.getMany({trans:i,keys:_.slice(g,g+b),cache:"immutable"}).then(function(y){for(var x=[],S=[],E=l?[]:null,k=[],T=0;T<b;++T){var I=y[T],O={value:st(I),primKey:_[g+T]};a.call(O,O.value,O)!==!1&&(O.value==null?k.push(_[g+T]):!l&&z(f(I),f(O.value))!==0?(k.push(_[g+T]),x.push(O.value)):(S.push(O.value),l&&E.push(_[g+T])))}var D=Te(r)&&r.limit===1/0&&(typeof t!="function"||t===Zt)&&{index:r.index,range:r.range};return Promise.resolve(x.length>0&&s.mutate({trans:i,type:"add",values:x}).then(function(U){for(var K in U.failures)k.splice(parseInt(K),1);v(x.length,U)})).then(function(){return(S.length>0||D&&typeof t=="object")&&s.mutate({trans:i,type:"put",keys:E,values:S,criteria:D,changeSpec:typeof t!="function"&&t}).then(function(U){return v(S.length,U)})}).then(function(){return(k.length>0||D&&t===Zt)&&s.mutate({trans:i,type:"delete",keys:k,criteria:D}).then(function(U){return v(k.length,U)})}).then(function(){return _.length>g+b&&w(g+h)})})};return w(0).then(function(){if(m.length>0)throw new Dt("Error modifying one or more objects",m,p,d);return _.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return Te(t)&&(t.isPrimKey&&!Ra||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,a=n;return t.table.core.count({trans:r,query:{index:i,range:a}}).then(function(o){return t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(u){var s=u.failures;u.lastResult,u.results;var c=u.numFailures;if(c)throw new Dt("Could not delete some values",Object.keys(s).map(function(l){return s[l]}),o-c);return o-c})})}):this.modify(Zt)},e}(),Zt=function(e,t){return t.value=null};function Ba(e){return dt(Oa.prototype,function(n,r){this.db=e;var i=ni,a=null;if(r)try{i=r()}catch(c){a=c}var o=n._ctx,u=o.table,s=u.hook.reading.fire;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:o.or,valueMapper:s!==ct?s:null}})}function Ma(e,t){return e<t?-1:e===t?0:1}function Fa(e,t){return e>t?-1:e===t?0:1}function W(e,t,n){var r=e instanceof ii?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Ke(e){return new e.Collection(e,function(){return ri("")}).limit(0)}function La(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function ja(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Na(e,t,n,r,i,a){for(var o=Math.min(e.length,r.length),u=-1,s=0;s<o;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;i(e[s],c)<0&&(u=s)}return o<r.length&&a==="next"?e+n.substr(e.length):o<e.length&&a==="prev"?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function _t(e,t,n,r){var i,a,o,u,s,c,l,f=n.length;if(!n.every(function(d){return typeof d=="string"}))return W(e,ei);function h(d){i=La(d),a=ja(d),o=d==="next"?Ma:Fa;var v=n.map(function(_){return{lower:a(_),upper:i(_)}}).sort(function(_,w){return o(_.lower,w.lower)});u=v.map(function(_){return _.upper}),s=v.map(function(_){return _.lower}),c=d,l=d==="next"?"":r}h("next");var m=new e.Collection(e,function(){return ve(u[0],s[f-1]+r)});m._ondirectionchange=function(d){h(d)};var p=0;return m._addAlgorithm(function(d,v,_){var w=d.key;if(typeof w!="string")return!1;var g=a(w);if(t(g,s,p))return!0;for(var b=null,y=p;y<f;++y){var x=Na(w,g,u[y],s[y],o,c);x===null&&b===null?p=y+1:(b===null||o(b,x)>0)&&(b=x)}return v(b!==null?function(){d.continue(b+l)}:_),!1}),m}function ve(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function ri(e){return{type:1,lower:e,upper:e}}var ii=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?Ke(this):new this.Collection(this,function(){return ve(t,n,!r,!i)})}catch{return W(this,ie)}},e.prototype.equals=function(t){return t==null?W(this,ie):new this.Collection(this,function(){return ri(t)})},e.prototype.above=function(t){return t==null?W(this,ie):new this.Collection(this,function(){return ve(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?W(this,ie):new this.Collection(this,function(){return ve(t,void 0,!1)})},e.prototype.below=function(t){return t==null?W(this,ie):new this.Collection(this,function(){return ve(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?W(this,ie):new this.Collection(this,function(){return ve(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?W(this,ei):this.between(t,t+Ee,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):_t(this,function(n,r){return n.indexOf(r[0])===0},[t],Ee)},e.prototype.equalsIgnoreCase=function(t){return _t(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=oe.apply(Pe,arguments);return t.length===0?Ke(this):_t(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=oe.apply(Pe,arguments);return t.length===0?Ke(this):_t(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Ee)},e.prototype.anyOf=function(){var t=this,n=oe.apply(Pe,arguments),r=this._cmp;try{n.sort(r)}catch{return W(this,ie)}if(n.length===0)return Ke(this);var i=new this.Collection(this,function(){return ve(n[0],n[n.length-1])});i._ondirectionchange=function(o){r=o==="next"?t._ascending:t._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(o,u,s){for(var c=o.key;r(c,n[a])>0;)if(++a,a===n.length)return u(s),!1;return r(c,n[a])===0?!0:(u(function(){o.continue(n[a])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[bn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=oe.apply(Pe,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return W(this,ie)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[bn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,a=this._ascending,o=this._descending,u=this._min,s=this._max;if(t.length===0)return Ke(this);if(!t.every(function(y){return y[0]!==void 0&&y[1]!==void 0&&a(y[0],y[1])<=0}))return W(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",R.InvalidArgument);var c=!n||n.includeLowers!==!1,l=n&&n.includeUppers===!0;function f(y,x){for(var S=0,E=y.length;S<E;++S){var k=y[S];if(i(x[0],k[1])<0&&i(x[1],k[0])>0){k[0]=u(k[0],x[0]),k[1]=s(k[1],x[1]);break}}return S===E&&y.push(x),y}var h=a;function m(y,x){return h(y[0],x[0])}var p;try{p=t.reduce(f,[]),p.sort(m)}catch{return W(this,ie)}var d=0,v=l?function(y){return a(y,p[d][1])>0}:function(y){return a(y,p[d][1])>=0},_=c?function(y){return o(y,p[d][0])>0}:function(y){return o(y,p[d][0])>=0};function w(y){return!v(y)&&!_(y)}var g=v,b=new this.Collection(this,function(){return ve(p[0][0],p[p.length-1][1],!c,!l)});return b._ondirectionchange=function(y){y==="next"?(g=v,h=a):(g=_,h=o),p.sort(m)},b._addAlgorithm(function(y,x,S){for(var E=y.key;g(E);)if(++d,d===p.length)return x(S),!1;return w(E)?!0:(r._cmp(E,p[d][1])===0||r._cmp(E,p[d][0])===0||x(function(){h===a?y.continue(p[d][0]):y.continue(p[d][1])}),!1)}),b},e.prototype.startsWithAnyOf=function(){var t=oe.apply(Pe,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?Ke(this):this.inAnyRange(t.map(function(n){return[n,n+Ee]})):W(this,"startsWithAnyOf() only works with strings")},e}();function Ua(e){return dt(ii.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var a=e._deps.indexedDB;if(!a)throw new R.MissingAPI;this._cmp=this._ascending=a.cmp.bind(a),this._descending=function(o,u){return a.cmp(u,o)},this._max=function(o,u){return a.cmp(o,u)>0?o:u},this._min=function(o,u){return a.cmp(o,u)<0?o:u},this._IDBKeyRange=e._deps.IDBKeyRange})}function ne(e){return F(function(t){return et(t),e(t.target.error),!1})}function et(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var tt="storagemutated",ge="x-storagemutated-1",we=ht(null,tt),$a=function(){function e(){}return e.prototype._lock=function(){return ze(!C.global),++this._reculock,this._reculock===1&&!C.global&&(C.lockOwnerFor=this),this},e.prototype._unlock=function(){if(ze(!C.global),--this._reculock===0)for(C.global||(C.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Ne(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&C.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(ze(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new R.DatabaseClosed(i);case"MissingAPIError":throw new R.MissingAPI(i.message,i);default:throw new R.OpenFailed(i)}if(!this.active)throw new R.TransactionInactive;return ze(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=F(function(a){et(a),n._reject(t.error)}),t.onabort=F(function(a){et(a),n.active&&n._reject(new R.Abort(t.error)),n.active=!1,n.on("abort").fire(a)}),t.oncomplete=F(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&we.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return N(new R.ReadOnly("Transaction is readonly"));if(!this.active)return N(new R.TransactionInactive);if(this._locked())return new A(function(o,u){i._blockedFuncs.push([function(){i._promise(t,n,r).then(o,u)},C])});if(r)return _e(function(){var o=new A(function(u,s){i._lock();var c=n(u,s,i);c&&c.then&&c.then(u,s)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var a=new A(function(o,u){var s=n(o,u,i);s&&s.then&&s.then(o,u)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=A.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var a=n._waitingFor;return new A(function(o,u){r.then(function(s){return n._waitingQueue.push(F(o.bind(null,s)))},function(s){return n._waitingQueue.push(F(u.bind(null,s)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new R.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(Q(n,t))return n[t];var r=this.schema[t];if(!r)throw new R.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function Va(e){return dt($a.prototype,function(n,r,i,a,o){var u=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=ht(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new A(function(s,c){u._resolve=s,u._reject=c}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(s){var c=u.active;return u.active=!1,u.on.error.fire(s),u.parent?u.parent._reject(s):c&&u.idbtrans&&u.idbtrans.abort(),N(s)})})}function wn(e,t,n,r,i,a,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+ai(t)}}function ai(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function oi(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Fr(n,function(r){return[r.name,r]})}}function za(e){return e.length===1?e[0]:e}var nt=function(e){try{return e.only([[]]),nt=function(){return[[]]},[[]]}catch{return nt=function(){return Ee},Ee}};function xn(e){return e==null?function(){}:typeof e=="string"?Ha(e):function(t){return le(t,e)}}function Ha(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return le(n,e)}}function hr(e){return[].slice.call(e)}var Wa=0;function Ge(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function Ya(e,t,n){function r(f,h){var m=hr(f.objectStoreNames);return{schema:{name:f.name,tables:m.map(function(p){return h.objectStore(p)}).map(function(p){var d=p.keyPath,v=p.autoIncrement,_=V(d),w=d==null,g={},b={name:p.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:_,keyPath:d,autoIncrement:v,unique:!0,extractKey:xn(d)},indexes:hr(p.indexNames).map(function(y){return p.index(y)}).map(function(y){var x=y.name,S=y.unique,E=y.multiEntry,k=y.keyPath,T=V(k),I={name:x,compound:T,keyPath:k,unique:S,multiEntry:E,extractKey:xn(k)};return g[Ge(k)]=I,I}),getIndexByKeyPath:function(y){return g[Ge(y)]}};return g[":id"]=b.primaryKey,d!=null&&(g[Ge(d)]=b.primaryKey),b})},hasGetAll:m.length>0&&"getAll"in h.objectStore(m[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var h=f.lower,m=f.upper,p=f.lowerOpen,d=f.upperOpen,v=h===void 0?m===void 0?null:t.upperBound(m,!!d):m===void 0?t.lowerBound(h,!!p):t.bound(h,m,!!p,!!d);return v}function a(f){var h=f.name;function m(v){var _=v.trans,w=v.type,g=v.keys,b=v.values,y=v.range;return new Promise(function(x,S){x=F(x);var E=_.objectStore(h),k=E.keyPath==null,T=w==="put"||w==="add";if(!T&&w!=="delete"&&w!=="deleteRange")throw new Error("Invalid operation type: "+w);var I=(g||b||{length:1}).length;if(g&&b&&g.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(I===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var O,D=[],U=[],K=0,Y=function(te){++K,et(te)};if(w==="deleteRange"){if(y.type===4)return x({numFailures:K,failures:U,results:[],lastResult:void 0});y.type===3?D.push(O=E.clear()):D.push(O=E.delete(i(y)))}else{var q=T?k?[b,g]:[b,null]:[g,null],de=q[0],ee=q[1];if(T)for(var G=0;G<I;++G)D.push(O=ee&&ee[G]!==void 0?E[w](de[G],ee[G]):E[w](de[G])),O.onerror=Y;else for(var G=0;G<I;++G)D.push(O=E[w](de[G])),O.onerror=Y}var pe=function(te){var Ue=te.target.result;D.forEach(function(J,pt){return J.error!=null&&(U[pt]=J.error)}),x({numFailures:K,failures:U,results:w==="delete"?g:D.map(function(J){return J.result}),lastResult:Ue})};O.onerror=function(te){Y(te),pe(te)},O.onsuccess=pe})}function p(v){var _=v.trans,w=v.values,g=v.query,b=v.reverse,y=v.unique;return new Promise(function(x,S){x=F(x);var E=g.index,k=g.range,T=_.objectStore(h),I=E.isPrimaryKey?T:T.index(E.name),O=b?y?"prevunique":"prev":y?"nextunique":"next",D=w||!("openKeyCursor"in I)?I.openCursor(i(k),O):I.openKeyCursor(i(k),O);D.onerror=ne(S),D.onsuccess=F(function(U){var K=D.result;if(!K){x(null);return}K.___id=++Wa,K.done=!1;var Y=K.continue.bind(K),q=K.continuePrimaryKey;q&&(q=q.bind(K));var de=K.advance.bind(K),ee=function(){throw new Error("Cursor not started")},G=function(){throw new Error("Cursor not stopped")};K.trans=_,K.stop=K.continue=K.continuePrimaryKey=K.advance=ee,K.fail=F(S),K.next=function(){var pe=this,te=1;return this.start(function(){return te--?pe.continue():pe.stop()}).then(function(){return pe})},K.start=function(pe){var te=new Promise(function(J,pt){J=F(J),D.onerror=ne(pt),K.fail=pt,K.stop=function(hi){K.stop=K.continue=K.continuePrimaryKey=K.advance=G,J(hi)}}),Ue=function(){if(D.result)try{pe()}catch(J){K.fail(J)}else K.done=!0,K.start=function(){throw new Error("Cursor behind last entry")},K.stop()};return D.onsuccess=F(function(J){D.onsuccess=Ue,Ue()}),K.continue=Y,K.continuePrimaryKey=q,K.advance=de,Ue(),te},x(K)},S)})}function d(v){return function(_){return new Promise(function(w,g){w=F(w);var b=_.trans,y=_.values,x=_.limit,S=_.query,E=x===1/0?void 0:x,k=S.index,T=S.range,I=b.objectStore(h),O=k.isPrimaryKey?I:I.index(k.name),D=i(T);if(x===0)return w({result:[]});if(v){var U=y?O.getAll(D,E):O.getAllKeys(D,E);U.onsuccess=function(de){return w({result:de.target.result})},U.onerror=ne(g)}else{var K=0,Y=y||!("openKeyCursor"in O)?O.openCursor(D):O.openKeyCursor(D),q=[];Y.onsuccess=function(de){var ee=Y.result;if(!ee)return w({result:q});if(q.push(y?ee.value:ee.primaryKey),++K===x)return w({result:q});ee.continue()},Y.onerror=ne(g)}})}}return{name:h,schema:f,mutate:m,getMany:function(v){var _=v.trans,w=v.keys;return new Promise(function(g,b){g=F(g);for(var y=_.objectStore(h),x=w.length,S=new Array(x),E=0,k=0,T,I=function(K){var Y=K.target;(S[Y._pos]=Y.result)!=null,++k===E&&g(S)},O=ne(b),D=0;D<x;++D){var U=w[D];U!=null&&(T=y.get(w[D]),T._pos=D,T.onsuccess=I,T.onerror=O,++E)}E===0&&g(S)})},get:function(v){var _=v.trans,w=v.key;return new Promise(function(g,b){g=F(g);var y=_.objectStore(h),x=y.get(w);x.onsuccess=function(S){return g(S.target.result)},x.onerror=ne(b)})},query:d(s),openCursor:p,count:function(v){var _=v.query,w=v.trans,g=_.index,b=_.range;return new Promise(function(y,x){var S=w.objectStore(h),E=g.isPrimaryKey?S:S.index(g.name),k=i(b),T=k?E.count(k):E.count();T.onsuccess=F(function(I){return y(I.target.result)}),T.onerror=ne(x)})}}}var o=r(e,n),u=o.schema,s=o.hasGetAll,c=u.tables.map(function(f){return a(f)}),l={};return c.forEach(function(f){return l[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var h=l[f];if(!h)throw new Error("Table '"+f+"' not found");return l[f]},MIN_KEY:-1/0,MAX_KEY:nt(t),schema:u}}function Ga(e,t){return t.reduce(function(n,r){var i=r.create;return P(P({},n),i(n))},e)}function Xa(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=Ga(Ya(t,i,r),e.dbcore);return{dbcore:a}}function Wn(e,t){var n=e._novip,r=t.db,i=Xa(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(a){var o=a.name;n.core.schema.tables.some(function(u){return u.name===o})&&(a.core=n.core.table(o),n[o]instanceof n.Table&&(n[o].core=a.core))})}function Lt(e,t,n,r){var i=e._novip;n.forEach(function(a){var o=r[a];t.forEach(function(u){var s=Fn(u,a);(!s||"value"in s&&s.value===void 0)&&(u===i.Transaction.prototype||u instanceof i.Transaction?fe(u,a,{get:function(){return this.table(a)},set:function(c){Or(this,a,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):u[a]=new i.Table(a,o))})})}function En(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function Qa(e,t){return e._cfg.version-t._cfg.version}function qa(e,t,n,r){var i=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),u=C.transless||C;_e(function(){C.trans=a,C.transless=u,t===0?(L(i).forEach(function(s){Yn(n,s,i[s].primKey,i[s].indexes)}),Wn(e,n),A.follow(function(){return e.on.populate.fire(a)}).catch(o)):Ja(e,t,a,n).catch(o)})}function Ja(e,t,n,r){var i=e._novip,a=[],o=i._versions,u=i._dbSchema=Gn(i,i.idbdb,r),s=!1,c=o.filter(function(f){return f._cfg.version>=t});c.forEach(function(f){a.push(function(){var h=u,m=f._cfg.dbschema;Cn(i,h,r),Cn(i,m,r),u=i._dbSchema=m;var p=ui(h,m);p.add.forEach(function(b){Yn(r,b[0],b[1].primKey,b[1].indexes)}),p.change.forEach(function(b){if(b.recreate)throw new R.Upgrade("Not yet support for changing primary key");var y=r.objectStore(b.name);b.add.forEach(function(x){return An(y,x)}),b.change.forEach(function(x){y.deleteIndex(x.name),An(y,x)}),b.del.forEach(function(x){return y.deleteIndex(x)})});var d=f._cfg.contentUpgrade;if(d&&f._cfg.version>t){Wn(i,r),n._memoizedTables={},s=!0;var v=Lr(m);p.del.forEach(function(b){v[b]=h[b]}),En(i,[i.Transaction.prototype]),Lt(i,[i.Transaction.prototype],L(v),v),n.schema=v;var _=Ln(d);_&&je();var w,g=A.follow(function(){if(w=d(n),w&&_){var b=he.bind(null,null);w.then(b,b)}});return w&&typeof w.then=="function"?A.resolve(w):g.then(function(){return w})}}),a.push(function(h){if(!s||!ka){var m=f._cfg.dbschema;eo(m,h)}En(i,[i.Transaction.prototype]),Lt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function l(){return a.length?A.resolve(a.shift()(n.idbtrans)).then(l):A.resolve()}return l().then(function(){Za(u,r)})}function ui(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],a=t[r];if(!i)n.add.push([r,a]);else{var o={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!Ht)o.recreate=!0,n.change.push(o);else{var u=i.idxByName,s=a.idxByName,c=void 0;for(c in u)s[c]||o.del.push(c);for(c in s){var l=u[c],f=s[c];l?l.src!==f.src&&o.change.push(f):o.add.push(f)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function Yn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return An(i,a)}),i}function Za(e,t){L(e).forEach(function(n){t.db.objectStoreNames.contains(n)||Yn(t,n,e[n].primKey,e[n].indexes)})}function eo(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function An(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Gn(e,t,n){var r={},i=Vt(t.objectStoreNames,0);return i.forEach(function(a){for(var o=n.objectStore(a),u=o.keyPath,s=wn(ai(u),u||"",!1,!1,!!o.autoIncrement,u&&typeof u!="string",!0),c=[],l=0;l<o.indexNames.length;++l){var f=o.index(o.indexNames[l]);u=f.keyPath;var h=wn(f.name,u,!!f.unique,!!f.multiEntry,!1,u&&typeof u!="string",!1);c.push(h)}r[a]=oi(a,s,c)}),r}function to(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=Gn(r,t,n);r._storeNames=Vt(t.objectStoreNames,0),Lt(r,[r._allTables],L(i),i)}function no(e,t){var n=Gn(e,e.idbdb,t),r=ui(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Cn(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,a=0;a<i.length;++a){var o=i[a],u=n.objectStore(o);r._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var c=u.indexNames[s],l=u.index(c).keyPath,f=typeof l=="string"?l:"["+Vt(l).join("+")+"]";if(t[o]){var h=t[o].idxByName[f];h&&(h.name=c,delete t[o].idxByName[f],t[o].idxByName[c]=h)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&M.WorkerGlobalScope&&M instanceof M.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function ro(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return wn(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),V(i),n===0)})}var io=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){L(t).forEach(function(r){if(t[r]!==null){var i=ro(t[r]),a=i.shift();if(a.multi)throw new R.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new R.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new R.Schema("Index must have a name and cannot be an empty string")}),n[r]=oi(r,a,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?H(this._cfg.storesSource,t):t;var r=n._versions,i={},a={};return r.forEach(function(o){H(i,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(i,a)}),n._dbSchema=a,En(n,[n._allTables,n,n.Transaction.prototype]),Lt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],L(a),a),n._storeNames=L(a),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Un(this._cfg.contentUpgrade||B,t),this},e}();function ao(e){return dt(io.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Xn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new li(Wt,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Qn(e){return e&&typeof e.databases=="function"}function oo(e){var t=e.indexedDB,n=e.IDBKeyRange;return Qn(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Wt})}):Xn(t,n).toCollection().primaryKeys()}function uo(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!Qn(n)&&t!==Wt&&Xn(n,r).put({name:t}).catch(B)}function so(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!Qn(n)&&t!==Wt&&Xn(n,r).delete(t).catch(B)}function Sn(e){return _e(function(){return C.letThrough=!0,e()})}function co(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function lo(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?N(t.dbOpenError):e});re&&(t.openCanceller._stackHolder=Re()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new R.DatabaseClosed("db.open() was cancelled")}var a=t.dbReadyResolve,o=null,u=!1;return A.race([r,(typeof navigator=="undefined"?A.resolve():co()).then(function(){return new A(function(s,c){if(i(),!n)throw new R.MissingAPI;var l=e.name,f=t.autoSchema?n.open(l):n.open(l,Math.round(e.verno*10));if(!f)throw new R.MissingAPI;f.onerror=ne(c),f.onblocked=F(e._fireOnBlocked),f.onupgradeneeded=F(function(h){if(o=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=et,o.abort(),f.result.close();var m=n.deleteDatabase(l);m.onsuccess=m.onerror=F(function(){c(new R.NoSuchDatabase("Database "+l+" doesnt exist"))})}else{o.onerror=ne(c);var p=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;u=p<1,e._novip.idbdb=f.result,qa(e,p/10,o,c)}},c),f.onsuccess=F(function(){o=null;var h=e._novip.idbdb=f.result,m=Vt(h.objectStoreNames);if(m.length>0)try{var p=h.transaction(za(m),"readonly");t.autoSchema?to(e,h,p):(Cn(e,e._dbSchema,p),no(e,p)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Wn(e,p)}catch{}Ye.push(e),h.onversionchange=F(function(d){t.vcFired=!0,e.on("versionchange").fire(d)}),h.onclose=F(function(d){e.on("close").fire(d)}),u&&uo(e._deps,l),s()},c)})})]).then(function(){return i(),t.onReadyBeingFired=[],A.resolve(Sn(function(){return e.on.ready.fire(e.vip)})).then(function s(){if(t.onReadyBeingFired.length>0){var c=t.onReadyBeingFired.reduce(Un,B);return t.onReadyBeingFired=[],A.resolve(Sn(function(){return c(e.vip)})).then(s)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(s){t.dbOpenError=s;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),N(s)}).finally(function(){t.openComplete=!0,a()})}function kn(e){var t=function(o){return e.next(o)},n=function(o){return e.throw(o)},r=a(t),i=a(n);function a(o){return function(u){var s=o(u),c=s.value;return s.done?c:!c||typeof c.then!="function"?V(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return a(t)()}function fo(e,t,n){var r=arguments.length;if(r<2)throw new R.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=jr(i);return[e,a,n]}function si(e,t,n,r,i){return A.resolve().then(function(){var a=C.transless||C,o=e._createTransaction(t,n,e._dbSchema,r),u={trans:o,transless:a};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===Nn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return si(e,t,n,null,i)})):N(f)}var s=Ln(i);s&&je();var c,l=A.follow(function(){if(c=i.call(o,o),c)if(s){var f=he.bind(null,null);c.then(f,f)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=kn(c))},u);return(c&&typeof c.then=="function"?A.resolve(c).then(function(f){return o.active?f:N(new R.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):l.then(function(){return c})).then(function(f){return r&&o._resolve(),o._completion.then(function(){return f})}).catch(function(f){return o._reject(f),N(f)})})}function bt(e,t,n){for(var r=V(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function ho(e){return P(P({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function o(d,v,_){var w=Ge(d),g=i[w]=i[w]||[],b=d==null?0:typeof d=="string"?1:d.length,y=v>0,x=P(P({},_),{isVirtual:y,keyTail:v,keyLength:b,extractKey:xn(d),unique:!y&&_.unique});if(g.push(x),x.isPrimaryKey||a.push(x),b>1){var S=b===2?d[0]:d.slice(0,b-1);o(S,v+1,_)}return g.sort(function(E,k){return E.keyTail-k.keyTail}),x}var u=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var s=0,c=r.indexes;s<c.length;s++){var l=c[s];o(l.keyPath,0,l)}function f(d){var v=i[Ge(d)];return v&&v[0]}function h(d,v){return{type:d.type===1?2:d.type,lower:bt(d.lower,d.lowerOpen?e.MAX_KEY:e.MIN_KEY,v),lowerOpen:!0,upper:bt(d.upper,d.upperOpen?e.MIN_KEY:e.MAX_KEY,v),upperOpen:!0}}function m(d){var v=d.query.index;return v.isVirtual?P(P({},d),{query:{index:v,range:h(d.query.range,v.keyTail)}}):d}var p=P(P({},n),{schema:P(P({},r),{primaryKey:u,indexes:a,getIndexByKeyPath:f}),count:function(d){return n.count(m(d))},query:function(d){return n.query(m(d))},openCursor:function(d){var v=d.query.index,_=v.keyTail,w=v.isVirtual,g=v.keyLength;if(!w)return n.openCursor(d);function b(y){function x(E){E!=null?y.continue(bt(E,d.reverse?e.MAX_KEY:e.MIN_KEY,_)):d.unique?y.continue(y.key.slice(0,g).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,_)):y.continue()}var S=Object.create(y,{continue:{value:x},continuePrimaryKey:{value:function(E,k){y.continuePrimaryKey(bt(E,e.MAX_KEY,_),k)}},primaryKey:{get:function(){return y.primaryKey}},key:{get:function(){var E=y.key;return g===1?E[0]:E.slice(0,g)}},value:{get:function(){return y.value}}});return S}return n.openCursor(m(d)).then(function(y){return y&&b(y)})}});return p}})}var po={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:ho};function qn(e,t,n,r){return n=n||{},r=r||"",L(e).forEach(function(i){if(!Q(t,i))n[r+i]=void 0;else{var a=e[i],o=t[i];if(typeof a=="object"&&typeof o=="object"&&a&&o){var u=sn(a),s=sn(o);u!==s?n[r+i]=t[i]:u==="Object"?qn(a,o,n,r+i+"."):a!==o&&(n[r+i]=t[i])}else a!==o&&(n[r+i]=t[i])}}),L(t).forEach(function(i){Q(e,i)||(n[r+i]=t[i])}),n}function vo(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var yo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return P(P({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=P(P({},n),{mutate:function(a){var o=C.trans,u=o.table(t).hook,s=u.deleting,c=u.creating,l=u.updating;switch(a.type){case"add":if(c.fire===B)break;return o._promise("readwrite",function(){return f(a)},!0);case"put":if(c.fire===B&&l.fire===B)break;return o._promise("readwrite",function(){return f(a)},!0);case"delete":if(s.fire===B)break;return o._promise("readwrite",function(){return f(a)},!0);case"deleteRange":if(s.fire===B)break;return o._promise("readwrite",function(){return h(a)},!0)}return n.mutate(a);function f(p){var d=C.trans,v=p.keys||vo(r,p);if(!v)throw new Error("Keys missing");return p=p.type==="add"||p.type==="put"?P(P({},p),{keys:v}):P({},p),p.type!=="delete"&&(p.values=on([],p.values,!0)),p.keys&&(p.keys=on([],p.keys,!0)),mo(n,p,v).then(function(_){var w=v.map(function(g,b){var y=_[b],x={onerror:null,onsuccess:null};if(p.type==="delete")s.fire.call(x,g,y,d);else if(p.type==="add"||y===void 0){var S=c.fire.call(x,g,p.values[b],d);g==null&&S!=null&&(g=S,p.keys[b]=g,r.outbound||Z(p.values[b],r.keyPath,g))}else{var E=qn(y,p.values[b]),k=l.fire.call(x,E,g,y,d);if(k){var T=p.values[b];Object.keys(k).forEach(function(I){Q(T,I)?T[I]=k[I]:Z(T,I,k[I])})}}return x});return n.mutate(p).then(function(g){for(var b=g.failures,y=g.results,x=g.numFailures,S=g.lastResult,E=0;E<v.length;++E){var k=y?y[E]:v[E],T=w[E];k==null?T.onerror&&T.onerror(b[E]):T.onsuccess&&T.onsuccess(p.type==="put"&&_[E]?p.values[E]:k)}return{failures:b,results:y,numFailures:x,lastResult:S}}).catch(function(g){return w.forEach(function(b){return b.onerror&&b.onerror(g)}),Promise.reject(g)})})}function h(p){return m(p.trans,p.range,1e4)}function m(p,d,v){return n.query({trans:p,values:!1,query:{index:r,range:d},limit:v}).then(function(_){var w=_.result;return f({type:"delete",keys:w,trans:p}).then(function(g){return g.numFailures>0?Promise.reject(g.failures[0]):w.length<v?{failures:[],numFailures:0,lastResult:void 0}:m(p,P(P({},d),{lower:w[w.length-1],lowerOpen:!0}),v)})})}}});return i}})}};function mo(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function ci(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)z(t.keys[i],e[a])===0&&(r.push(n?st(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var go={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return P(P({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=ci(r.keys,r.trans._cache,r.cache==="clone");return i?A.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?st(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},en;function Jn(e){return!("from"in e)}var ae=function(e,t){if(this)H(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new ae;return e&&"d"in e&&H(n,e),n}};Be(ae.prototype,(en={add:function(e){return jt(this,e),this},addKey:function(e){return rt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return rt(t,n,n)}),this}},en[cn]=function(){return Rn(this)},en));function rt(e,t,n){var r=z(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(Jn(e))return H(e,{from:t,to:n,d:1});var i=e.l,a=e.r;if(z(n,e.from)<0)return i?rt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},dr(e);if(z(t,e.to)>0)return a?rt(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},dr(e);z(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),z(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var o=!e.r;i&&!e.l&&jt(e,i),a&&o&&jt(e,a)}}function jt(e,t){function n(r,i){var a=i.from,o=i.to,u=i.l,s=i.r;rt(r,a,o),u&&n(r,u),s&&n(r,s)}Jn(t)||n(e,t)}function _o(e,t){var n=Rn(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=Rn(e),o=a.next(i.from),u=o.value;!r.done&&!o.done;){if(z(u.from,i.to)<=0&&z(u.to,i.from)>=0)return!0;z(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(o=a.next(i.from)).value}return!1}function Rn(e){var t=Jn(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&z(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||z(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function dr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",o=P({},e),u=e[i];e.from=u.from,e.to=u.to,e[i]=u[i],o[i]=u[a],e[a]=o,o.d=pr(o)}e.d=pr(e)}function pr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var bo={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new ae(e.MIN_KEY,e.MAX_KEY);return P(P({},e),{table:function(r){var i=e.table(r),a=i.schema,o=a.primaryKey,u=o.extractKey,s=o.outbound,c=P(P({},i),{mutate:function(h){var m=h.trans,p=m.mutatedParts||(m.mutatedParts={}),d=function(S){var E="idb://"+t+"/"+r+"/"+S;return p[E]||(p[E]=new ae)},v=d(""),_=d(":dels"),w=h.type,g=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],b=g[0],y=g[1],x=h.trans._cache;return i.mutate(h).then(function(S){if(V(b)){w!=="delete"&&(b=S.results),v.addKeys(b);var E=ci(b,x);!E&&w!=="add"&&_.addKeys(b),(E||y)&&wo(d,a,E,y)}else if(b){var k={from:b.lower,to:b.upper};_.add(k),v.add(k)}else v.add(n),_.add(n),a.indexes.forEach(function(T){return d(T.name).add(n)});return S})}}),l=function(h){var m,p,d=h.query,v=d.index,_=d.range;return[v,new ae((m=_.lower)!==null&&m!==void 0?m:e.MIN_KEY,(p=_.upper)!==null&&p!==void 0?p:e.MAX_KEY)]},f={get:function(h){return[o,new ae(h.key)]},getMany:function(h){return[o,new ae().addKeys(h.keys)]},count:l,query:l,openCursor:l};return L(f).forEach(function(h){c[h]=function(m){var p=C.subscr;if(p){var d=function(x){var S="idb://"+t+"/"+r+"/"+x;return p[S]||(p[S]=new ae)},v=d(""),_=d(":dels"),w=f[h](m),g=w[0],b=w[1];if(d(g.name||"").add(b),!g.isPrimaryKey)if(h==="count")_.add(n);else{var y=h==="query"&&s&&m.values&&i.query(P(P({},m),{values:!1}));return i[h].apply(this,arguments).then(function(x){if(h==="query"){if(s&&m.values)return y.then(function(T){var I=T.result;return v.addKeys(I),x});var S=m.values?x.result.map(u):x.result;m.values?v.addKeys(S):_.addKeys(S)}else if(h==="openCursor"){var E=x,k=m.values;return E&&Object.create(E,{key:{get:function(){return _.addKey(E.primaryKey),E.key}},primaryKey:{get:function(){var T=E.primaryKey;return _.addKey(T),T}},value:{get:function(){return k&&v.addKey(E.primaryKey),E.value}}})}return x})}}return i[h].apply(this,arguments)}}),c}})}};function wo(e,t,n,r){function i(a){var o=e(a.name||"");function u(c){return c!=null?a.extractKey(c):null}var s=function(c){return a.multiEntry&&V(c)?c.forEach(function(l){return o.addKey(l)}):o.addKey(c)};(n||r).forEach(function(c,l){var f=n&&u(n[l]),h=r&&u(r[l]);z(f,h)!==0&&(f!=null&&s(f),h!=null&&s(h))})}t.indexes.forEach(i)}var li=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=P({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:B,dbReadyPromise:null,cancelOpen:B,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new A(function(u){o.dbReadyResolve=u}),o.openCanceller=new A(function(u,s){o.cancelOpen=s}),this._state=o,this.name=t,this.on=ht(this,"populate","blocked","versionchange","close",{ready:[Un,B]}),this.on.ready.subscribe=Br(this.on.ready.subscribe,function(u){return function(s,c){e.vip(function(){var l=r._state;if(l.openComplete)l.dbOpenError||A.resolve().then(s),c&&u(s);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(s),c&&u(s);else{u(s);var f=r;c||u(function h(){f.on.ready.unsubscribe(s),f.on.ready.unsubscribe(h)})}})}}),this.Collection=Ba(this),this.Table=Ka(this),this.Transaction=Va(this),this.Version=ao(this),this.WhereClause=Ua(this),this.on("versionchange",function(u){u.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(u){!u.newVersion||u.newVersion<u.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+u.oldVersion/10)}),this._maxKey=nt(n.IDBKeyRange),this._createTransaction=function(u,s,c,l){return new r.Transaction(u,s,c,r._options.chromeTransactionDurability,l)},this._fireOnBlocked=function(u){r.on("blocked").fire(u),Ye.filter(function(s){return s.name===r.name&&s!==r&&!s._state.vcFired}).map(function(s){return s.on("versionchange").fire(u)})},this.use(po),this.use(yo),this.use(bo),this.use(go),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach(function(u){return u(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new R.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new R.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(Qa),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||C.letThrough||this._vip)?t():new A(function(r,i){if(n._state.openComplete)return i(new R.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new R.DatabaseClosed);return}n.open().catch(B)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,a=t.name;a&&this.unuse({stack:n,name:a});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:i==null?10:i,name:a}),o.sort(function(u,s){return u.level-s.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},e.prototype.open=function(){return lo(this)},e.prototype._close=function(){var t=this._state,n=Ye.indexOf(this);if(n>=0&&Ye.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new A(function(r){t.dbReadyResolve=r}),t.openCanceller=new A(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new R.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new A(function(i,a){var o=function(){t.close();var u=t._deps.indexedDB.deleteDatabase(t.name);u.onsuccess=F(function(){so(t._deps,t.name),i()}),u.onerror=ne(a),u.onblocked=t._fireOnBlocked};if(n)throw new R.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return L(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=fo.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,a=C.trans;(!a||a.db!==this||t.indexOf("!")!==-1)&&(a=null);var o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var u,s;try{if(s=n.map(function(l){var f=l instanceof i.Table?l.name:l;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===Xt)u=Xt;else if(t=="rw"||t==Qt)u=Qt;else throw new R.InvalidArgument("Invalid transaction mode: "+t);if(a){if(a.mode===Xt&&u===Qt)if(o)a=null;else throw new R.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&s.forEach(function(l){if(a&&a.storeNames.indexOf(l)===-1)if(o)a=null;else throw new R.SubTransaction("Table "+l+" not included in parent transaction.")}),o&&a&&!a.active&&(a=null)}}catch(l){return a?a._promise(null,function(f,h){h(l)}):N(l)}var c=si.bind(null,this,u,s,a,r);return a?a._promise(u,c,"lock"):C.trans?Ne(C.transless,function(){return i._whenReady(c)}):this._whenReady(c)},e.prototype.table=function(t){if(!Q(this._allTables,t))throw new R.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),xo=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Eo=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[xo]=function(){return this},e}();function fi(e,t){return L(t).forEach(function(n){var r=e[n]||(e[n]=new ae);jt(r,t[n])}),e}function Ao(e){return new Eo(function(t){var n=Ln(e);function r(m){n&&je();var p=function(){return _e(e,{subscr:m,trans:null})},d=C.trans?Ne(C.transless,p):p();return n&&d.then(he,he),d}var i=!1,a={},o={},u={get closed(){return i},unsubscribe:function(){i=!0,we.storagemutated.unsubscribe(f)}};t.start&&t.start(u);var s=!1,c=!1;function l(){return L(o).some(function(m){return a[m]&&_o(a[m],o[m])})}var f=function(m){fi(a,m),l()&&h()},h=function(){if(!(s||i)){a={};var m={},p=r(m);c||(we(tt,f),c=!0),s=!0,Promise.resolve(p).then(function(d){s=!1,!i&&(l()?h():(a={},o=m,t.next&&t.next(d)))},function(d){s=!1,t.error&&t.error(d),u.unsubscribe()})}};return h(),u})}var Tn;try{Tn={indexedDB:M.indexedDB||M.mozIndexedDB||M.webkitIndexedDB||M.msIndexedDB,IDBKeyRange:M.IDBKeyRange||M.webkitIDBKeyRange}}catch{Tn={indexedDB:null,IDBKeyRange:null}}var xe=li;Be(xe,P(P({},zt),{delete:function(e){var t=new xe(e,{addons:[]});return t.delete()},exists:function(e){return new xe(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return oo(xe.dependencies).then(e)}catch{return N(new R.MissingAPI)}},defineClass:function(){function e(t){H(this,t)}return e},ignoreTransaction:function(e){return C.trans?Ne(C.transless,e):e()},vip:Sn,async:function(e){return function(){try{var t=kn(e.apply(this,arguments));return!t||typeof t.then!="function"?A.resolve(t):t}catch(n){return N(n)}}},spawn:function(e,t,n){try{var r=kn(e.apply(n,t||[]));return!r||typeof r.then!="function"?A.resolve(r):r}catch(i){return N(i)}},currentTransaction:{get:function(){return C.trans||null}},waitFor:function(e,t){var n=A.resolve(typeof e=="function"?xe.ignoreTransaction(e):e).timeout(t||6e4);return C.trans?C.trans.waitFor(n):n},Promise:A,debug:{get:function(){return re},set:function(e){Ur(e,e==="dexie"?function(){return!0}:ti)}},derive:Fe,extend:H,props:Be,override:Br,Events:ht,on:we,liveQuery:Ao,extendObservabilitySet:fi,getByKeyPath:le,setByKeyPath:Z,delByKeyPath:ta,shallowClone:Lr,deepClone:st,getObjectDiff:qn,cmp:z,asap:Mr,minKey:bn,addons:[],connections:Ye,errnames:Nn,dependencies:Tn,semVer:ur,version:ur.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));xe.maxKey=nt(xe.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(we(tt,function(e){if(!se){var t;Ht?(t=document.createEvent("CustomEvent"),t.initCustomEvent(ge,!0,!0,e)):t=new CustomEvent(ge,{detail:e}),se=!0,dispatchEvent(t),se=!1}}),addEventListener(ge,function(e){var t=e.detail;se||Nt(t)}));function Nt(e){var t=se;try{se=!0,we.storagemutated.fire(e)}finally{se=t}}var se=!1;if(typeof BroadcastChannel!="undefined"){var vr=new BroadcastChannel(ge);we(tt,function(e){se||vr.postMessage(e)}),vr.onmessage=function(e){e.data&&Nt(e.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){we(tt,function(e){try{se||(typeof localStorage!="undefined"&&localStorage.setItem(ge,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&on([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:ge,changedParts:e})}))}catch{}}),addEventListener("storage",function(e){if(e.key===ge){var t=JSON.parse(e.newValue);t&&Nt(t.changedParts)}});var yr=self.document&&navigator.serviceWorker;yr&&yr.addEventListener("message",Co)}function Co(e){var t=e.data;t&&t.type===ge&&Nt(t.changedParts)}A.rejectionMapper=la;Ur(re,ti);function Yo(e,{delay:t=0,duration:n=400,easing:r=Kn}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:a=>`opacity: ${a*i}`}}export{Ko as A,Ro as B,Oo as C,li as D,zo as E,Ii as F,Oi as G,Ki as H,Pi as I,Xi as J,Wo as S,Io as a,Mo as b,Po as c,yi as d,bi as e,_i as f,Lo as g,$o as h,Ho as i,kr as j,Di as k,Bo as l,Ar as m,it as n,Fo as o,Qe as p,No as q,Me as r,So as s,jo as t,Vo as u,Uo as v,Do as w,Yo as x,ko as y,To as z};
