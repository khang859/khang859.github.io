function st(){}const On=e=>e;function Ei(e,t){for(const n in t)e[n]=t[n];return e}function xi(e){return e&&typeof e=="object"&&typeof e.then=="function"}function Sr(e){return e()}function sr(){return Object.create(null)}function je(e){e.forEach(Sr)}function Bn(e){return typeof e=="function"}function $u(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ki(e){return Object.keys(e).length===0}function Nu(e,t,n,r){if(e){const i=Cr(e,t,n,r);return e[0](i)}}function Cr(e,t,n,r){return e[1]&&r?Ei(n.ctx.slice(),e[1](r(t))):n.ctx}function ju(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const u=[],o=Math.max(t.dirty.length,i.length);for(let s=0;s<o;s+=1)u[s]=t.dirty[s]|i[s];return u}return t.dirty|i}return t.dirty}function Hu(e,t,n,r,i,u){if(i){const o=Cr(t,n,r,u);e.p(o,i)}}function Uu(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}const Tr=typeof window!="undefined";let Rr=Tr?()=>window.performance.now():()=>Date.now(),Mn=Tr?e=>requestAnimationFrame(e):st;const Fe=new Set;function Kr(e){Fe.forEach(t=>{t.c(e)||(Fe.delete(t),t.f())}),Fe.size!==0&&Mn(Kr)}function Pr(e){let t;return Fe.size===0&&Mn(Kr),{promise:new Promise(n=>{Fe.add(t={c:e,f:n})}),abort(){Fe.delete(t)}}}function Ai(e,t){e.appendChild(t)}function Ir(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Si(e){const t=Ri("style");return Ci(Ir(e),t),t.sheet}function Ci(e,t){Ai(e.head||e,t)}function zu(e,t,n){e.insertBefore(t,n||null)}function Ti(e){e.parentNode.removeChild(e)}function Vu(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Ri(e){return document.createElement(e)}function Dr(e){return document.createTextNode(e)}function Wu(){return Dr(" ")}function Gu(){return Dr("")}function Yu(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function qu(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ki(e){return Array.from(e.childNodes)}function Xu(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Qu(e,t){e.value=t==null?"":t}function Ju(e,t,n){e.classList[n?"add":"remove"](t)}function Pi(e,t,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}const Dt=new Map;let Ot=0;function Ii(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Di(e,t){const n={stylesheet:Si(t),rules:{}};return Dt.set(e,n),n}function Or(e,t,n,r,i,u,o,s=0){const l=16.666/r;let y=`{
`;for(let A=0;A<=1;A+=l){const v=t+(n-t)*u(A);y+=A*100+`%{${o(v,1-v)}}
`}const m=y+`100% {${o(n,1-n)}}
}`,_=`__svelte_${Ii(m)}_${s}`,b=Ir(e),{stylesheet:S,rules:E}=Dt.get(b)||Di(b,e);E[_]||(E[_]=!0,S.insertRule(`@keyframes ${_} ${m}`,S.cssRules.length));const x=e.style.animation||"";return e.style.animation=`${x?`${x}, `:""}${_} ${r}ms linear ${i}ms 1 both`,Ot+=1,_}function un(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?u=>u.indexOf(t)<0:u=>u.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),Ot-=i,Ot||Oi())}function Oi(){Mn(()=>{Ot||(Dt.forEach(e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}}),Dt.clear())})}let Ze;function he(e){Ze=e}function Bi(){if(!Ze)throw new Error("Function called outside component initialization");return Ze}const Ge=[],cr=[],At=[],lr=[],Mi=Promise.resolve();let on=!1;function Fi(){on||(on=!0,Mi.then(Fn))}function et(e){At.push(e)}const Qt=new Set;let _t=0;function Fn(){const e=Ze;do{for(;_t<Ge.length;){const t=Ge[_t];_t++,he(t),Li(t.$$)}for(he(null),Ge.length=0,_t=0;cr.length;)cr.pop()();for(let t=0;t<At.length;t+=1){const n=At[t];Qt.has(n)||(Qt.add(n),n())}At.length=0}while(Ge.length);for(;lr.length;)lr.pop()();on=!1,Qt.clear(),he(e)}function Li(e){if(e.fragment!==null){e.update(),je(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(et)}}let We;function Br(){return We||(We=Promise.resolve(),We.then(()=>{We=null})),We}function Bt(e,t,n){e.dispatchEvent(Pi(`${t?"intro":"outro"}${n}`))}const St=new Set;let we;function $i(){we={r:0,c:[],p:we}}function Ni(){we.r||je(we.c),we=we.p}function Mr(e,t){e&&e.i&&(St.delete(e),e.i(t))}function ji(e,t,n,r){if(e&&e.o){if(St.has(e))return;St.add(e),we.c.push(()=>{St.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const Fr={duration:0};function Zu(e,t,n){let r=t(e,n),i=!1,u,o,s=0;function l(){u&&un(e,u)}function y(){const{delay:_=0,duration:b=300,easing:S=On,tick:E=st,css:x}=r||Fr;x&&(u=Or(e,0,1,b,_,S,x,s++)),E(0,1);const A=Rr()+_,v=A+b;o&&o.abort(),i=!0,et(()=>Bt(e,!0,"start")),o=Pr(c=>{if(i){if(c>=v)return E(1,0),Bt(e,!0,"end"),l(),i=!1;if(c>=A){const h=S((c-A)/b);E(h,1-h)}}return i})}let m=!1;return{start(){m||(m=!0,un(e),Bn(r)?(r=r(),Br().then(y)):y())},invalidate(){m=!1},end(){i&&(l(),i=!1)}}}function eo(e,t,n){let r=t(e,n),i=!0,u;const o=we;o.r+=1;function s(){const{delay:l=0,duration:y=300,easing:m=On,tick:_=st,css:b}=r||Fr;b&&(u=Or(e,1,0,y,l,m,b));const S=Rr()+l,E=S+y;et(()=>Bt(e,!1,"start")),Pr(x=>{if(i){if(x>=E)return _(0,1),Bt(e,!1,"end"),--o.r||je(o.c),!1;if(x>=S){const A=m((x-S)/y);_(1-A,A)}}return i})}return Bn(r)?Br().then(()=>{r=r(),s()}):s(),{end(l){l&&r.tick&&r.tick(1,0),i&&(u&&un(e,u),i=!1)}}}function to(e,t){const n=t.token={};function r(i,u,o,s){if(t.token!==n)return;t.resolved=s;let l=t.ctx;o!==void 0&&(l=l.slice(),l[o]=s);const y=i&&(t.current=i)(l);let m=!1;t.block&&(t.blocks?t.blocks.forEach((_,b)=>{b!==u&&_&&($i(),ji(_,1,1,()=>{t.blocks[b]===_&&(t.blocks[b]=null)}),Ni())}):t.block.d(1),y.c(),Mr(y,1),y.m(t.mount(),t.anchor),m=!0),t.block=y,t.blocks&&(t.blocks[u]=y),m&&Fn()}if(xi(e)){const i=Bi();if(e.then(u=>{he(i),r(t.then,1,t.value,u),he(null)},u=>{if(he(i),r(t.catch,2,t.error,u),he(null),!t.hasCatch)throw u}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function no(e,t,n){const r=t.slice(),{resolved:i}=e;e.current===e.then&&(r[e.value]=i),e.current===e.catch&&(r[e.error]=i),e.block.p(r,n)}function ro(e){e&&e.c()}function Hi(e,t,n,r){const{fragment:i,on_mount:u,on_destroy:o,after_update:s}=e.$$;i&&i.m(t,n),r||et(()=>{const l=u.map(Sr).filter(Bn);o?o.push(...l):je(l),e.$$.on_mount=[]}),s.forEach(et)}function Ui(e,t){const n=e.$$;n.fragment!==null&&(je(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function zi(e,t){e.$$.dirty[0]===-1&&(Ge.push(e),Fi(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function io(e,t,n,r,i,u,o,s=[-1]){const l=Ze;he(e);const y=e.$$={fragment:null,ctx:null,props:u,update:st,not_equal:i,bound:sr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:sr(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};o&&o(y.root);let m=!1;if(y.ctx=n?n(e,t.props||{},(_,b,...S)=>{const E=S.length?S[0]:b;return y.ctx&&i(y.ctx[_],y.ctx[_]=E)&&(!y.skip_bound&&y.bound[_]&&y.bound[_](E),m&&zi(e,_)),b}):[],y.update(),m=!0,je(y.before_update),y.fragment=r?r(y.ctx):!1,t.target){if(t.hydrate){const _=Ki(t.target);y.fragment&&y.fragment.l(_),_.forEach(Ti)}else y.fragment&&y.fragment.c();t.intro&&Mr(e.$$.fragment),Hi(e,t.target,t.anchor,t.customElement),Fn()}he(l)}class ao{$destroy(){Ui(this,1),this.$destroy=st}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!ki(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var sn=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},ct=jr,Vi=Ln,Wi=Xi,Gi=Lr,Yi=Nr,qi=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Ln(e){for(var t=[],n=0,r=0,i="",u;(u=qi.exec(e))!=null;){var o=u[0],s=u[1],l=u.index;if(i+=e.slice(r,l),r=l+o.length,s){i+=s[1];continue}i&&(t.push(i),i="");var y=u[2],m=u[3],_=u[4],b=u[5],S=u[6],E=u[7],x=S==="+"||S==="*",A=S==="?"||S==="*",v=y||"/",c=_||b||(E?".*":"[^"+v+"]+?");t.push({name:m||n++,prefix:y||"",delimiter:v,optional:A,repeat:x,pattern:Qi(c)})}return r<e.length&&(i+=e.substr(r)),i&&t.push(i),t}function Xi(e){return Lr(Ln(e))}function Lr(e){for(var t=new Array(e.length),n=0;n<e.length;n++)typeof e[n]=="object"&&(t[n]=new RegExp("^"+e[n].pattern+"$"));return function(r){for(var i="",u=r||{},o=0;o<e.length;o++){var s=e[o];if(typeof s=="string"){i+=s;continue}var l=u[s.name],y;if(l==null){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to be defined')}if(sn(l)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but received "'+l+'"');if(l.length===0){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var m=0;m<l.length;m++){if(y=encodeURIComponent(l[m]),!t[o].test(y))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but received "'+y+'"');i+=(m===0?s.prefix:s.delimiter)+y}continue}if(y=encodeURIComponent(l),!t[o].test(y))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but received "'+y+'"');i+=s.prefix+y}return i}}function fr(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function Qi(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function $n(e,t){return e.keys=t,e}function $r(e){return e.sensitive?"":"i"}function Ji(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return $n(e,t)}function Zi(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(jr(e[i],t,n).source);var u=new RegExp("(?:"+r.join("|")+")",$r(n));return $n(u,t)}function ea(e,t,n){for(var r=Ln(e),i=Nr(r,n),u=0;u<r.length;u++)typeof r[u]!="string"&&t.push(r[u]);return $n(i,t)}function Nr(e,t){t=t||{};for(var n=t.strict,r=t.end!==!1,i="",u=e[e.length-1],o=typeof u=="string"&&/\/$/.test(u),s=0;s<e.length;s++){var l=e[s];if(typeof l=="string")i+=fr(l);else{var y=fr(l.prefix),m=l.pattern;l.repeat&&(m+="(?:"+y+m+")*"),l.optional?y?m="(?:"+y+"("+m+"))?":m="("+m+")?":m=y+"("+m+")",i+=m}}return n||(i=(o?i.slice(0,-2):i)+"(?:\\/(?=$))?"),r?i+="$":i+=n&&o?"":"(?=\\/|$)",new RegExp("^"+i,$r(t))}function jr(e,t,n){return t=t||[],sn(t)?n||(n={}):(n=t,t=[]),e instanceof RegExp?Ji(e,t):sn(e)?Zi(e,t,n):ea(e,t,n)}ct.parse=Vi;ct.compile=Wi;ct.tokensToFunction=Gi;ct.tokensToRegExp=Yi;var $e=typeof document!="undefined",re=typeof window!="undefined",Vt=typeof history!="undefined",ta=typeof process!="undefined",cn=$e&&document.ontouchstart?"touchstart":"click",pe=re&&!!(window.history.location||window.location);function U(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}U.prototype.configure=function(e){var t=e||{};this._window=t.window||re&&window,this._decodeURLComponents=t.decodeURLComponents!==!1,this._popstate=t.popstate!==!1&&re,this._click=t.click!==!1&&$e,this._hashbang=!!t.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):re&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener(cn,this.clickHandler,!1):$e&&n.document.removeEventListener(cn,this.clickHandler,!1),this._hashbang&&re&&!Vt?n.addEventListener("hashchange",this._onpopstate,!1):re&&n.removeEventListener("hashchange",this._onpopstate,!1)};U.prototype.base=function(e){if(arguments.length===0)return this._base;this._base=e};U.prototype._getBase=function(){var e=this._base;if(e)return e;var t=re&&this._window&&this._window.location;return re&&this._hashbang&&t&&t.protocol==="file:"&&(e=t.pathname),e};U.prototype.strict=function(e){if(arguments.length===0)return this._strict;this._strict=e};U.prototype.start=function(e){var t=e||{};if(this.configure(t),t.dispatch!==!1){this._running=!0;var n;if(pe){var r=this._window,i=r.location;this._hashbang&&~i.hash.indexOf("#!")?n=i.hash.substr(2)+i.search:this._hashbang?n=i.search+i.hash:n=i.pathname+i.search+i.hash}this.replace(n,null,!0,t.dispatch)}};U.prototype.stop=function(){if(!!this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(cn,this.clickHandler,!1),re&&e.removeEventListener("popstate",this._onpopstate,!1),re&&e.removeEventListener("hashchange",this._onpopstate,!1)}};U.prototype.show=function(e,t,n,r){var i=new lt(e,t,this),u=this.prevContext;return this.prevContext=i,this.current=i.path,n!==!1&&this.dispatch(i,u),i.handled!==!1&&r!==!1&&i.pushState(),i};U.prototype.back=function(e,t){var n=this;if(this.len>0){var r=this._window;Vt&&r.history.back(),this.len--}else setTimeout(e?function(){n.show(e,t)}:function(){n.show(n._getBase(),t)})};U.prototype.redirect=function(e,t){var n=this;typeof e=="string"&&typeof t=="string"&&Wt.call(this,e,function(r){setTimeout(function(){n.replace(t)},0)}),typeof e=="string"&&typeof t=="undefined"&&setTimeout(function(){n.replace(e)},0)};U.prototype.replace=function(e,t,n,r){var i=new lt(e,t,this),u=this.prevContext;return this.prevContext=i,this.current=i.path,i.init=n,i.save(),r!==!1&&this.dispatch(i,u),i};U.prototype.dispatch=function(e,t){var n=0,r=0,i=this;function u(){var s=i.exits[r++];if(!s)return o();s(t,u)}function o(){var s=i.callbacks[n++];if(e.path!==i.current){e.handled=!1;return}if(!s)return na.call(i,e);s(e,o)}t?u():o()};U.prototype.exit=function(e,t){if(typeof e=="function")return this.exit("*",e);for(var n=new ft(e,null,this),r=1;r<arguments.length;++r)this.exits.push(n.middleware(arguments[r]))};U.prototype.clickHandler=function(e){if(this._which(e)===1&&!(e.metaKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented){var t=e.target,n=e.path||(e.composedPath?e.composedPath():null);if(n){for(var r=0;r<n.length;r++)if(!!n[r].nodeName&&n[r].nodeName.toUpperCase()==="A"&&!!n[r].href){t=n[r];break}}for(;t&&t.nodeName.toUpperCase()!=="A";)t=t.parentNode;if(!(!t||t.nodeName.toUpperCase()!=="A")){var i=typeof t.href=="object"&&t.href.constructor.name==="SVGAnimatedString";if(!(t.hasAttribute("download")||t.getAttribute("rel")==="external")){var u=t.getAttribute("href");if(!(!this._hashbang&&this._samePath(t)&&(t.hash||u==="#"))&&!(u&&u.indexOf("mailto:")>-1)&&!(i?t.target.baseVal:t.target)&&!(!i&&!this.sameOrigin(t.href))){var o=i?t.href.baseVal:t.pathname+t.search+(t.hash||"");o=o[0]!=="/"?"/"+o:o,ta&&o.match(/^\/[a-zA-Z]:\//)&&(o=o.replace(/^\/[a-zA-Z]:\//,"/"));var s=o,l=this._getBase();o.indexOf(l)===0&&(o=o.substr(l.length)),this._hashbang&&(o=o.replace("#!","")),!(l&&s===o&&(!pe||this._window.location.protocol!=="file:"))&&(e.preventDefault(),this.show(s))}}}}};U.prototype._onpopstate=function(){var e=!1;return re?($e&&document.readyState==="complete"?e=!0:window.addEventListener("load",function(){setTimeout(function(){e=!0},0)}),function(n){if(!!e){var r=this;if(n.state){var i=n.state.path;r.replace(i,n.state)}else if(pe){var u=r._window.location;r.show(u.pathname+u.search+u.hash,void 0,void 0,!1)}}}):function(){}}();U.prototype._which=function(e){return e=e||re&&this._window.event,e.which==null?e.button:e.which};U.prototype._toURL=function(e){var t=this._window;if(typeof URL=="function"&&pe)return new URL(e,t.location.toString());if($e){var n=t.document.createElement("a");return n.href=e,n}};U.prototype.sameOrigin=function(e){if(!e||!pe)return!1;var t=this._toURL(e),n=this._window,r=n.location;return r.protocol===t.protocol&&r.hostname===t.hostname&&(r.port===t.port||r.port===""&&(t.port==80||t.port==443))};U.prototype._samePath=function(e){if(!pe)return!1;var t=this._window,n=t.location;return e.pathname===n.pathname&&e.search===n.search};U.prototype._decodeURLEncodedURIComponent=function(e){return typeof e!="string"?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e};function Hr(){var e=new U;function t(){return Wt.apply(e,arguments)}return t.callbacks=e.callbacks,t.exits=e.exits,t.base=e.base.bind(e),t.strict=e.strict.bind(e),t.start=e.start.bind(e),t.stop=e.stop.bind(e),t.show=e.show.bind(e),t.back=e.back.bind(e),t.redirect=e.redirect.bind(e),t.replace=e.replace.bind(e),t.dispatch=e.dispatch.bind(e),t.exit=e.exit.bind(e),t.configure=e.configure.bind(e),t.sameOrigin=e.sameOrigin.bind(e),t.clickHandler=e.clickHandler.bind(e),t.create=Hr,Object.defineProperty(t,"len",{get:function(){return e.len},set:function(n){e.len=n}}),Object.defineProperty(t,"current",{get:function(){return e.current},set:function(n){e.current=n}}),t.Context=lt,t.Route=ft,t}function Wt(e,t){if(typeof e=="function")return Wt.call(this,"*",e);if(typeof t=="function")for(var n=new ft(e,null,this),r=1;r<arguments.length;++r)this.callbacks.push(n.middleware(arguments[r]));else typeof e=="string"?this[typeof t=="string"?"redirect":"show"](e,t):this.start(e)}function na(e){if(!e.handled){var t,n=this,r=n._window;n._hashbang?t=pe&&this._getBase()+r.location.hash.replace("#!",""):t=pe&&r.location.pathname+r.location.search,t!==e.canonicalPath&&(n.stop(),e.handled=!1,pe&&(r.location.href=e.canonicalPath))}}function ra(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function lt(e,t,n){var r=this.page=n||Wt,i=r._window,u=r._hashbang,o=r._getBase();e[0]==="/"&&e.indexOf(o)!==0&&(e=o+(u?"#!":"")+e);var s=e.indexOf("?");this.canonicalPath=e;var l=new RegExp("^"+ra(o));if(this.path=e.replace(l,"")||"/",u&&(this.path=this.path.replace("#!","")||"/"),this.title=$e&&i.document.title,this.state=t||{},this.state.path=e,this.querystring=~s?r._decodeURLEncodedURIComponent(e.slice(s+1)):"",this.pathname=r._decodeURLEncodedURIComponent(~s?e.slice(0,s):e),this.params={},this.hash="",!u){if(!~this.path.indexOf("#"))return;var y=this.path.split("#");this.path=this.pathname=y[0],this.hash=r._decodeURLEncodedURIComponent(y[1])||"",this.querystring=this.querystring.split("#")[0]}}lt.prototype.pushState=function(){var e=this.page,t=e._window,n=e._hashbang;e.len++,Vt&&t.history.pushState(this.state,this.title,n&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};lt.prototype.save=function(){var e=this.page;Vt&&e._window.history.replaceState(this.state,this.title,e._hashbang&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};function ft(e,t,n){var r=this.page=n||Nn,i=t||{};i.strict=i.strict||r._strict,this.path=e==="*"?"(.*)":e,this.method="GET",this.regexp=ct(this.path,this.keys=[],i)}ft.prototype.middleware=function(e){var t=this;return function(n,r){if(t.match(n.path,n.params))return n.routePath=t.path,e(n,r);r()}};ft.prototype.match=function(e,t){var n=this.keys,r=e.indexOf("?"),i=~r?e.slice(0,r):e,u=this.regexp.exec(decodeURIComponent(i));if(!u)return!1;delete t[0];for(var o=1,s=u.length;o<s;++o){var l=n[o-1],y=this.page._decodeURLEncodedURIComponent(u[o]);(y!==void 0||!hasOwnProperty.call(t,l.name))&&(t[l.name]=y)}return!0};var Nn=Hr(),ia=Nn,aa=Nn;ia.default=aa;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F=function(){return F=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},F.apply(this,arguments)};function ln(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,u;r<i;r++)(u||!(r in t))&&(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return e.concat(u||Array.prototype.slice.call(t))}var N=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,H=Object.keys,q=Array.isArray;typeof Promise!="undefined"&&!N.Promise&&(N.Promise=Promise);function Z(e,t){return typeof t!="object"||H(t).forEach(function(n){e[n]=t[n]}),e}var tt=Object.getPrototypeOf,ua={}.hasOwnProperty;function ie(e,t){return ua.call(e,t)}function Ne(e,t){typeof t=="function"&&(t=t(tt(e))),(typeof Reflect=="undefined"?H:Reflect.ownKeys)(t).forEach(function(n){ye(e,n,t[n])})}var Ur=Object.defineProperty;function ye(e,t,n,r){Ur(e,t,Z(n&&ie(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function He(e){return{from:function(t){return e.prototype=Object.create(t.prototype),ye(e.prototype,"constructor",e),{extend:Ne.bind(null,e.prototype)}}}}var oa=Object.getOwnPropertyDescriptor;function jn(e,t){var n=oa(e,t),r;return n||(r=tt(e))&&jn(r,t)}var sa=[].slice;function Gt(e,t,n){return sa.call(e,t,n)}function zr(e,t){return t(e)}function Ye(e){if(!e)throw new Error("Assertion Failed")}function Vr(e){N.setImmediate?setImmediate(e):setTimeout(e,0)}function Wr(e,t){return e.reduce(function(n,r,i){var u=t(r,i);return u&&(n[u[0]]=u[1]),n},{})}function ca(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function ve(e,t){if(ie(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var u=ve(e,t[r]);n.push(u)}return n}var o=t.indexOf(".");if(o!==-1){var s=e[t.substr(0,o)];return s===void 0?void 0:ve(s,t.substr(o+1))}}function ue(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Ye(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)ue(e,t[r],n[r])}else{var u=t.indexOf(".");if(u!==-1){var o=t.substr(0,u),s=t.substr(u+1);if(s==="")n===void 0?q(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var l=e[o];l||(l=e[o]={}),ue(l,s,n)}}else n===void 0?q(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function la(e,t){typeof t=="string"?ue(e,t,void 0):"length"in t&&[].map.call(t,function(n){ue(e,n,void 0)})}function Gr(e){var t={};for(var n in e)ie(e,n)&&(t[n]=e[n]);return t}var fa=[].concat;function Yr(e){return fa.apply([],e)}var qr="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Yr([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return N[e]}),ha=qr.map(function(e){return N[e]});Wr(qr,function(e){return[e,!0]});var be=null;function ht(e){be=typeof WeakMap!="undefined"&&new WeakMap;var t=fn(e);return be=null,t}function fn(e){if(!e||typeof e!="object")return e;var t=be&&be.get(e);if(t)return t;if(q(e)){t=[],be&&be.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(fn(e[n]))}else if(ha.indexOf(e.constructor)>=0)t=e;else{var i=tt(e);t=i===Object.prototype?{}:Object.create(i),be&&be.set(e,t);for(var u in e)ie(e,u)&&(t[u]=fn(e[u]))}return t}var da={}.toString;function hn(e){return da.call(e).slice(8,-1)}var dn=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",pa=typeof dn=="symbol"?function(e){var t;return e!=null&&(t=e[dn])&&t.apply(e)}:function(){return null},Me={};function fe(e){var t,n,r,i;if(arguments.length===1){if(q(e))return e.slice();if(this===Me&&typeof e=="string")return[e];if(i=pa(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Hn=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},se=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Xr(e,t){se=e,Qr=t}var Qr=function(){return!0},va=!new Error("").stack;function Ie(){if(va)try{throw Ie.arguments,new Error}catch(e){return e}return new Error}function pn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Qr).map(function(r){return`
`+r}).join("")):""}var ya=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Jr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Un=ya.concat(Jr),ga={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ue(e,t){this._e=Ie(),this.name=e,this.message=t}He(Ue).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+pn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Zr(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Mt(e,t,n,r){this._e=Ie(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Zr(e,t)}He(Mt).from(Ue);function Xe(e,t){this._e=Ie(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Zr(e,t)}He(Xe).from(Ue);var zn=Un.reduce(function(e,t){return e[t]=t+"Error",e},{}),ma=Ue,B=Un.reduce(function(e,t){var n=t+"Error";function r(i,u){this._e=Ie(),this.name=n,i?typeof i=="string"?(this.message=""+i+(u?`
 `+u:""),this.inner=u||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=ga[t]||n,this.inner=null)}return He(r).from(ma),e[t]=r,e},{});B.Syntax=SyntaxError;B.Type=TypeError;B.Range=RangeError;var hr=Jr.reduce(function(e,t){return e[t+"Error"]=B[t],e},{});function _a(e,t){if(!e||e instanceof Ue||e instanceof TypeError||e instanceof SyntaxError||!e.name||!hr[e.name])return e;var n=new hr[e.name](t||e.message,e);return"stack"in e&&ye(n,"stack",{get:function(){return this.inner.stack}}),n}var Yt=Un.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=B[t]),e},{});Yt.ModifyError=Mt;Yt.DexieError=Ue;Yt.BulkError=Xe;function $(){}function dt(e){return e}function ba(e,t){return e==null||e===dt?t:function(n){return t(e(n))}}function Ke(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function wa(e,t){return e===$?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ke(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ke(i,this.onerror):i),u!==void 0?u:n}}function Ea(e,t){return e===$?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ke(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ke(r,this.onerror):r)}}function xa(e,t){return e===$?t:function(n){var r=e.apply(this,arguments);Z(n,r);var i=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ke(i,this.onsuccess):i),u&&(this.onerror=this.onerror?Ke(u,this.onerror):u),r===void 0?o===void 0?void 0:o:Z(r,o)}}function ka(e,t){return e===$?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Vn(e,t){return e===$?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,u=new Array(i);i--;)u[i]=arguments[i];return n.then(function(){return t.apply(r,u)})}return t.apply(this,arguments)}}var nt={},Aa=100,Sa=20,ei=100,Wn=typeof Promise=="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,tt(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,tt(t),e]}(),vn=Wn[0],Ft=Wn[1],yn=Wn[2],ti=Ft&&Ft.then,Ct=vn&&vn.constructor,Gn=!!yn,gn=!1,Ca=yn?function(){yn.then(bt)}:N.setImmediate?setImmediate.bind(null,bt):N.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){bt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(bt,0)},rt=function(e,t){qe.push([e,t]),Lt&&(Ca(),Lt=!1)},mn=!0,Lt=!0,Te=[],Tt=[],_n=null,bn=dt,Le={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:vr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{vr(e[0],e[1])}catch{}})}},O=Le,qe=[],Re=0,Rt=[];function P(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=$,this._lib=!1;var t=this._PSD=O;if(se&&(this._stackHolder=Ie(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==nt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&En(this,this._value);return}this._state=null,this._value=null,++t.ref,ri(this,e)}var wn={get:function(){var e=O,t=$t;function n(r,i){var u=this,o=!e.global&&(e!==O||t!==$t),s=o&&!ge(),l=new P(function(y,m){Yn(u,new ni(jt(r,e,o,s),jt(i,e,o,s),y,m,e))});return se&&ui(l,this),l}return n.prototype=nt,n},set:function(e){ye(this,"then",e&&e.prototype===nt?wn:{get:function(){return e},set:wn.set})}};Ne(P.prototype,{then:wn,_then:function(e,t){Yn(this,new ni(null,null,e,t,O))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Kt(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Kt(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Kt(t)})},stack:{get:function(){if(this._stack)return this._stack;try{gn=!0;var e=ai(this,[],Sa),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{gn=!1}}},timeout:function(e,t){var n=this;return e<1/0?new P(function(r,i){var u=setTimeout(function(){return i(new B.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,u))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&ye(P.prototype,Symbol.toStringTag,"Dexie.Promise");Le.env=oi();function ni(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Ne(P,{all:function(){var e=fe.apply(null,arguments).map(Nt);return new P(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,u){return P.resolve(i).then(function(o){e[u]=o,--r||t(e)},n)})})},resolve:function(e){if(e instanceof P)return e;if(e&&typeof e.then=="function")return new P(function(n,r){e.then(n,r)});var t=new P(nt,!0,e);return ui(t,_n),t},reject:Kt,race:function(){var e=fe.apply(null,arguments).map(Nt);return new P(function(t,n){e.map(function(r){return P.resolve(r).then(t,n)})})},PSD:{get:function(){return O},set:function(e){return O=e}},totalEchoes:{get:function(){return $t}},newPSD:xe,usePSD:Ve,scheduler:{get:function(){return rt},set:function(e){rt=e}},rejectionMapper:{get:function(){return bn},set:function(e){bn=e}},follow:function(e,t){return new P(function(n,r){return xe(function(i,u){var o=O;o.unhandleds=[],o.onunhandled=u,o.finalize=Ke(function(){var s=this;Ra(function(){s.unhandleds.length===0?i():u(s.unhandleds[0])})},o.finalize),e()},t,n,r)})}});Ct&&(Ct.allSettled&&ye(P,"allSettled",function(){var e=fe.apply(null,arguments).map(Nt);return new P(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,u){return P.resolve(i).then(function(o){return r[u]={status:"fulfilled",value:o}},function(o){return r[u]={status:"rejected",reason:o}}).then(function(){return--n||t(r)})})})}),Ct.any&&typeof AggregateError!="undefined"&&ye(P,"any",function(){var e=fe.apply(null,arguments).map(Nt);return new P(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(u,o){return P.resolve(u).then(function(s){return t(s)},function(s){i[o]=s,--r||n(new AggregateError(i))})})})}));function ri(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&pt();n&&typeof n.then=="function"?ri(e,function(i,u){n instanceof P?n._then(i,u):n.then(i,u)}):(e._state=!0,e._value=n,ii(e)),r&&vt()}},En.bind(null,e))}catch(n){En(e,n)}}function En(e,t){if(Tt.push(t),e._state===null){var n=e._lib&&pt();t=bn(t),e._state=!1,e._value=t,se&&t!==null&&typeof t=="object"&&!t._promise&&ca(function(){var r=jn(t,"stack");t._promise=e,ye(t,"stack",{get:function(){return gn?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),Ka(e),ii(e),n&&vt()}}function ii(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Yn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Re===0&&(++Re,rt(function(){--Re===0&&qn()},[]))}function Yn(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Re,rt(Ta,[n,e,t])}function Ta(e,t,n){try{_n=t;var r,i=t._value;t._state?r=e(i):(Tt.length&&(Tt=[]),r=e(i),Tt.indexOf(i)===-1&&Pa(t)),n.resolve(r)}catch(u){n.reject(u)}finally{_n=null,--Re===0&&qn(),--n.psd.ref||n.psd.finalize()}}function ai(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,u,o;i!=null?(u=i.name||"Error",o=i.message||i,r=pn(i,0)):(u=i,o=""),t.push(u+(o?": "+o:"")+r)}return se&&(r=pn(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&ai(e._prev,t,n)),t}function ui(e,t){var n=t?t._numPrev+1:0;n<Aa&&(e._prev=t,e._numPrev=n)}function bt(){pt()&&vt()}function pt(){var e=mn;return mn=!1,Lt=!1,e}function vt(){var e,t,n;do for(;qe.length>0;)for(e=qe,qe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(qe.length>0);mn=!0,Lt=!0}function qn(){var e=Te;Te=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Rt.slice(0),n=t.length;n;)t[--n]()}function Ra(e){function t(){e(),Rt.splice(Rt.indexOf(t),1)}Rt.push(t),++Re,rt(function(){--Re===0&&qn()},[])}function Ka(e){Te.some(function(t){return t._value===e._value})||Te.push(e)}function Pa(e){for(var t=Te.length;t;)if(Te[--t]._value===e._value){Te.splice(t,1);return}}function Kt(e){return new P(nt,!1,e)}function j(e,t){var n=O;return function(){var r=pt(),i=O;try{return ke(n,!0),e.apply(this,arguments)}catch(u){t&&t(u)}finally{ke(i,!1),r&&vt()}}}var Y={awaits:0,echoes:0,id:0},Ia=0,Pt=[],Jt=0,$t=0,Da=0;function xe(e,t,n,r){var i=O,u=Object.create(i);u.parent=i,u.ref=0,u.global=!1,u.id=++Da;var o=Le.env;u.env=Gn?{Promise:P,PromiseProp:{value:P,configurable:!0,writable:!0},all:P.all,race:P.race,allSettled:P.allSettled,any:P.any,resolve:P.resolve,reject:P.reject,nthen:dr(o.nthen,u),gthen:dr(o.gthen,u)}:{},t&&Z(u,t),++i.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=Ve(u,e,n,r);return u.ref===0&&u.finalize(),s}function ze(){return Y.id||(Y.id=++Ia),++Y.awaits,Y.echoes+=ei,Y.id}function ge(){return Y.awaits?(--Y.awaits===0&&(Y.id=0),Y.echoes=Y.awaits*ei,!0):!1}(""+ti).indexOf("[native code]")===-1&&(ze=ge=$);function Nt(e){return Y.echoes&&e&&e.constructor===Ct?(ze(),e.then(function(t){return ge(),t},function(t){return ge(),V(t)})):e}function Oa(e){++$t,(!Y.echoes||--Y.echoes===0)&&(Y.echoes=Y.id=0),Pt.push(O),ke(e,!0)}function Ba(){var e=Pt[Pt.length-1];Pt.pop(),ke(e,!1)}function ke(e,t){var n=O;if((t?Y.echoes&&(!Jt++||e!==O):Jt&&(!--Jt||e!==O))&&si(t?Oa.bind(null,e):Ba),e!==O&&(O=e,n===Le&&(Le.env=oi()),Gn)){var r=Le.env.Promise,i=e.env;Ft.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(N,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function oi(){var e=N.Promise;return Gn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(N,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Ft.then,gthen:e.prototype.then}:{}}function Ve(e,t,n,r,i){var u=O;try{return ke(e,!0),t(n,r,i)}finally{ke(u,!1)}}function si(e){ti.call(vn,e)}function jt(e,t,n,r){return typeof e!="function"?e:function(){var i=O;n&&ze(),ke(t,!0);try{return e.apply(this,arguments)}finally{ke(i,!1),r&&si(ge)}}}function dr(e,t){return function(n,r){return e.call(this,jt(n,t),jt(r,t))}}var pr="unhandledrejection";function vr(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(N.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(pr,!0,!0),Z(r,i)):N.CustomEvent&&(r=new CustomEvent(pr,{detail:i}),Z(r,i)),r&&N.dispatchEvent&&(dispatchEvent(r),!N.PromiseRejectionEvent&&N.onunhandledrejection))try{N.onunhandledrejection(r)}catch{}se&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var V=P.reject;function xn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!O.letThrough&&!e._vip){if(e._state.openComplete)return V(new B.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return V(new B.DatabaseClosed);e.open().catch($)}return e._state.dbReadyPromise.then(function(){return xn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(u){return u.name===zn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return xn(e,t,n,r)})):V(u)}return i._promise(t,function(u,o){return xe(function(){return O.trans=i,r(u,o,i)})}).then(function(u){return i._completion.then(function(){return u})})}}var yr="3.2.1",Ce=String.fromCharCode(65535),kn=-1/0,ce="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ci="String expected.",Qe=[],qt=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ma=qt,Fa=qt,li=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Xt="__dbnames",Zt="readonly",en="readwrite";function Pe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var fi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function wt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=ht(t),delete t[e]),t}:function(t){return t}}var La=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||O.trans,u=this.name;function o(l,y,m){if(!m.schema[u])throw new B.NotFound("Table "+u+" not part of transaction");return n(m.idbtrans,m)}var s=pt();try{return i&&i.db===this.db?i===O.trans?i._promise(t,o,r):xe(function(){return i._promise(t,o,r)},{trans:i,transless:O.transless||O}):xn(this.db,t,[this.name],o)}finally{s&&vt()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(u){return r.hook.reading.fire(u)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(q(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=H(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(m){return m.compound&&n.every(function(_){return m.keyPath.indexOf(_)>=0})&&m.keyPath.every(function(_){return n.indexOf(_)>=0})})[0];if(r&&this.db._maxKey!==Ce)return this.where(r.name).equals(r.keyPath.map(function(m){return t[m]}));!r&&se&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,u=this.db._deps.indexedDB;function o(m,_){try{return u.cmp(m,_)===0}catch{return!1}}var s=n.reduce(function(m,_){var b=m[0],S=m[1],E=i[_],x=t[_];return[b||E,b||!E?Pe(S,E&&E.multi?function(A){var v=ve(A,_);return q(v)&&v.some(function(c){return o(x,c)})}:function(A){return o(x,ve(A,_))}):S]},[null,null]),l=s[0],y=s[1];return l?this.where(l.name).equals(t[l.keyPath]).filter(y):r?this.filter(y):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,q(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var u in r)if(ie(r,u))try{i[u]=r[u]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){Z(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,u=i.auto,o=i.keyPath,s=t;return o&&u&&(s=wt(o)(t)),this._trans("readwrite",function(l){return r.core.mutate({trans:l,type:"add",keys:n!=null?[n]:null,values:[s]})}).then(function(l){return l.numFailures?P.reject(l.failures[0]):l.lastResult}).then(function(l){if(o)try{ue(t,o,l)}catch{}return l})},e.prototype.update=function(t,n){if(typeof t=="object"&&!q(t)){var r=ve(t,this.schema.primKey.keyPath);if(r===void 0)return V(new B.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?H(n).forEach(function(i){ue(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,u=i.auto,o=i.keyPath,s=t;return o&&u&&(s=wt(o)(t)),this._trans("readwrite",function(l){return r.core.mutate({trans:l,type:"put",values:[s],keys:n!=null?[n]:null})}).then(function(l){return l.numFailures?P.reject(l.failures[0]):l.lastResult}).then(function(l){if(o)try{ue(t,o,l)}catch{}return l})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?P.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:fi})}).then(function(n){return n.numFailures?P.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(u){return n.hook.reading.fire(u)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,u=Array.isArray(n)?n:void 0;r=r||(u?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var l=i.schema.primKey,y=l.auto,m=l.keyPath;if(m&&u)throw new B.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(u&&u.length!==t.length)throw new B.InvalidArgument("Arguments objects and keys must have the same length");var _=t.length,b=m&&y?t.map(wt(m)):t;return i.core.mutate({trans:s,type:"add",keys:u,values:b,wantResults:o}).then(function(S){var E=S.numFailures,x=S.results,A=S.lastResult,v=S.failures,c=o?x:A;if(E===0)return c;throw new Xe(i.name+".bulkAdd(): "+E+" of "+_+" operations failed",v)})})},e.prototype.bulkPut=function(t,n,r){var i=this,u=Array.isArray(n)?n:void 0;r=r||(u?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var l=i.schema.primKey,y=l.auto,m=l.keyPath;if(m&&u)throw new B.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(u&&u.length!==t.length)throw new B.InvalidArgument("Arguments objects and keys must have the same length");var _=t.length,b=m&&y?t.map(wt(m)):t;return i.core.mutate({trans:s,type:"put",keys:u,values:b,wantResults:o}).then(function(S){var E=S.numFailures,x=S.results,A=S.lastResult,v=S.failures,c=o?x:A;if(E===0)return c;throw new Xe(i.name+".bulkPut(): "+E+" of "+_+" operations failed",v)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var u=i.numFailures,o=i.lastResult,s=i.failures;if(u===0)return o;throw new Xe(n.name+".bulkDelete(): "+u+" of "+r+" operations failed",s)})},e}();function yt(e){var t={},n=function(s,l){if(l){for(var y=arguments.length,m=new Array(y-1);--y;)m[y-1]=arguments[y];return t[s].subscribe.apply(null,m),e}else if(typeof s=="string")return t[s]};n.addEventType=u;for(var r=1,i=arguments.length;r<i;++r)u(arguments[r]);return n;function u(s,l,y){if(typeof s=="object")return o(s);l||(l=ka),y||(y=$);var m={subscribers:[],fire:y,subscribe:function(_){m.subscribers.indexOf(_)===-1&&(m.subscribers.push(_),m.fire=l(m.fire,_))},unsubscribe:function(_){m.subscribers=m.subscribers.filter(function(b){return b!==_}),m.fire=m.subscribers.reduce(l,y)}};return t[s]=n[s]=m,m}function o(s){H(s).forEach(function(l){var y=s[l];if(q(y))u(l,s[l][0],s[l][1]);else if(y==="asap")var m=u(l,dt,function(){for(var b=arguments.length,S=new Array(b);b--;)S[b]=arguments[b];m.subscribers.forEach(function(E){Vr(function(){E.apply(null,S)})})});else throw new B.InvalidArgument("Invalid event config")})}}function gt(e,t){return He(t).from({prototype:e}),t}function $a(e){return gt(La.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:yt(null,{creating:[wa,$],reading:[ba,dt],updating:[xa,$],deleting:[Ea,$]})})}function Oe(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function tn(e,t){e.filter=Pe(e.filter,t)}function nn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Pe(r(),t())}:t,e.justLimit=n&&!r}function Na(e,t){e.isMatch=Pe(e.isMatch,t)}function It(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new B.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function gr(e,t,n){var r=It(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Et(e,t,n,r){var i=e.replayFilter?Pe(e.filter,e.replayFilter()):e.filter;if(e.or){var u={},o=function(s,l,y){if(!i||i(l,y,function(b){return l.stop(b)},function(b){return l.fail(b)})){var m=l.primaryKey,_=""+m;_==="[object ArrayBuffer]"&&(_=""+new Uint8Array(m)),ie(u,_)||(u[_]=!0,t(s,l,y))}};return Promise.all([e.or._iterate(o,n),mr(gr(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}else return mr(gr(e,r,n),Pe(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function mr(e,t,n,r){var i=r?function(o,s,l){return n(r(o),s,l)}:n,u=j(i);return e.then(function(o){if(o)return o.start(function(){var s=function(){return o.continue()};(!t||t(o,function(l){return s=l},function(l){o.stop(l),s=$},function(l){o.fail(l),s=$}))&&u(o.value,o,function(l){return s=l}),s()})})}function J(e,t){try{var n=_r(e),r=_r(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Ha(br(e),br(t));case"Array":return ja(e,t)}}catch{}return NaN}function ja(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,u=0;u<i;++u){var o=J(e[u],t[u]);if(o!==0)return o}return n===r?0:n<r?-1:1}function Ha(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,u=0;u<i;++u)if(e[u]!==t[u])return e[u]<t[u]?-1:1;return n===r?0:n<r?-1:1}function _r(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=hn(e);return n==="ArrayBuffer"?"binary":n}function br(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Ua=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,V.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,V.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Pe(n.algorithm,t)},e.prototype._iterate=function(t,n){return Et(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&Z(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return Et(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,u=i.table.core;if(Oe(i,!0))return u.count({trans:r,query:{index:It(i,u.schema),range:i.range}}).then(function(s){return Math.min(s,i.limit)});var o=0;return Et(i,function(){return++o,!1},r,u).then(function(){return o})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],u=r.length-1;function o(y,m){return m?o(y[r[m]],m-1):y[i]}var s=this._ctx.dir==="next"?1:-1;function l(y,m){var _=o(y,u),b=o(m,u);return _<b?-s:_>b?s:0}return this.toArray(function(y){return y.sort(l)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Oe(i,!0)&&i.limit>0){var u=i.valueMapper,o=It(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(l){var y=l.result;return u?y.map(u):y})}else{var s=[];return Et(i,function(l){return s.push(l)},r,i.table.core).then(function(){return s})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,Oe(n)?nn(n,function(){var r=t;return function(i,u){return r===0?!0:r===1?(--r,!1):(u(function(){i.advance(r),r=0}),!1)}}):nn(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),nn(this._ctx,function(){var n=t;return function(r,i,u){return--n<=0&&i(u),n>=0}},!0),this},e.prototype.until=function(t,n){return tn(this._ctx,function(r,i,u){return t(r.value)?(i(u),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return tn(this._ctx,function(n){return t(n.value)}),Na(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,u){r.push(u.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&Oe(n,!0)&&n.limit>0)return this._read(function(i){var u=It(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:u,range:n.range}})}).then(function(i){var u=i.result;return u}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,u){r.push(u.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return tn(this._ctx,function(i){var u=i.primaryKey.toString(),o=ie(r,u);return r[u]=!0,!o}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var u;if(typeof t=="function")u=t;else{var o=H(t),s=o.length;u=function(v){for(var c=!1,h=0;h<s;++h){var d=o[h],f=t[d];ve(v,d)!==f&&(ue(v,d,f),c=!0)}return c}}var l=r.table.core,y=l.schema.primaryKey,m=y.outbound,_=y.extractKey,b=n.db._options.modifyChunkSize||200,S=[],E=0,x=[],A=function(v,c){var h=c.failures,d=c.numFailures;E+=v-d;for(var f=0,g=H(h);f<g.length;f++){var w=g[f];S.push(h[w])}};return n.clone().primaryKeys().then(function(v){var c=function(h){var d=Math.min(b,v.length-h);return l.getMany({trans:i,keys:v.slice(h,h+d),cache:"immutable"}).then(function(f){for(var g=[],w=[],k=m?[]:null,T=[],C=0;C<d;++C){var K=f[C],R={value:ht(K),primKey:v[h+C]};u.call(R,R.value,R)!==!1&&(R.value==null?T.push(v[h+C]):!m&&J(_(K),_(R.value))!==0?(T.push(v[h+C]),g.push(R.value)):(w.push(R.value),m&&k.push(v[h+C])))}var M=Oe(r)&&r.limit===1/0&&(typeof t!="function"||t===rn)&&{index:r.index,range:r.range};return Promise.resolve(g.length>0&&l.mutate({trans:i,type:"add",values:g}).then(function(D){for(var I in D.failures)T.splice(parseInt(I),1);A(g.length,D)})).then(function(){return(w.length>0||M&&typeof t=="object")&&l.mutate({trans:i,type:"put",keys:k,values:w,criteria:M,changeSpec:typeof t!="function"&&t}).then(function(D){return A(w.length,D)})}).then(function(){return(T.length>0||M&&t===rn)&&l.mutate({trans:i,type:"delete",keys:T,criteria:M}).then(function(D){return A(T.length,D)})}).then(function(){return v.length>h+d&&c(h+b)})})};return c(0).then(function(){if(S.length>0)throw new Mt("Error modifying one or more objects",S,E,x);return v.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return Oe(t)&&(t.isPrimKey&&!Fa||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,u=n;return t.table.core.count({trans:r,query:{index:i,range:u}}).then(function(o){return t.table.core.mutate({trans:r,type:"deleteRange",range:u}).then(function(s){var l=s.failures;s.lastResult,s.results;var y=s.numFailures;if(y)throw new Mt("Could not delete some values",Object.keys(l).map(function(m){return l[m]}),o-y);return o-y})})}):this.modify(rn)},e}(),rn=function(e,t){return t.value=null};function za(e){return gt(Ua.prototype,function(n,r){this.db=e;var i=fi,u=null;if(r)try{i=r()}catch(y){u=y}var o=n._ctx,s=o.table,l=s.hook.reading.fire;this._ctx={table:s,index:o.index,isPrimKey:!o.index||s.schema.primKey.keyPath&&o.index===s.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:o.or,valueMapper:l!==dt?l:null}})}function Va(e,t){return e<t?-1:e===t?0:1}function Wa(e,t){return e>t?-1:e===t?0:1}function te(e,t,n){var r=e instanceof di?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Be(e){return new e.Collection(e,function(){return hi("")}).limit(0)}function Ga(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Ya(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function qa(e,t,n,r,i,u){for(var o=Math.min(e.length,r.length),s=-1,l=0;l<o;++l){var y=t[l];if(y!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[l],y)<0&&(s=l)}return o<r.length&&u==="next"?e+n.substr(e.length):o<e.length&&u==="prev"?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function xt(e,t,n,r){var i,u,o,s,l,y,m,_=n.length;if(!n.every(function(x){return typeof x=="string"}))return te(e,ci);function b(x){i=Ga(x),u=Ya(x),o=x==="next"?Va:Wa;var A=n.map(function(v){return{lower:u(v),upper:i(v)}}).sort(function(v,c){return o(v.lower,c.lower)});s=A.map(function(v){return v.upper}),l=A.map(function(v){return v.lower}),y=x,m=x==="next"?"":r}b("next");var S=new e.Collection(e,function(){return _e(s[0],l[_-1]+r)});S._ondirectionchange=function(x){b(x)};var E=0;return S._addAlgorithm(function(x,A,v){var c=x.key;if(typeof c!="string")return!1;var h=u(c);if(t(h,l,E))return!0;for(var d=null,f=E;f<_;++f){var g=qa(c,h,s[f],l[f],o,y);g===null&&d===null?E=f+1:(d===null||o(d,g)>0)&&(d=g)}return A(d!==null?function(){x.continue(d+m)}:v),!1}),S}function _e(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function hi(e){return{type:1,lower:e,upper:e}}var di=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?Be(this):new this.Collection(this,function(){return _e(t,n,!r,!i)})}catch{return te(this,ce)}},e.prototype.equals=function(t){return t==null?te(this,ce):new this.Collection(this,function(){return hi(t)})},e.prototype.above=function(t){return t==null?te(this,ce):new this.Collection(this,function(){return _e(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?te(this,ce):new this.Collection(this,function(){return _e(t,void 0,!1)})},e.prototype.below=function(t){return t==null?te(this,ce):new this.Collection(this,function(){return _e(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?te(this,ce):new this.Collection(this,function(){return _e(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?te(this,ci):this.between(t,t+Ce,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):xt(this,function(n,r){return n.indexOf(r[0])===0},[t],Ce)},e.prototype.equalsIgnoreCase=function(t){return xt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=fe.apply(Me,arguments);return t.length===0?Be(this):xt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=fe.apply(Me,arguments);return t.length===0?Be(this):xt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Ce)},e.prototype.anyOf=function(){var t=this,n=fe.apply(Me,arguments),r=this._cmp;try{n.sort(r)}catch{return te(this,ce)}if(n.length===0)return Be(this);var i=new this.Collection(this,function(){return _e(n[0],n[n.length-1])});i._ondirectionchange=function(o){r=o==="next"?t._ascending:t._descending,n.sort(r)};var u=0;return i._addAlgorithm(function(o,s,l){for(var y=o.key;r(y,n[u])>0;)if(++u,u===n.length)return s(l),!1;return r(y,n[u])===0?!0:(s(function(){o.continue(n[u])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[kn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=fe.apply(Me,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return te(this,ce)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[kn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,u=this._ascending,o=this._descending,s=this._min,l=this._max;if(t.length===0)return Be(this);if(!t.every(function(f){return f[0]!==void 0&&f[1]!==void 0&&u(f[0],f[1])<=0}))return te(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",B.InvalidArgument);var y=!n||n.includeLowers!==!1,m=n&&n.includeUppers===!0;function _(f,g){for(var w=0,k=f.length;w<k;++w){var T=f[w];if(i(g[0],T[1])<0&&i(g[1],T[0])>0){T[0]=s(T[0],g[0]),T[1]=l(T[1],g[1]);break}}return w===k&&f.push(g),f}var b=u;function S(f,g){return b(f[0],g[0])}var E;try{E=t.reduce(_,[]),E.sort(S)}catch{return te(this,ce)}var x=0,A=m?function(f){return u(f,E[x][1])>0}:function(f){return u(f,E[x][1])>=0},v=y?function(f){return o(f,E[x][0])>0}:function(f){return o(f,E[x][0])>=0};function c(f){return!A(f)&&!v(f)}var h=A,d=new this.Collection(this,function(){return _e(E[0][0],E[E.length-1][1],!y,!m)});return d._ondirectionchange=function(f){f==="next"?(h=A,b=u):(h=v,b=o),E.sort(S)},d._addAlgorithm(function(f,g,w){for(var k=f.key;h(k);)if(++x,x===E.length)return g(w),!1;return c(k)?!0:(r._cmp(k,E[x][1])===0||r._cmp(k,E[x][0])===0||g(function(){b===u?f.continue(E[x][0]):f.continue(E[x][1])}),!1)}),d},e.prototype.startsWithAnyOf=function(){var t=fe.apply(Me,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?Be(this):this.inAnyRange(t.map(function(n){return[n,n+Ce]})):te(this,"startsWithAnyOf() only works with strings")},e}();function Xa(e){return gt(di.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var u=e._deps.indexedDB;if(!u)throw new B.MissingAPI;this._cmp=this._ascending=u.cmp.bind(u),this._descending=function(o,s){return u.cmp(s,o)},this._max=function(o,s){return u.cmp(o,s)>0?o:s},this._min=function(o,s){return u.cmp(o,s)<0?o:s},this._IDBKeyRange=e._deps.IDBKeyRange})}function oe(e){return j(function(t){return it(t),e(t.target.error),!1})}function it(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var at="storagemutated",Ee="x-storagemutated-1",Ae=yt(null,at),Qa=function(){function e(){}return e.prototype._lock=function(){return Ye(!O.global),++this._reculock,this._reculock===1&&!O.global&&(O.lockOwnerFor=this),this},e.prototype._unlock=function(){if(Ye(!O.global),--this._reculock===0)for(O.global||(O.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Ve(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&O.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(Ye(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new B.DatabaseClosed(i);case"MissingAPIError":throw new B.MissingAPI(i.message,i);default:throw new B.OpenFailed(i)}if(!this.active)throw new B.TransactionInactive;return Ye(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=j(function(u){it(u),n._reject(t.error)}),t.onabort=j(function(u){it(u),n.active&&n._reject(new B.Abort(t.error)),n.active=!1,n.on("abort").fire(u)}),t.oncomplete=j(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Ae.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return V(new B.ReadOnly("Transaction is readonly"));if(!this.active)return V(new B.TransactionInactive);if(this._locked())return new P(function(o,s){i._blockedFuncs.push([function(){i._promise(t,n,r).then(o,s)},O])});if(r)return xe(function(){var o=new P(function(s,l){i._lock();var y=n(s,l,i);y&&y.then&&y.then(s,l)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var u=new P(function(o,s){var l=n(o,s,i);l&&l.then&&l.then(o,s)});return u._lib=!0,u},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=P.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var u=n._waitingFor;return new P(function(o,s){r.then(function(l){return n._waitingQueue.push(j(o.bind(null,l)))},function(l){return n._waitingQueue.push(j(s.bind(null,l)))}).finally(function(){n._waitingFor===u&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new B.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(ie(n,t))return n[t];var r=this.schema[t];if(!r)throw new B.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function Ja(e){return gt(Qa.prototype,function(n,r,i,u,o){var s=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=u,this.idbtrans=null,this.on=yt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new P(function(l,y){s._resolve=l,s._reject=y}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(l){var y=s.active;return s.active=!1,s.on.error.fire(l),s.parent?s.parent._reject(l):y&&s.idbtrans&&s.idbtrans.abort(),V(l)})})}function An(e,t,n,r,i,u,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:u,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+pi(t)}}function pi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function vi(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Wr(n,function(r){return[r.name,r]})}}function Za(e){return e.length===1?e[0]:e}var ut=function(e){try{return e.only([[]]),ut=function(){return[[]]},[[]]}catch{return ut=function(){return Ce},Ce}};function Sn(e){return e==null?function(){}:typeof e=="string"?eu(e):function(t){return ve(t,e)}}function eu(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return ve(n,e)}}function wr(e){return[].slice.call(e)}var tu=0;function Je(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function nu(e,t,n){function r(_,b){var S=wr(_.objectStoreNames);return{schema:{name:_.name,tables:S.map(function(E){return b.objectStore(E)}).map(function(E){var x=E.keyPath,A=E.autoIncrement,v=q(x),c=x==null,h={},d={name:E.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:c,compound:v,keyPath:x,autoIncrement:A,unique:!0,extractKey:Sn(x)},indexes:wr(E.indexNames).map(function(f){return E.index(f)}).map(function(f){var g=f.name,w=f.unique,k=f.multiEntry,T=f.keyPath,C=q(T),K={name:g,compound:C,keyPath:T,unique:w,multiEntry:k,extractKey:Sn(T)};return h[Je(T)]=K,K}),getIndexByKeyPath:function(f){return h[Je(f)]}};return h[":id"]=d.primaryKey,x!=null&&(h[Je(x)]=d.primaryKey),d})},hasGetAll:S.length>0&&"getAll"in b.objectStore(S[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var b=_.lower,S=_.upper,E=_.lowerOpen,x=_.upperOpen,A=b===void 0?S===void 0?null:t.upperBound(S,!!x):S===void 0?t.lowerBound(b,!!E):t.bound(b,S,!!E,!!x);return A}function u(_){var b=_.name;function S(A){var v=A.trans,c=A.type,h=A.keys,d=A.values,f=A.range;return new Promise(function(g,w){g=j(g);var k=v.objectStore(b),T=k.keyPath==null,C=c==="put"||c==="add";if(!C&&c!=="delete"&&c!=="deleteRange")throw new Error("Invalid operation type: "+c);var K=(h||d||{length:1}).length;if(h&&d&&h.length!==d.length)throw new Error("Given keys array must have same length as given values array.");if(K===0)return g({numFailures:0,failures:{},results:[],lastResult:void 0});var R,M=[],D=[],I=0,L=function(ee){++I,it(ee)};if(c==="deleteRange"){if(f.type===4)return g({numFailures:I,failures:D,results:[],lastResult:void 0});f.type===3?M.push(R=k.clear()):M.push(R=k.delete(i(f)))}else{var z=C?T?[d,h]:[d,null]:[h,null],ne=z[0],W=z[1];if(C)for(var X=0;X<K;++X)M.push(R=W&&W[X]!==void 0?k[c](ne[X],W[X]):k[c](ne[X])),R.onerror=L;else for(var X=0;X<K;++X)M.push(R=k[c](ne[X])),R.onerror=L}var G=function(ee){var ae=ee.target.result;M.forEach(function(Q,De){return Q.error!=null&&(D[De]=Q.error)}),g({numFailures:I,failures:D,results:c==="delete"?h:M.map(function(Q){return Q.result}),lastResult:ae})};R.onerror=function(ee){L(ee),G(ee)},R.onsuccess=G})}function E(A){var v=A.trans,c=A.values,h=A.query,d=A.reverse,f=A.unique;return new Promise(function(g,w){g=j(g);var k=h.index,T=h.range,C=v.objectStore(b),K=k.isPrimaryKey?C:C.index(k.name),R=d?f?"prevunique":"prev":f?"nextunique":"next",M=c||!("openKeyCursor"in K)?K.openCursor(i(T),R):K.openKeyCursor(i(T),R);M.onerror=oe(w),M.onsuccess=j(function(D){var I=M.result;if(!I){g(null);return}I.___id=++tu,I.done=!1;var L=I.continue.bind(I),z=I.continuePrimaryKey;z&&(z=z.bind(I));var ne=I.advance.bind(I),W=function(){throw new Error("Cursor not started")},X=function(){throw new Error("Cursor not stopped")};I.trans=v,I.stop=I.continue=I.continuePrimaryKey=I.advance=W,I.fail=j(w),I.next=function(){var G=this,ee=1;return this.start(function(){return ee--?G.continue():G.stop()}).then(function(){return G})},I.start=function(G){var ee=new Promise(function(Q,De){Q=j(Q),M.onerror=oe(De),I.fail=De,I.stop=function(me){I.stop=I.continue=I.continuePrimaryKey=I.advance=X,Q(me)}}),ae=function(){if(M.result)try{G()}catch(Q){I.fail(Q)}else I.done=!0,I.start=function(){throw new Error("Cursor behind last entry")},I.stop()};return M.onsuccess=j(function(Q){M.onsuccess=ae,ae()}),I.continue=L,I.continuePrimaryKey=z,I.advance=ne,ae(),ee},g(I)},w)})}function x(A){return function(v){return new Promise(function(c,h){c=j(c);var d=v.trans,f=v.values,g=v.limit,w=v.query,k=g===1/0?void 0:g,T=w.index,C=w.range,K=d.objectStore(b),R=T.isPrimaryKey?K:K.index(T.name),M=i(C);if(g===0)return c({result:[]});if(A){var D=f?R.getAll(M,k):R.getAllKeys(M,k);D.onsuccess=function(ne){return c({result:ne.target.result})},D.onerror=oe(h)}else{var I=0,L=f||!("openKeyCursor"in R)?R.openCursor(M):R.openKeyCursor(M),z=[];L.onsuccess=function(ne){var W=L.result;if(!W)return c({result:z});if(z.push(f?W.value:W.primaryKey),++I===g)return c({result:z});W.continue()},L.onerror=oe(h)}})}}return{name:b,schema:_,mutate:S,getMany:function(A){var v=A.trans,c=A.keys;return new Promise(function(h,d){h=j(h);for(var f=v.objectStore(b),g=c.length,w=new Array(g),k=0,T=0,C,K=function(I){var L=I.target;(w[L._pos]=L.result)!=null,++T===k&&h(w)},R=oe(d),M=0;M<g;++M){var D=c[M];D!=null&&(C=f.get(c[M]),C._pos=M,C.onsuccess=K,C.onerror=R,++k)}k===0&&h(w)})},get:function(A){var v=A.trans,c=A.key;return new Promise(function(h,d){h=j(h);var f=v.objectStore(b),g=f.get(c);g.onsuccess=function(w){return h(w.target.result)},g.onerror=oe(d)})},query:x(l),openCursor:E,count:function(A){var v=A.query,c=A.trans,h=v.index,d=v.range;return new Promise(function(f,g){var w=c.objectStore(b),k=h.isPrimaryKey?w:w.index(h.name),T=i(d),C=T?k.count(T):k.count();C.onsuccess=j(function(K){return f(K.target.result)}),C.onerror=oe(g)})}}}var o=r(e,n),s=o.schema,l=o.hasGetAll,y=s.tables.map(function(_){return u(_)}),m={};return y.forEach(function(_){return m[_.name]=_}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(_){var b=m[_];if(!b)throw new Error("Table '"+_+"' not found");return m[_]},MIN_KEY:-1/0,MAX_KEY:ut(t),schema:s}}function ru(e,t){return t.reduce(function(n,r){var i=r.create;return F(F({},n),i(n))},e)}function iu(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var u=ru(nu(t,i,r),e.dbcore);return{dbcore:u}}function Xn(e,t){var n=e._novip,r=t.db,i=iu(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(u){var o=u.name;n.core.schema.tables.some(function(s){return s.name===o})&&(u.core=n.core.table(o),n[o]instanceof n.Table&&(n[o].core=u.core))})}function Ht(e,t,n,r){var i=e._novip;n.forEach(function(u){var o=r[u];t.forEach(function(s){var l=jn(s,u);(!l||"value"in l&&l.value===void 0)&&(s===i.Transaction.prototype||s instanceof i.Transaction?ye(s,u,{get:function(){return this.table(u)},set:function(y){Ur(this,u,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):s[u]=new i.Table(u,o))})})}function Cn(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function au(e,t){return e._cfg.version-t._cfg.version}function uu(e,t,n,r){var i=e._dbSchema,u=e._createTransaction("readwrite",e._storeNames,i);u.create(n),u._completion.catch(r);var o=u._reject.bind(u),s=O.transless||O;xe(function(){O.trans=u,O.transless=s,t===0?(H(i).forEach(function(l){Qn(n,l,i[l].primKey,i[l].indexes)}),Xn(e,n),P.follow(function(){return e.on.populate.fire(u)}).catch(o)):ou(e,t,u,n).catch(o)})}function ou(e,t,n,r){var i=e._novip,u=[],o=i._versions,s=i._dbSchema=Jn(i,i.idbdb,r),l=!1,y=o.filter(function(_){return _._cfg.version>=t});y.forEach(function(_){u.push(function(){var b=s,S=_._cfg.dbschema;Rn(i,b,r),Rn(i,S,r),s=i._dbSchema=S;var E=yi(b,S);E.add.forEach(function(d){Qn(r,d[0],d[1].primKey,d[1].indexes)}),E.change.forEach(function(d){if(d.recreate)throw new B.Upgrade("Not yet support for changing primary key");var f=r.objectStore(d.name);d.add.forEach(function(g){return Tn(f,g)}),d.change.forEach(function(g){f.deleteIndex(g.name),Tn(f,g)}),d.del.forEach(function(g){return f.deleteIndex(g)})});var x=_._cfg.contentUpgrade;if(x&&_._cfg.version>t){Xn(i,r),n._memoizedTables={},l=!0;var A=Gr(S);E.del.forEach(function(d){A[d]=b[d]}),Cn(i,[i.Transaction.prototype]),Ht(i,[i.Transaction.prototype],H(A),A),n.schema=A;var v=Hn(x);v&&ze();var c,h=P.follow(function(){if(c=x(n),c&&v){var d=ge.bind(null,null);c.then(d,d)}});return c&&typeof c.then=="function"?P.resolve(c):h.then(function(){return c})}}),u.push(function(b){if(!l||!Ma){var S=_._cfg.dbschema;cu(S,b)}Cn(i,[i.Transaction.prototype]),Ht(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function m(){return u.length?P.resolve(u.shift()(n.idbtrans)).then(m):P.resolve()}return m().then(function(){su(s,r)})}function yi(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],u=t[r];if(!i)n.add.push([r,u]);else{var o={name:r,def:u,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(u.primKey.keyPath||"")||i.primKey.auto!==u.primKey.auto&&!qt)o.recreate=!0,n.change.push(o);else{var s=i.idxByName,l=u.idxByName,y=void 0;for(y in s)l[y]||o.del.push(y);for(y in l){var m=s[y],_=l[y];m?m.src!==_.src&&o.change.push(_):o.add.push(_)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function Qn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(u){return Tn(i,u)}),i}function su(e,t){H(e).forEach(function(n){t.db.objectStoreNames.contains(n)||Qn(t,n,e[n].primKey,e[n].indexes)})}function cu(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Tn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Jn(e,t,n){var r={},i=Gt(t.objectStoreNames,0);return i.forEach(function(u){for(var o=n.objectStore(u),s=o.keyPath,l=An(pi(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),y=[],m=0;m<o.indexNames.length;++m){var _=o.index(o.indexNames[m]);s=_.keyPath;var b=An(_.name,s,!!_.unique,!!_.multiEntry,!1,s&&typeof s!="string",!1);y.push(b)}r[u]=vi(u,l,y)}),r}function lu(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=Jn(r,t,n);r._storeNames=Gt(t.objectStoreNames,0),Ht(r,[r._allTables],H(i),i)}function fu(e,t){var n=Jn(e,e.idbdb,t),r=yi(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Rn(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,u=0;u<i.length;++u){var o=i[u],s=n.objectStore(o);r._hasGetAll="getAll"in s;for(var l=0;l<s.indexNames.length;++l){var y=s.indexNames[l],m=s.index(y).keyPath,_=typeof m=="string"?m:"["+Gt(m).join("+")+"]";if(t[o]){var b=t[o].idxByName[_];b&&(b.name=y,delete t[o].idxByName[_],t[o].idxByName[y]=b)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&N.WorkerGlobalScope&&N instanceof N.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function hu(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return An(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),q(i),n===0)})}var du=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){H(t).forEach(function(r){if(t[r]!==null){var i=hu(t[r]),u=i.shift();if(u.multi)throw new B.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new B.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new B.Schema("Index must have a name and cannot be an empty string")}),n[r]=vi(r,u,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?Z(this._cfg.storesSource,t):t;var r=n._versions,i={},u={};return r.forEach(function(o){Z(i,o._cfg.storesSource),u=o._cfg.dbschema={},o._parseStoresSpec(i,u)}),n._dbSchema=u,Cn(n,[n._allTables,n,n.Transaction.prototype]),Ht(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],H(u),u),n._storeNames=H(u),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Vn(this._cfg.contentUpgrade||$,t),this},e}();function pu(e){return gt(du.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Zn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new _i(Xt,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function er(e){return e&&typeof e.databases=="function"}function vu(e){var t=e.indexedDB,n=e.IDBKeyRange;return er(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Xt})}):Zn(t,n).toCollection().primaryKeys()}function yu(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!er(n)&&t!==Xt&&Zn(n,r).put({name:t}).catch($)}function gu(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!er(n)&&t!==Xt&&Zn(n,r).delete(t).catch($)}function Kn(e){return xe(function(){return O.letThrough=!0,e()})}function mu(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function _u(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?V(t.dbOpenError):e});se&&(t.openCanceller._stackHolder=Ie()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new B.DatabaseClosed("db.open() was cancelled")}var u=t.dbReadyResolve,o=null,s=!1;return P.race([r,(typeof navigator=="undefined"?P.resolve():mu()).then(function(){return new P(function(l,y){if(i(),!n)throw new B.MissingAPI;var m=e.name,_=t.autoSchema?n.open(m):n.open(m,Math.round(e.verno*10));if(!_)throw new B.MissingAPI;_.onerror=oe(y),_.onblocked=j(e._fireOnBlocked),_.onupgradeneeded=j(function(b){if(o=_.transaction,t.autoSchema&&!e._options.allowEmptyDB){_.onerror=it,o.abort(),_.result.close();var S=n.deleteDatabase(m);S.onsuccess=S.onerror=j(function(){y(new B.NoSuchDatabase("Database "+m+" doesnt exist"))})}else{o.onerror=oe(y);var E=b.oldVersion>Math.pow(2,62)?0:b.oldVersion;s=E<1,e._novip.idbdb=_.result,uu(e,E/10,o,y)}},y),_.onsuccess=j(function(){o=null;var b=e._novip.idbdb=_.result,S=Gt(b.objectStoreNames);if(S.length>0)try{var E=b.transaction(Za(S),"readonly");t.autoSchema?lu(e,b,E):(Rn(e,e._dbSchema,E),fu(e,E)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Xn(e,E)}catch{}Qe.push(e),b.onversionchange=j(function(x){t.vcFired=!0,e.on("versionchange").fire(x)}),b.onclose=j(function(x){e.on("close").fire(x)}),s&&yu(e._deps,m),l()},y)})})]).then(function(){return i(),t.onReadyBeingFired=[],P.resolve(Kn(function(){return e.on.ready.fire(e.vip)})).then(function l(){if(t.onReadyBeingFired.length>0){var y=t.onReadyBeingFired.reduce(Vn,$);return t.onReadyBeingFired=[],P.resolve(Kn(function(){return y(e.vip)})).then(l)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(l){t.dbOpenError=l;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),V(l)}).finally(function(){t.openComplete=!0,u()})}function Pn(e){var t=function(o){return e.next(o)},n=function(o){return e.throw(o)},r=u(t),i=u(n);function u(o){return function(s){var l=o(s),y=l.value;return l.done?y:!y||typeof y.then!="function"?q(y)?Promise.all(y).then(r,i):r(y):y.then(r,i)}}return u(t)()}function bu(e,t,n){var r=arguments.length;if(r<2)throw new B.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var u=Yr(i);return[e,u,n]}function gi(e,t,n,r,i){return P.resolve().then(function(){var u=O.transless||O,o=e._createTransaction(t,n,e._dbSchema,r),s={trans:o,transless:u};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(_){return _.name===zn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return gi(e,t,n,null,i)})):V(_)}var l=Hn(i);l&&ze();var y,m=P.follow(function(){if(y=i.call(o,o),y)if(l){var _=ge.bind(null,null);y.then(_,_)}else typeof y.next=="function"&&typeof y.throw=="function"&&(y=Pn(y))},s);return(y&&typeof y.then=="function"?P.resolve(y).then(function(_){return o.active?_:V(new B.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):m.then(function(){return y})).then(function(_){return r&&o._resolve(),o._completion.then(function(){return _})}).catch(function(_){return o._reject(_),V(_)})})}function kt(e,t,n){for(var r=q(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function wu(e){return F(F({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},u=[];function o(x,A,v){var c=Je(x),h=i[c]=i[c]||[],d=x==null?0:typeof x=="string"?1:x.length,f=A>0,g=F(F({},v),{isVirtual:f,keyTail:A,keyLength:d,extractKey:Sn(x),unique:!f&&v.unique});if(h.push(g),g.isPrimaryKey||u.push(g),d>1){var w=d===2?x[0]:x.slice(0,d-1);o(w,A+1,v)}return h.sort(function(k,T){return k.keyTail-T.keyTail}),g}var s=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var l=0,y=r.indexes;l<y.length;l++){var m=y[l];o(m.keyPath,0,m)}function _(x){var A=i[Je(x)];return A&&A[0]}function b(x,A){return{type:x.type===1?2:x.type,lower:kt(x.lower,x.lowerOpen?e.MAX_KEY:e.MIN_KEY,A),lowerOpen:!0,upper:kt(x.upper,x.upperOpen?e.MIN_KEY:e.MAX_KEY,A),upperOpen:!0}}function S(x){var A=x.query.index;return A.isVirtual?F(F({},x),{query:{index:A,range:b(x.query.range,A.keyTail)}}):x}var E=F(F({},n),{schema:F(F({},r),{primaryKey:s,indexes:u,getIndexByKeyPath:_}),count:function(x){return n.count(S(x))},query:function(x){return n.query(S(x))},openCursor:function(x){var A=x.query.index,v=A.keyTail,c=A.isVirtual,h=A.keyLength;if(!c)return n.openCursor(x);function d(f){function g(k){k!=null?f.continue(kt(k,x.reverse?e.MAX_KEY:e.MIN_KEY,v)):x.unique?f.continue(f.key.slice(0,h).concat(x.reverse?e.MIN_KEY:e.MAX_KEY,v)):f.continue()}var w=Object.create(f,{continue:{value:g},continuePrimaryKey:{value:function(k,T){f.continuePrimaryKey(kt(k,e.MAX_KEY,v),T)}},primaryKey:{get:function(){return f.primaryKey}},key:{get:function(){var k=f.key;return h===1?k[0]:k.slice(0,h)}},value:{get:function(){return f.value}}});return w}return n.openCursor(S(x)).then(function(f){return f&&d(f)})}});return E}})}var Eu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:wu};function tr(e,t,n,r){return n=n||{},r=r||"",H(e).forEach(function(i){if(!ie(t,i))n[r+i]=void 0;else{var u=e[i],o=t[i];if(typeof u=="object"&&typeof o=="object"&&u&&o){var s=hn(u),l=hn(o);s!==l?n[r+i]=t[i]:s==="Object"?tr(u,o,n,r+i+"."):u!==o&&(n[r+i]=t[i])}else u!==o&&(n[r+i]=t[i])}}),H(t).forEach(function(i){ie(e,i)||(n[r+i]=t[i])}),n}function xu(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ku={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return F(F({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=F(F({},n),{mutate:function(u){var o=O.trans,s=o.table(t).hook,l=s.deleting,y=s.creating,m=s.updating;switch(u.type){case"add":if(y.fire===$)break;return o._promise("readwrite",function(){return _(u)},!0);case"put":if(y.fire===$&&m.fire===$)break;return o._promise("readwrite",function(){return _(u)},!0);case"delete":if(l.fire===$)break;return o._promise("readwrite",function(){return _(u)},!0);case"deleteRange":if(l.fire===$)break;return o._promise("readwrite",function(){return b(u)},!0)}return n.mutate(u);function _(E){var x=O.trans,A=E.keys||xu(r,E);if(!A)throw new Error("Keys missing");return E=E.type==="add"||E.type==="put"?F(F({},E),{keys:A}):F({},E),E.type!=="delete"&&(E.values=ln([],E.values,!0)),E.keys&&(E.keys=ln([],E.keys,!0)),Au(n,E,A).then(function(v){var c=A.map(function(h,d){var f=v[d],g={onerror:null,onsuccess:null};if(E.type==="delete")l.fire.call(g,h,f,x);else if(E.type==="add"||f===void 0){var w=y.fire.call(g,h,E.values[d],x);h==null&&w!=null&&(h=w,E.keys[d]=h,r.outbound||ue(E.values[d],r.keyPath,h))}else{var k=tr(f,E.values[d]),T=m.fire.call(g,k,h,f,x);if(T){var C=E.values[d];Object.keys(T).forEach(function(K){ie(C,K)?C[K]=T[K]:ue(C,K,T[K])})}}return g});return n.mutate(E).then(function(h){for(var d=h.failures,f=h.results,g=h.numFailures,w=h.lastResult,k=0;k<A.length;++k){var T=f?f[k]:A[k],C=c[k];T==null?C.onerror&&C.onerror(d[k]):C.onsuccess&&C.onsuccess(E.type==="put"&&v[k]?E.values[k]:T)}return{failures:d,results:f,numFailures:g,lastResult:w}}).catch(function(h){return c.forEach(function(d){return d.onerror&&d.onerror(h)}),Promise.reject(h)})})}function b(E){return S(E.trans,E.range,1e4)}function S(E,x,A){return n.query({trans:E,values:!1,query:{index:r,range:x},limit:A}).then(function(v){var c=v.result;return _({type:"delete",keys:c,trans:E}).then(function(h){return h.numFailures>0?Promise.reject(h.failures[0]):c.length<A?{failures:[],numFailures:0,lastResult:void 0}:S(E,F(F({},x),{lower:c[c.length-1],lowerOpen:!0}),A)})})}}});return i}})}};function Au(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function mi(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,u=0;i<t.keys.length&&u<e.length;++i)J(t.keys[i],e[u])===0&&(r.push(n?ht(t.values[i]):t.values[i]),++u);return r.length===e.length?r:null}catch{return null}}var Su={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return F(F({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=mi(r.keys,r.trans._cache,r.cache==="clone");return i?P.resolve(i):n.getMany(r).then(function(u){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?ht(u):u},u})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},an;function nr(e){return!("from"in e)}var le=function(e,t){if(this)Z(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new le;return e&&"d"in e&&Z(n,e),n}};Ne(le.prototype,(an={add:function(e){return Ut(this,e),this},addKey:function(e){return ot(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return ot(t,n,n)}),this}},an[dn]=function(){return In(this)},an));function ot(e,t,n){var r=J(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(nr(e))return Z(e,{from:t,to:n,d:1});var i=e.l,u=e.r;if(J(n,e.from)<0)return i?ot(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Er(e);if(J(t,e.to)>0)return u?ot(u,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Er(e);J(t,e.from)<0&&(e.from=t,e.l=null,e.d=u?u.d+1:1),J(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var o=!e.r;i&&!e.l&&Ut(e,i),u&&o&&Ut(e,u)}}function Ut(e,t){function n(r,i){var u=i.from,o=i.to,s=i.l,l=i.r;ot(r,u,o),s&&n(r,s),l&&n(r,l)}nr(t)||n(e,t)}function Cu(e,t){var n=In(t),r=n.next();if(r.done)return!1;for(var i=r.value,u=In(e),o=u.next(i.from),s=o.value;!r.done&&!o.done;){if(J(s.from,i.to)<=0&&J(s.to,i.from)>=0)return!0;J(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(o=u.next(i.from)).value}return!1}function In(e){var t=nr(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&J(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||J(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Er(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var u=i==="r"?"l":"r",o=F({},e),s=e[i];e.from=s.from,e.to=s.to,e[i]=s[i],o[i]=s[u],e[u]=o,o.d=xr(o)}e.d=xr(e)}function xr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var Tu={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new le(e.MIN_KEY,e.MAX_KEY);return F(F({},e),{table:function(r){var i=e.table(r),u=i.schema,o=u.primaryKey,s=o.extractKey,l=o.outbound,y=F(F({},i),{mutate:function(b){var S=b.trans,E=S.mutatedParts||(S.mutatedParts={}),x=function(w){var k="idb://"+t+"/"+r+"/"+w;return E[k]||(E[k]=new le)},A=x(""),v=x(":dels"),c=b.type,h=b.type==="deleteRange"?[b.range]:b.type==="delete"?[b.keys]:b.values.length<50?[[],b.values]:[],d=h[0],f=h[1],g=b.trans._cache;return i.mutate(b).then(function(w){if(q(d)){c!=="delete"&&(d=w.results),A.addKeys(d);var k=mi(d,g);!k&&c!=="add"&&v.addKeys(d),(k||f)&&Ru(x,u,k,f)}else if(d){var T={from:d.lower,to:d.upper};v.add(T),A.add(T)}else A.add(n),v.add(n),u.indexes.forEach(function(C){return x(C.name).add(n)});return w})}}),m=function(b){var S,E,x=b.query,A=x.index,v=x.range;return[A,new le((S=v.lower)!==null&&S!==void 0?S:e.MIN_KEY,(E=v.upper)!==null&&E!==void 0?E:e.MAX_KEY)]},_={get:function(b){return[o,new le(b.key)]},getMany:function(b){return[o,new le().addKeys(b.keys)]},count:m,query:m,openCursor:m};return H(_).forEach(function(b){y[b]=function(S){var E=O.subscr;if(E){var x=function(g){var w="idb://"+t+"/"+r+"/"+g;return E[w]||(E[w]=new le)},A=x(""),v=x(":dels"),c=_[b](S),h=c[0],d=c[1];if(x(h.name||"").add(d),!h.isPrimaryKey)if(b==="count")v.add(n);else{var f=b==="query"&&l&&S.values&&i.query(F(F({},S),{values:!1}));return i[b].apply(this,arguments).then(function(g){if(b==="query"){if(l&&S.values)return f.then(function(C){var K=C.result;return A.addKeys(K),g});var w=S.values?g.result.map(s):g.result;S.values?A.addKeys(w):v.addKeys(w)}else if(b==="openCursor"){var k=g,T=S.values;return k&&Object.create(k,{key:{get:function(){return v.addKey(k.primaryKey),k.key}},primaryKey:{get:function(){var C=k.primaryKey;return v.addKey(C),C}},value:{get:function(){return T&&A.addKey(k.primaryKey),k.value}}})}return g})}}return i[b].apply(this,arguments)}}),y}})}};function Ru(e,t,n,r){function i(u){var o=e(u.name||"");function s(y){return y!=null?u.extractKey(y):null}var l=function(y){return u.multiEntry&&q(y)?y.forEach(function(m){return o.addKey(m)}):o.addKey(y)};(n||r).forEach(function(y,m){var _=n&&s(n[m]),b=r&&s(r[m]);J(_,b)!==0&&(_!=null&&l(_),b!=null&&l(b))})}t.indexes.forEach(i)}var _i=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=F({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var u=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:$,dbReadyPromise:null,cancelOpen:$,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new P(function(s){o.dbReadyResolve=s}),o.openCanceller=new P(function(s,l){o.cancelOpen=l}),this._state=o,this.name=t,this.on=yt(this,"populate","blocked","versionchange","close",{ready:[Vn,$]}),this.on.ready.subscribe=zr(this.on.ready.subscribe,function(s){return function(l,y){e.vip(function(){var m=r._state;if(m.openComplete)m.dbOpenError||P.resolve().then(l),y&&s(l);else if(m.onReadyBeingFired)m.onReadyBeingFired.push(l),y&&s(l);else{s(l);var _=r;y||s(function b(){_.on.ready.unsubscribe(l),_.on.ready.unsubscribe(b)})}})}}),this.Collection=za(this),this.Table=$a(this),this.Transaction=Ja(this),this.Version=pu(this),this.WhereClause=Xa(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+s.oldVersion/10)}),this._maxKey=ut(n.IDBKeyRange),this._createTransaction=function(s,l,y,m){return new r.Transaction(s,l,y,r._options.chromeTransactionDurability,m)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),Qe.filter(function(l){return l.name===r.name&&l!==r&&!l._state.vcFired}).map(function(l){return l.on("versionchange").fire(s)})},this.use(Eu),this.use(ku),this.use(Tu),this.use(Su),this.vip=Object.create(this,{_vip:{value:!0}}),u.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new B.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new B.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(au),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||O.letThrough||this._vip)?t():new P(function(r,i){if(n._state.openComplete)return i(new B.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new B.DatabaseClosed);return}n.open().catch($)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,u=t.name;u&&this.unuse({stack:n,name:u});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:i==null?10:i,name:u}),o.sort(function(s,l){return s.level-l.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(u){return i?u.create!==i:r?u.name!==r:!1})),this},e.prototype.open=function(){return _u(this)},e.prototype._close=function(){var t=this._state,n=Qe.indexOf(this);if(n>=0&&Qe.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new P(function(r){t.dbReadyResolve=r}),t.openCanceller=new P(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new B.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new P(function(i,u){var o=function(){t.close();var s=t._deps.indexedDB.deleteDatabase(t.name);s.onsuccess=j(function(){gu(t._deps,t.name),i()}),s.onerror=oe(u),s.onblocked=t._fireOnBlocked};if(n)throw new B.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return H(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=bu.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,u=O.trans;(!u||u.db!==this||t.indexOf("!")!==-1)&&(u=null);var o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var s,l;try{if(l=n.map(function(m){var _=m instanceof i.Table?m.name:m;if(typeof _!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return _}),t=="r"||t===Zt)s=Zt;else if(t=="rw"||t==en)s=en;else throw new B.InvalidArgument("Invalid transaction mode: "+t);if(u){if(u.mode===Zt&&s===en)if(o)u=null;else throw new B.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u&&l.forEach(function(m){if(u&&u.storeNames.indexOf(m)===-1)if(o)u=null;else throw new B.SubTransaction("Table "+m+" not included in parent transaction.")}),o&&u&&!u.active&&(u=null)}}catch(m){return u?u._promise(null,function(_,b){b(m)}):V(m)}var y=gi.bind(null,this,s,l,u,r);return u?u._promise(s,y,"lock"):O.trans?Ve(O.transless,function(){return i._whenReady(y)}):this._whenReady(y)},e.prototype.table=function(t){if(!ie(this._allTables,t))throw new B.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),Ku=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Pu=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[Ku]=function(){return this},e}();function bi(e,t){return H(t).forEach(function(n){var r=e[n]||(e[n]=new le);Ut(r,t[n])}),e}function Iu(e){return new Pu(function(t){var n=Hn(e);function r(S){n&&ze();var E=function(){return xe(e,{subscr:S,trans:null})},x=O.trans?Ve(O.transless,E):E();return n&&x.then(ge,ge),x}var i=!1,u={},o={},s={get closed(){return i},unsubscribe:function(){i=!0,Ae.storagemutated.unsubscribe(_)}};t.start&&t.start(s);var l=!1,y=!1;function m(){return H(o).some(function(S){return u[S]&&Cu(u[S],o[S])})}var _=function(S){bi(u,S),m()&&b()},b=function(){if(!(l||i)){u={};var S={},E=r(S);y||(Ae(at,_),y=!0),l=!0,Promise.resolve(E).then(function(x){l=!1,!i&&(m()?b():(u={},o=S,t.next&&t.next(x)))},function(x){l=!1,t.error&&t.error(x),s.unsubscribe()})}};return b(),s})}var Dn;try{Dn={indexedDB:N.indexedDB||N.mozIndexedDB||N.webkitIndexedDB||N.msIndexedDB,IDBKeyRange:N.IDBKeyRange||N.webkitIDBKeyRange}}catch{Dn={indexedDB:null,IDBKeyRange:null}}var Se=_i;Ne(Se,F(F({},Yt),{delete:function(e){var t=new Se(e,{addons:[]});return t.delete()},exists:function(e){return new Se(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return vu(Se.dependencies).then(e)}catch{return V(new B.MissingAPI)}},defineClass:function(){function e(t){Z(this,t)}return e},ignoreTransaction:function(e){return O.trans?Ve(O.transless,e):e()},vip:Kn,async:function(e){return function(){try{var t=Pn(e.apply(this,arguments));return!t||typeof t.then!="function"?P.resolve(t):t}catch(n){return V(n)}}},spawn:function(e,t,n){try{var r=Pn(e.apply(n,t||[]));return!r||typeof r.then!="function"?P.resolve(r):r}catch(i){return V(i)}},currentTransaction:{get:function(){return O.trans||null}},waitFor:function(e,t){var n=P.resolve(typeof e=="function"?Se.ignoreTransaction(e):e).timeout(t||6e4);return O.trans?O.trans.waitFor(n):n},Promise:P,debug:{get:function(){return se},set:function(e){Xr(e,e==="dexie"?function(){return!0}:li)}},derive:He,extend:Z,props:Ne,override:zr,Events:yt,on:Ae,liveQuery:Iu,extendObservabilitySet:bi,getByKeyPath:ve,setByKeyPath:ue,delByKeyPath:la,shallowClone:Gr,deepClone:ht,getObjectDiff:tr,cmp:J,asap:Vr,minKey:kn,addons:[],connections:Qe,errnames:zn,dependencies:Dn,semVer:yr,version:yr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));Se.maxKey=ut(Se.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(Ae(at,function(e){if(!de){var t;qt?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Ee,!0,!0,e)):t=new CustomEvent(Ee,{detail:e}),de=!0,dispatchEvent(t),de=!1}}),addEventListener(Ee,function(e){var t=e.detail;de||zt(t)}));function zt(e){var t=de;try{de=!0,Ae.storagemutated.fire(e)}finally{de=t}}var de=!1;if(typeof BroadcastChannel!="undefined"){var kr=new BroadcastChannel(Ee);Ae(at,function(e){de||kr.postMessage(e)}),kr.onmessage=function(e){e.data&&zt(e.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){Ae(at,function(e){try{de||(typeof localStorage!="undefined"&&localStorage.setItem(Ee,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&ln([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:Ee,changedParts:e})}))}catch{}}),addEventListener("storage",function(e){if(e.key===Ee){var t=JSON.parse(e.newValue);t&&zt(t.changedParts)}});var Ar=self.document&&navigator.serviceWorker;Ar&&Ar.addEventListener("message",Du)}function Du(e){var t=e.data;t&&t.type===Ee&&zt(t.changedParts)}P.rejectionMapper=_a;Xr(se,li);function uo(e,{delay:t=0,duration:n=400,easing:r=On}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:u=>`opacity: ${u*i}`}}function Ou(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var Bu={},wi={},Mu={},Fu=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Mu}),Lu=Ou(Fu);(function(e){(function(t){var n=t.Markdown=function(v){switch(typeof v){case"undefined":this.dialect=n.dialects.Gruber;break;case"object":this.dialect=v;break;default:if(v in n.dialects)this.dialect=n.dialects[v];else throw new Error("Unknown Markdown dialect '"+String(v)+"'");break}this.em_state=[],this.strong_state=[],this.debug_indent=""};t.parse=function(v,c){var h=new n(c);return h.toTree(v)},t.toHTML=function(c,h,d){var f=t.toHTMLTree(c,h,d);return t.renderJsonML(f)},t.toHTMLTree=function(c,h,d){typeof c=="string"&&(c=this.parse(c,h));var f=b(c),g={};f&&f.references&&(g=f.references);var w=x(c,g,d);return A(w),w};function r(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function i(){var v=Lu;return"Markdown.mk_block( "+v.inspect(this.toString())+", "+v.inspect(this.trailing)+", "+v.inspect(this.lineNumber)+" )"}var u=n.mk_block=function(v,c,h){arguments.length==1&&(c=`

`);var d=new String(v);return d.trailing=c,d.inspect=i,d.toSource=r,h!=null&&(d.lineNumber=h),d};function o(v){for(var c=0,h=-1;(h=v.indexOf(`
`,h+1))!==-1;)c++;return c}n.prototype.split_blocks=function(c,h){c=c.replace(/(\r\n|\n|\r)/g,`
`);var d=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,f=[],g,w=1;for((g=/^(\s*\n)/.exec(c))!=null&&(w+=o(g[0]),d.lastIndex=g[0].length);(g=d.exec(c))!==null;)g[2]==`
#`&&(g[2]=`
`,d.lastIndex--),f.push(u(g[1],g[2],w)),w+=o(g[0]);return f},n.prototype.processBlock=function(c,h){var d=this.dialect.block,f=d.__order__;if("__call__"in d)return d.__call__.call(this,c,h);for(var g=0;g<f.length;g++){var w=d[f[g]].call(this,c,h);if(w)return(!y(w)||w.length>0&&!y(w[0]))&&this.debug(f[g],"didn't return a proper array"),w}return[]},n.prototype.processInline=function(c){return this.dialect.inline.__call__.call(this,String(c))},n.prototype.toTree=function(c,h){var d=c instanceof Array?c:this.split_blocks(c),f=this.tree;try{this.tree=h||this.tree||["markdown"];e:for(;d.length;){var g=this.processBlock(d.shift(),d);if(!g.length)continue e;this.tree.push.apply(this.tree,g)}return this.tree}finally{h&&(this.tree=f)}},n.prototype.debug=function(){var v=Array.prototype.slice.call(arguments);v.unshift(this.debug_indent),typeof print!="undefined"&&print.apply(print,v),typeof console!="undefined"&&typeof console.log!="undefined"&&console.log.apply(null,v)},n.prototype.loop_re_over_block=function(v,c,h){for(var d,f=c.valueOf();f.length&&(d=v.exec(f))!=null;)f=f.substr(d[0].length),h.call(this,d);return f},n.dialects={},n.dialects.Gruber={block:{atxHeader:function(c,h){var d=c.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!!d){var f=["header",{level:d[1].length}];return Array.prototype.push.apply(f,this.processInline(d[2])),d[0].length<c.length&&h.unshift(u(c.substr(d[0].length),c.trailing,c.lineNumber+2)),[f]}},setextHeader:function(c,h){var d=c.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!!d){var f=d[2]==="="?1:2,g=["header",{level:f},d[1]];return d[0].length<c.length&&h.unshift(u(c.substr(d[0].length),c.trailing,c.lineNumber+2)),[g]}},code:function(c,h){var d=[],f=/^(?: {0,3}\t| {4})(.*)\n?/;if(!c.match(f))return;e:do{var g=this.loop_re_over_block(f,c.valueOf(),function(w){d.push(w[1])});if(g.length){h.unshift(u(g,c.trailing));break e}else if(h.length){if(!h[0].match(f))break e;d.push(c.trailing.replace(/[^\n]/g,"").substring(2)),c=h.shift()}else break e}while(!0);return[["code_block",d.join(`
`)]]},horizRule:function(c,h){var d=c.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!!d){var f=[["hr"]];return d[1]&&f.unshift.apply(f,this.processBlock(d[1],[])),d[3]&&h.unshift(u(d[3])),f}},lists:function(){var v="[*+-]|\\d+\\.",c=/[*+-]/,h=new RegExp("^( {0,3})("+v+")[ 	]+"),d="(?: {0,3}\\t| {4})";function f(C){return new RegExp("(?:^("+d+"{0,"+C+"} {0,3})("+v+")\\s+)|(^"+d+"{0,"+(C-1)+"}[ ]{0,4})")}function g(C){return C.replace(/ {0,3}\t/g,"    ")}function w(C,K,R,M){if(K){C.push(["para"].concat(R));return}var D=C[C.length-1]instanceof Array&&C[C.length-1][0]=="para"?C[C.length-1]:C;M&&C.length>1&&R.unshift(M);for(var I=0;I<R.length;I++){var L=R[I],z=typeof L=="string";z&&D.length>1&&typeof D[D.length-1]=="string"?D[D.length-1]+=L:D.push(L)}}function k(C,K){for(var R=new RegExp("^("+d+"{"+C+"}.*?\\n?)*$"),M=new RegExp("^"+d+"{"+C+"}","gm"),D=[];K.length>0&&R.exec(K[0]);){var I=K.shift(),L=I.replace(M,"");D.push(u(L,I.trailing,I.lineNumber))}return D}function T(C,K,R){var M=C.list,D=M[M.length-1];if(!(D[1]instanceof Array&&D[1][0]=="para"))if(K+1==R.length)D.push(["para"].concat(D.splice(1,D.length-1)));else{var I=D.pop();D.push(["para"].concat(D.splice(1,D.length-1)),I)}}return function(C,K){var R=C.match(h);if(!R)return;function M(mt){var or=c.exec(mt[2])?["bulletlist"]:["numberlist"];return D.push({list:or,indent:mt[1]}),or}var D=[],I=M(R),L,z=!1,ne=[D[0].list],W;e:for(;;){for(var X=C.split(/(?=\n)/),G="",ee=0;ee<X.length;ee++){var ae="",Q=X[ee].replace(/^\n/,function(mt){return ae=mt,""}),De=f(D.length);if(R=Q.match(De),R[1]!==void 0){G.length&&(w(L,z,this.processInline(G),ae),z=!1,G=""),R[1]=g(R[1]);var me=Math.floor(R[1].length/4)+1;if(me>D.length)I=M(R),L.push(I),L=I[1]=["listitem"];else{var rr=!1;for(W=0;W<D.length;W++)if(D[W].indent==R[1]){I=D[W].list,D.splice(W+1,D.length-(W+1)),rr=!0;break}rr||(me++,me<=D.length?(D.splice(me,D.length-me),I=D[me-1].list):(I=M(R),L.push(I))),L=["listitem"],I.push(L)}ae=""}Q.length>R[0].length&&(G+=ae+Q.substr(R[0].length))}G.length&&(w(L,z,this.processInline(G),ae),z=!1,G="");var ir=k(D.length,K);ir.length>0&&(m(D,T,this),L.push.apply(L,this.toTree(ir,[])));var ar=K[0]&&K[0].valueOf()||"";if(ar.match(h)||ar.match(/^ /)){C=K.shift();var ur=this.dialect.block.horizRule(C,K);if(ur){ne.push.apply(ne,ur);break}m(D,T,this),z=!0;continue e}break}return ne}}(),blockquote:function(c,h){if(!!c.match(/^>/m)){var d=[];if(c[0]!=">"){for(var f=c.split(/\n/),g=[],w=c.lineNumber;f.length&&f[0][0]!=">";)g.push(f.shift()),w++;var k=u(g.join(`
`),`
`,c.lineNumber);d.push.apply(d,this.processBlock(k,[])),c=u(f.join(`
`),c.trailing,w)}for(;h.length&&h[0][0]==">";){var T=h.shift();c=u(c+c.trailing+T,T.trailing,c.lineNumber)}var C=c.replace(/^> ?/gm,"");this.tree;var K=this.toTree(C,["blockquote"]),R=b(K);return R&&R.references&&(delete R.references,_(R)&&K.splice(1,1)),d.push(K),d}},referenceDefn:function(c,h){var d=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!!c.match(d)){b(this.tree)||this.tree.splice(1,0,{});var f=b(this.tree);f.references===void 0&&(f.references={});var g=this.loop_re_over_block(d,c,function(w){w[2]&&w[2][0]=="<"&&w[2][w[2].length-1]==">"&&(w[2]=w[2].substring(1,w[2].length-1));var k=f.references[w[1].toLowerCase()]={href:w[2]};w[4]!==void 0?k.title=w[4]:w[5]!==void 0&&(k.title=w[5])});return g.length&&h.unshift(u(g,c.trailing)),[]}},para:function(c,h){return[["para"].concat(this.processInline(c))]}}},n.dialects.Gruber.inline={__oneElement__:function(c,h,d){var f,w;h=h||this.dialect.inline.__patterns__;var g=new RegExp("([\\s\\S]*?)("+(h.source||h)+")");if(f=g.exec(c),f){if(f[1])return[f[1].length,f[1]]}else return[c.length,c];var w;return f[2]in this.dialect.inline&&(w=this.dialect.inline[f[2]].call(this,c.substr(f.index),f,d||[])),w=w||[f[2].length,f[2]],w},__call__:function(c,h){var d=[],f;function g(w){typeof w=="string"&&typeof d[d.length-1]=="string"?d[d.length-1]+=w:d.push(w)}for(;c.length>0;)f=this.dialect.inline.__oneElement__.call(this,c,h,d),c=c.substr(f.shift()),m(f,g);return d},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(c){return this.dialect.inline.__escape__.exec(c)?[2,c.charAt(1)]:[1,"\\"]},"![":function(c){var h=c.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(h){h[2]&&h[2][0]=="<"&&h[2][h[2].length-1]==">"&&(h[2]=h[2].substring(1,h[2].length-1)),h[2]=this.dialect.inline.__call__.call(this,h[2],/\\/)[0];var d={alt:h[1],href:h[2]||""};return h[4]!==void 0&&(d.title=h[4]),[h[0].length,["img",d]]}return h=c.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),h?[h[0].length,["img_ref",{alt:h[1],ref:h[2].toLowerCase(),original:h[0]}]]:[2,"!["]},"[":function(c){var h=String(c),d=n.DialectHelpers.inline_until_char.call(this,c.substr(1),"]");if(!d)return[1,"["];var f=1+d[0],g=d[1],w,k;c=c.substr(f);var T=c.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(T){var C=T[1];if(f+=T[0].length,C&&C[0]=="<"&&C[C.length-1]==">"&&(C=C.substring(1,C.length-1)),!T[3])for(var K=1,R=0;R<C.length;R++)switch(C[R]){case"(":K++;break;case")":--K==0&&(f-=C.length-R,C=C.substring(0,R));break}return C=this.dialect.inline.__call__.call(this,C,/\\/)[0],k={href:C||""},T[3]!==void 0&&(k.title=T[3]),w=["link",k].concat(g),[f,w]}return T=c.match(/^\s*\[(.*?)\]/),T?(f+=T[0].length,k={ref:(T[1]||String(g)).toLowerCase(),original:h.substr(0,f)},w=["link_ref",k].concat(g),[f,w]):g.length==1&&typeof g[0]=="string"?(k={ref:g[0].toLowerCase(),original:h.substr(0,f)},w=["link_ref",k,g[0]],[f,w]):[1,"["]},"<":function(c){var h;return(h=c.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))!=null?h[3]?[h[0].length,["link",{href:"mailto:"+h[3]},h[3]]]:h[2]=="mailto"?[h[0].length,["link",{href:h[1]},h[1].substr(7)]]:[h[0].length,["link",{href:h[1]},h[1]]]:[1,"<"]},"`":function(c){var h=c.match(/(`+)(([\s\S]*?)\1)/);return h&&h[2]?[h[1].length+h[2].length,["inlinecode",h[3]]]:[1,"`"]},"  \n":function(c){return[3,["linebreak"]]}};function s(v,c){var h=v+"_state",d=v=="strong"?"em_state":"strong_state";function f(g){this.len_after=g,this.name="close_"+c}return function(g,w){if(this[h][0]==c)return this[h].shift(),[g.length,new f(g.length-c.length)];var k=this[d].slice(),T=this[h].slice();this[h].unshift(c);var C=this.processInline(g.substr(c.length)),K=C[C.length-1];if(this[h].shift(),K instanceof f){C.pop();var R=g.length-K.len_after;return[R,[v].concat(C)]}else return this[d]=k,this[h]=T,[c.length,c]}}n.dialects.Gruber.inline["**"]=s("strong","**"),n.dialects.Gruber.inline.__=s("strong","__"),n.dialects.Gruber.inline["*"]=s("em","*"),n.dialects.Gruber.inline._=s("em","_"),n.buildBlockOrder=function(v){var c=[];for(var h in v)h=="__order__"||h=="__call__"||c.push(h);v.__order__=c},n.buildInlinePatterns=function(v){var c=[];for(var h in v)if(!h.match(/^__.*__$/)){var d=h.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");c.push(h.length==1?d:"(?:"+d+")")}c=c.join("|"),v.__patterns__=c;var f=v.__call__;v.__call__=function(g,w){return w!=null?f.call(this,g,w):f.call(this,g,c)}},n.DialectHelpers={},n.DialectHelpers.inline_until_char=function(v,c){for(var h=0,d=[];;){if(v.charAt(h)==c)return h++,[h,d];if(h>=v.length)return null;var f=this.dialect.inline.__oneElement__.call(this,v.substr(h));h+=f[0],d.push.apply(d,f.slice(1))}},n.subclassDialect=function(v){function c(){}c.prototype=v.block;function h(){}return h.prototype=v.inline,{block:new c,inline:new h}},n.buildBlockOrder(n.dialects.Gruber.block),n.buildInlinePatterns(n.dialects.Gruber.inline),n.dialects.Maruku=n.subclassDialect(n.dialects.Gruber),n.dialects.Maruku.processMetaHash=function(c){for(var h=l(c),d={},f=0;f<h.length;++f)if(/^#/.test(h[f]))d.id=h[f].substring(1);else if(/^\./.test(h[f]))d.class?d.class=d.class+h[f].replace(/./," "):d.class=h[f].substring(1);else if(/\=/.test(h[f])){var g=h[f].split(/\=/);d[g[0]]=g[1]}return d};function l(v){for(var c=v.split(""),h=[""],d=!1;c.length;){var f=c.shift();switch(f){case" ":d?h[h.length-1]+=f:h.push("");break;case"'":case'"':d=!d;break;case"\\":f=c.shift();default:h[h.length-1]+=f;break}}return h}n.dialects.Maruku.block.document_meta=function(c,h){if(!(c.lineNumber>1)&&!!c.match(/^(?:\w+:.*\n)*\w+:.*$/)){b(this.tree)||this.tree.splice(1,0,{});var d=c.split(/\n/);for(p in d){var f=d[p].match(/(\w+):\s*(.*)$/),g=f[1].toLowerCase(),w=f[2];this.tree[1][g]=w}return[]}},n.dialects.Maruku.block.block_meta=function(c,h){var d=c.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!!d){var f=this.dialect.processMetaHash(d[2]),g;if(d[1]===""){var w=this.tree[this.tree.length-1];if(g=b(w),typeof w=="string")return;g||(g={},w.splice(1,0,g));for(a in f)g[a]=f[a];return[]}var k=c.replace(/\n.*$/,""),T=this.processBlock(k,[]);g=b(T[0]),g||(g={},T[0].splice(1,0,g));for(a in f)g[a]=f[a];return T}},n.dialects.Maruku.block.definition_list=function(c,h){var d=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,f=["dl"],g,w;if(w=c.match(d)){for(var k=[c];h.length&&d.exec(h[0]);)k.push(h.shift());for(var T=0;T<k.length;++T){var w=k[T].match(d),C=w[1].replace(/\n$/,"").split(/\n/),K=w[2].split(/\n:\s+/);for(g=0;g<C.length;++g)f.push(["dt",C[g]]);for(g=0;g<K.length;++g)f.push(["dd"].concat(this.processInline(K[g].replace(/(\n)\s+/,"$1"))))}}else return;return[f]},n.dialects.Maruku.block.table=function(c,h){var d=function(K,R){R=R||"\\s",R.match(/^[\\|\[\]{}?*.+^$]$/)&&(R="\\"+R);for(var M=[],D=new RegExp("^((?:\\\\.|[^\\\\"+R+"])*)"+R+"(.*)"),I;I=K.match(D);)M.push(I[1]),K=I[2];return M.push(K),M},f=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,g=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/,w,k;if(k=c.match(f))k[3]=k[3].replace(/^\s*\|/gm,"");else if(!(k=c.match(g)))return;var T=["table",["thead",["tr"]],["tbody"]];k[2]=k[2].replace(/\|\s*$/,"").split("|");var C=[];for(m(k[2],function(K){K.match(/^\s*-+:\s*$/)?C.push({align:"right"}):K.match(/^\s*:-+\s*$/)?C.push({align:"left"}):K.match(/^\s*:-+:\s*$/)?C.push({align:"center"}):C.push({})}),k[1]=d(k[1].replace(/\|\s*$/,""),"|"),w=0;w<k[1].length;w++)T[1][1].push(["th",C[w]||{}].concat(this.processInline(k[1][w].trim())));return m(k[3].replace(/\|\s*$/mg,"").split(`
`),function(K){var R=["tr"];for(K=d(K,"|"),w=0;w<K.length;w++)R.push(["td",C[w]||{}].concat(this.processInline(K[w].trim())));T[2].push(R)},this),[T]},n.dialects.Maruku.inline["{:"]=function(c,h,d){if(!d.length)return[2,"{:"];var f=d[d.length-1];if(typeof f=="string")return[2,"{:"];var g=c.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!g)return[2,"{:"];var w=this.dialect.processMetaHash(g[1]),k=b(f);k||(k={},f.splice(1,0,k));for(var T in w)k[T]=w[T];return[g[0].length,""]},n.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,n.buildBlockOrder(n.dialects.Maruku.block),n.buildInlinePatterns(n.dialects.Maruku.inline);var y=Array.isArray||function(v){return Object.prototype.toString.call(v)=="[object Array]"},m;Array.prototype.forEach?m=function(v,c,h){return v.forEach(c,h)}:m=function(v,c,h){for(var d=0;d<v.length;d++)c.call(h||v,v[d],d,v)};var _=function(v){for(var c in v)if(hasOwnProperty.call(v,c))return!1;return!0};function b(v){return y(v)&&v.length>1&&typeof v[1]=="object"&&!y(v[1])?v[1]:void 0}t.renderJsonML=function(v,c){c=c||{},c.root=c.root||!1;var h=[];if(c.root)h.push(E(v));else for(v.shift(),v.length&&typeof v[0]=="object"&&!(v[0]instanceof Array)&&v.shift();v.length;)h.push(E(v.shift()));return h.join(`

`)};function S(v){return v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function E(v){if(typeof v=="string")return S(v);var c=v.shift(),h={},d=[];for(v.length&&typeof v[0]=="object"&&!(v[0]instanceof Array)&&(h=v.shift());v.length;)d.push(E(v.shift()));var f="";for(var g in h)f+=" "+g+'="'+S(h[g])+'"';return c=="img"||c=="br"||c=="hr"?"<"+c+f+"/>":"<"+c+f+">"+d.join("")+"</"+c+">"}function x(v,c,h){var d;h=h||{};var f=v.slice(0);typeof h.preprocessTreeNode=="function"&&(f=h.preprocessTreeNode(f,c));var g=b(f);if(g){f[1]={};for(d in g)f[1][d]=g[d];g=f[1]}if(typeof f=="string")return f;switch(f[0]){case"header":f[0]="h"+f[1].level,delete f[1].level;break;case"bulletlist":f[0]="ul";break;case"numberlist":f[0]="ol";break;case"listitem":f[0]="li";break;case"para":f[0]="p";break;case"markdown":f[0]="html",g&&delete g.references;break;case"code_block":f[0]="pre",d=g?2:1;var w=["code"];w.push.apply(w,f.splice(d,f.length-d)),f[d]=w;break;case"inlinecode":f[0]="code";break;case"img":f[1].src=f[1].href,delete f[1].href;break;case"linebreak":f[0]="br";break;case"link":f[0]="a";break;case"link_ref":f[0]="a";var k=c[g.ref];if(k)delete g.ref,g.href=k.href,k.title&&(g.title=k.title),delete g.original;else return g.original;break;case"img_ref":f[0]="img";var k=c[g.ref];if(k)delete g.ref,g.src=k.href,k.title&&(g.title=k.title),delete g.original;else return g.original;break}if(d=1,g){for(var T in f[1]){d=2;break}d===1&&f.splice(d,1)}for(;d<f.length;++d)f[d]=x(f[d],c,h);return f}function A(v){for(var c=b(v)?2:1;c<v.length;)typeof v[c]=="string"?c+1<v.length&&typeof v[c+1]=="string"?v[c]+=v.splice(c+1,1)[0]:++c:(A(v[c]),++c)}})(function(){return e}())})(wi);(function(e){e.markdown=wi,e.parse=e.markdown.toHTML})(Bu);export{Bu as A,et as B,Zu as C,_i as D,eo as E,Vu as F,uo as G,Gu as H,$i as I,Ni as J,ia as K,ao as S,Wu as a,qu as b,zu as c,Ai as d,Ri as e,Ti as f,Nu as g,Uu as h,io as i,ju as j,Mr as k,ji as l,to as m,st as n,ro as o,Hi as p,Yu as q,no as r,$u as s,Ju as t,Hu as u,Ui as v,Qu as w,je as x,Dr as y,Xu as z};
