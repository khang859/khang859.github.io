var Ni=Object.defineProperty;var gr=Object.getOwnPropertySymbols;var $i=Object.prototype.hasOwnProperty,ji=Object.prototype.propertyIsEnumerable;var yr=(e,t,n)=>t in e?Ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ce=(e,t)=>{for(var n in t||(t={}))$i.call(t,n)&&yr(e,n,t[n]);if(gr)for(var n of gr(t))ji.call(t,n)&&yr(e,n,t[n]);return e};function jr(){}function Hi(e,t){for(const n in t)e[n]=t[n];return e}function Ui(e){return e&&typeof e=="object"&&typeof e.then=="function"}function Hr(e){return e()}function mr(){return Object.create(null)}function ft(e){e.forEach(Hr)}function zi(e){return typeof e=="function"}function $o(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Vi(e){return Object.keys(e).length===0}function jo(e,t,n,r){if(e){const i=Ur(e,t,n,r);return e[0](i)}}function Ur(e,t,n,r){return e[1]&&r?Hi(n.ctx.slice(),e[1](r(t))):n.ctx}function Ho(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(t.dirty.length,i.length);for(let u=0;u<o;u+=1)s[u]=t.dirty[u]|i[u];return s}return t.dirty|i}return t.dirty}function Uo(e,t,n,r,i,s){if(i){const o=Ur(t,n,r,s);e.p(o,i)}}function zo(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Vo(e,t){e.appendChild(t)}function Wo(e,t,n){e.insertBefore(t,n||null)}function Wi(e){e.parentNode.removeChild(e)}function Go(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Yo(e){return document.createElement(e)}function zr(e){return document.createTextNode(e)}function Xo(){return zr(" ")}function Qo(){return zr("")}function Jo(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function qo(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Zo(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Gi(e){return Array.from(e.childNodes)}function eu(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function tu(e,t){e.value=t==null?"":t}function nu(e,t,n){e.classList[n?"add":"remove"](t)}let rt;function pe(e){rt=e}function Yi(){if(!rt)throw new Error("Function called outside component initialization");return rt}const Je=[],_r=[],Ct=[],br=[],Xi=Promise.resolve();let ln=!1;function Qi(){ln||(ln=!0,Xi.then(zn))}function fn(e){Ct.push(e)}const en=new Set;let xt=0;function zn(){const e=rt;do{for(;xt<Je.length;){const t=Je[xt];xt++,pe(t),Ji(t.$$)}for(pe(null),Je.length=0,xt=0;_r.length;)_r.pop()();for(let t=0;t<Ct.length;t+=1){const n=Ct[t];en.has(n)||(en.add(n),n())}Ct.length=0}while(Je.length);for(;br.length;)br.pop()();ln=!1,en.clear(),pe(e)}function Ji(e){if(e.fragment!==null){e.update(),ft(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(fn)}}const Tt=new Set;let Oe;function qi(){Oe={r:0,c:[],p:Oe}}function Zi(){Oe.r||ft(Oe.c),Oe=Oe.p}function Vr(e,t){e&&e.i&&(Tt.delete(e),e.i(t))}function ea(e,t,n,r){if(e&&e.o){if(Tt.has(e))return;Tt.add(e),Oe.c.push(()=>{Tt.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function ru(e,t){const n=t.token={};function r(i,s,o,u){if(t.token!==n)return;t.resolved=u;let c=t.ctx;o!==void 0&&(c=c.slice(),c[o]=u);const d=i&&(t.current=i)(c);let y=!1;t.block&&(t.blocks?t.blocks.forEach((_,b)=>{b!==s&&_&&(qi(),ea(_,1,1,()=>{t.blocks[b]===_&&(t.blocks[b]=null)}),Zi())}):t.block.d(1),d.c(),Vr(d,1),d.m(t.mount(),t.anchor),y=!0),t.block=d,t.blocks&&(t.blocks[s]=d),y&&zn()}if(Ui(e)){const i=Yi();if(e.then(s=>{pe(i),r(t.then,1,t.value,s),pe(null)},s=>{if(pe(i),r(t.catch,2,t.error,s),pe(null),!t.hasCatch)throw s}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function iu(e,t,n){const r=t.slice(),{resolved:i}=e;e.current===e.then&&(r[e.value]=i),e.current===e.catch&&(r[e.error]=i),e.block.p(r,n)}function au(e){e&&e.c()}function ta(e,t,n,r){const{fragment:i,on_mount:s,on_destroy:o,after_update:u}=e.$$;i&&i.m(t,n),r||fn(()=>{const c=s.map(Hr).filter(zi);o?o.push(...c):ft(c),e.$$.on_mount=[]}),u.forEach(fn)}function na(e,t){const n=e.$$;n.fragment!==null&&(ft(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ra(e,t){e.$$.dirty[0]===-1&&(Je.push(e),Qi(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function su(e,t,n,r,i,s,o,u=[-1]){const c=rt;pe(e);const d=e.$$={fragment:null,ctx:null,props:s,update:jr,not_equal:i,bound:mr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:mr(),dirty:u,skip_bound:!1,root:t.target||c.$$.root};o&&o(d.root);let y=!1;if(d.ctx=n?n(e,t.props||{},(_,b,...A)=>{const E=A.length?A[0]:b;return d.ctx&&i(d.ctx[_],d.ctx[_]=E)&&(!d.skip_bound&&d.bound[_]&&d.bound[_](E),y&&ra(e,_)),b}):[],d.update(),y=!0,ft(d.before_update),d.fragment=r?r(d.ctx):!1,t.target){if(t.hydrate){const _=Gi(t.target);d.fragment&&d.fragment.l(_),_.forEach(Wi)}else d.fragment&&d.fragment.c();t.intro&&Vr(e.$$.fragment),ta(e,t.target,t.anchor,t.customElement),zn()}pe(c)}class ou{$destroy(){na(this,1),this.$destroy=jr}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Vi(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var hn=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},ht=Xr,ia=Vn,aa=ca,sa=Wr,oa=Yr,ua=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Vn(e){for(var t=[],n=0,r=0,i="",s;(s=ua.exec(e))!=null;){var o=s[0],u=s[1],c=s.index;if(i+=e.slice(r,c),r=c+o.length,u){i+=u[1];continue}i&&(t.push(i),i="");var d=s[2],y=s[3],_=s[4],b=s[5],A=s[6],E=s[7],x=A==="+"||A==="*",S=A==="?"||A==="*",g=d||"/",l=_||b||(E?".*":"[^"+g+"]+?");t.push({name:y||n++,prefix:d||"",delimiter:g,optional:S,repeat:x,pattern:la(l)})}return r<e.length&&(i+=e.substr(r)),i&&t.push(i),t}function ca(e){return Wr(Vn(e))}function Wr(e){for(var t=new Array(e.length),n=0;n<e.length;n++)typeof e[n]=="object"&&(t[n]=new RegExp("^"+e[n].pattern+"$"));return function(r){for(var i="",s=r||{},o=0;o<e.length;o++){var u=e[o];if(typeof u=="string"){i+=u;continue}var c=s[u.name],d;if(c==null){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to be defined')}if(hn(c)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received "'+c+'"');if(c.length===0){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var y=0;y<c.length;y++){if(d=encodeURIComponent(c[y]),!t[o].test(d))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received "'+d+'"');i+=(y===0?u.prefix:u.delimiter)+d}continue}if(d=encodeURIComponent(c),!t[o].test(d))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+d+'"');i+=u.prefix+d}return i}}function wr(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function la(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Wn(e,t){return e.keys=t,e}function Gr(e){return e.sensitive?"":"i"}function fa(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return Wn(e,t)}function ha(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(Xr(e[i],t,n).source);var s=new RegExp("(?:"+r.join("|")+")",Gr(n));return Wn(s,t)}function da(e,t,n){for(var r=Vn(e),i=Yr(r,n),s=0;s<r.length;s++)typeof r[s]!="string"&&t.push(r[s]);return Wn(i,t)}function Yr(e,t){t=t||{};for(var n=t.strict,r=t.end!==!1,i="",s=e[e.length-1],o=typeof s=="string"&&/\/$/.test(s),u=0;u<e.length;u++){var c=e[u];if(typeof c=="string")i+=wr(c);else{var d=wr(c.prefix),y=c.pattern;c.repeat&&(y+="(?:"+d+y+")*"),c.optional?d?y="(?:"+d+"("+y+"))?":y="("+y+")?":y=d+"("+y+")",i+=y}}return n||(i=(o?i.slice(0,-2):i)+"(?:\\/(?=$))?"),r?i+="$":i+=n&&o?"":"(?=\\/|$)",new RegExp("^"+i,Gr(t))}function Xr(e,t,n){return t=t||[],hn(t)?n||(n={}):(n=t,t=[]),e instanceof RegExp?fa(e,t):hn(e)?ha(e,t,n):da(e,t,n)}ht.parse=ia;ht.compile=aa;ht.tokensToFunction=sa;ht.tokensToRegExp=oa;var Ve=typeof document!="undefined",ae=typeof window!="undefined",Yt=typeof history!="undefined",pa=typeof process!="undefined",dn=Ve&&document.ontouchstart?"touchstart":"click",ge=ae&&!!(window.history.location||window.location);function z(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}z.prototype.configure=function(e){var t=e||{};this._window=t.window||ae&&window,this._decodeURLComponents=t.decodeURLComponents!==!1,this._popstate=t.popstate!==!1&&ae,this._click=t.click!==!1&&Ve,this._hashbang=!!t.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):ae&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener(dn,this.clickHandler,!1):Ve&&n.document.removeEventListener(dn,this.clickHandler,!1),this._hashbang&&ae&&!Yt?n.addEventListener("hashchange",this._onpopstate,!1):ae&&n.removeEventListener("hashchange",this._onpopstate,!1)};z.prototype.base=function(e){if(arguments.length===0)return this._base;this._base=e};z.prototype._getBase=function(){var e=this._base;if(e)return e;var t=ae&&this._window&&this._window.location;return ae&&this._hashbang&&t&&t.protocol==="file:"&&(e=t.pathname),e};z.prototype.strict=function(e){if(arguments.length===0)return this._strict;this._strict=e};z.prototype.start=function(e){var t=e||{};if(this.configure(t),t.dispatch!==!1){this._running=!0;var n;if(ge){var r=this._window,i=r.location;this._hashbang&&~i.hash.indexOf("#!")?n=i.hash.substr(2)+i.search:this._hashbang?n=i.search+i.hash:n=i.pathname+i.search+i.hash}this.replace(n,null,!0,t.dispatch)}};z.prototype.stop=function(){if(!!this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(dn,this.clickHandler,!1),ae&&e.removeEventListener("popstate",this._onpopstate,!1),ae&&e.removeEventListener("hashchange",this._onpopstate,!1)}};z.prototype.show=function(e,t,n,r){var i=new dt(e,t,this),s=this.prevContext;return this.prevContext=i,this.current=i.path,n!==!1&&this.dispatch(i,s),i.handled!==!1&&r!==!1&&i.pushState(),i};z.prototype.back=function(e,t){var n=this;if(this.len>0){var r=this._window;Yt&&r.history.back(),this.len--}else setTimeout(e?function(){n.show(e,t)}:function(){n.show(n._getBase(),t)})};z.prototype.redirect=function(e,t){var n=this;typeof e=="string"&&typeof t=="string"&&Xt.call(this,e,function(r){setTimeout(function(){n.replace(t)},0)}),typeof e=="string"&&typeof t=="undefined"&&setTimeout(function(){n.replace(e)},0)};z.prototype.replace=function(e,t,n,r){var i=new dt(e,t,this),s=this.prevContext;return this.prevContext=i,this.current=i.path,i.init=n,i.save(),r!==!1&&this.dispatch(i,s),i};z.prototype.dispatch=function(e,t){var n=0,r=0,i=this;function s(){var u=i.exits[r++];if(!u)return o();u(t,s)}function o(){var u=i.callbacks[n++];if(e.path!==i.current){e.handled=!1;return}if(!u)return va.call(i,e);u(e,o)}t?s():o()};z.prototype.exit=function(e,t){if(typeof e=="function")return this.exit("*",e);for(var n=new pt(e,null,this),r=1;r<arguments.length;++r)this.exits.push(n.middleware(arguments[r]))};z.prototype.clickHandler=function(e){if(this._which(e)===1&&!(e.metaKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented){var t=e.target,n=e.path||(e.composedPath?e.composedPath():null);if(n){for(var r=0;r<n.length;r++)if(!!n[r].nodeName&&n[r].nodeName.toUpperCase()==="A"&&!!n[r].href){t=n[r];break}}for(;t&&t.nodeName.toUpperCase()!=="A";)t=t.parentNode;if(!(!t||t.nodeName.toUpperCase()!=="A")){var i=typeof t.href=="object"&&t.href.constructor.name==="SVGAnimatedString";if(!(t.hasAttribute("download")||t.getAttribute("rel")==="external")){var s=t.getAttribute("href");if(!(!this._hashbang&&this._samePath(t)&&(t.hash||s==="#"))&&!(s&&s.indexOf("mailto:")>-1)&&!(i?t.target.baseVal:t.target)&&!(!i&&!this.sameOrigin(t.href))){var o=i?t.href.baseVal:t.pathname+t.search+(t.hash||"");o=o[0]!=="/"?"/"+o:o,pa&&o.match(/^\/[a-zA-Z]:\//)&&(o=o.replace(/^\/[a-zA-Z]:\//,"/"));var u=o,c=this._getBase();o.indexOf(c)===0&&(o=o.substr(c.length)),this._hashbang&&(o=o.replace("#!","")),!(c&&u===o&&(!ge||this._window.location.protocol!=="file:"))&&(e.preventDefault(),this.show(u))}}}}};z.prototype._onpopstate=function(){var e=!1;return ae?(Ve&&document.readyState==="complete"?e=!0:window.addEventListener("load",function(){setTimeout(function(){e=!0},0)}),function(n){if(!!e){var r=this;if(n.state){var i=n.state.path;r.replace(i,n.state)}else if(ge){var s=r._window.location;r.show(s.pathname+s.search+s.hash,void 0,void 0,!1)}}}):function(){}}();z.prototype._which=function(e){return e=e||ae&&this._window.event,e.which==null?e.button:e.which};z.prototype._toURL=function(e){var t=this._window;if(typeof URL=="function"&&ge)return new URL(e,t.location.toString());if(Ve){var n=t.document.createElement("a");return n.href=e,n}};z.prototype.sameOrigin=function(e){if(!e||!ge)return!1;var t=this._toURL(e),n=this._window,r=n.location;return r.protocol===t.protocol&&r.hostname===t.hostname&&(r.port===t.port||r.port===""&&(t.port==80||t.port==443))};z.prototype._samePath=function(e){if(!ge)return!1;var t=this._window,n=t.location;return e.pathname===n.pathname&&e.search===n.search};z.prototype._decodeURLEncodedURIComponent=function(e){return typeof e!="string"?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e};function Qr(){var e=new z;function t(){return Xt.apply(e,arguments)}return t.callbacks=e.callbacks,t.exits=e.exits,t.base=e.base.bind(e),t.strict=e.strict.bind(e),t.start=e.start.bind(e),t.stop=e.stop.bind(e),t.show=e.show.bind(e),t.back=e.back.bind(e),t.redirect=e.redirect.bind(e),t.replace=e.replace.bind(e),t.dispatch=e.dispatch.bind(e),t.exit=e.exit.bind(e),t.configure=e.configure.bind(e),t.sameOrigin=e.sameOrigin.bind(e),t.clickHandler=e.clickHandler.bind(e),t.create=Qr,Object.defineProperty(t,"len",{get:function(){return e.len},set:function(n){e.len=n}}),Object.defineProperty(t,"current",{get:function(){return e.current},set:function(n){e.current=n}}),t.Context=dt,t.Route=pt,t}function Xt(e,t){if(typeof e=="function")return Xt.call(this,"*",e);if(typeof t=="function")for(var n=new pt(e,null,this),r=1;r<arguments.length;++r)this.callbacks.push(n.middleware(arguments[r]));else typeof e=="string"?this[typeof t=="string"?"redirect":"show"](e,t):this.start(e)}function va(e){if(!e.handled){var t,n=this,r=n._window;n._hashbang?t=ge&&this._getBase()+r.location.hash.replace("#!",""):t=ge&&r.location.pathname+r.location.search,t!==e.canonicalPath&&(n.stop(),e.handled=!1,ge&&(r.location.href=e.canonicalPath))}}function ga(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function dt(e,t,n){var r=this.page=n||Xt,i=r._window,s=r._hashbang,o=r._getBase();e[0]==="/"&&e.indexOf(o)!==0&&(e=o+(s?"#!":"")+e);var u=e.indexOf("?");this.canonicalPath=e;var c=new RegExp("^"+ga(o));if(this.path=e.replace(c,"")||"/",s&&(this.path=this.path.replace("#!","")||"/"),this.title=Ve&&i.document.title,this.state=t||{},this.state.path=e,this.querystring=~u?r._decodeURLEncodedURIComponent(e.slice(u+1)):"",this.pathname=r._decodeURLEncodedURIComponent(~u?e.slice(0,u):e),this.params={},this.hash="",!s){if(!~this.path.indexOf("#"))return;var d=this.path.split("#");this.path=this.pathname=d[0],this.hash=r._decodeURLEncodedURIComponent(d[1])||"",this.querystring=this.querystring.split("#")[0]}}dt.prototype.pushState=function(){var e=this.page,t=e._window,n=e._hashbang;e.len++,Yt&&t.history.pushState(this.state,this.title,n&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};dt.prototype.save=function(){var e=this.page;Yt&&e._window.history.replaceState(this.state,this.title,e._hashbang&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};function pt(e,t,n){var r=this.page=n||Gn,i=t||{};i.strict=i.strict||r._strict,this.path=e==="*"?"(.*)":e,this.method="GET",this.regexp=ht(this.path,this.keys=[],i)}pt.prototype.middleware=function(e){var t=this;return function(n,r){if(t.match(n.path,n.params))return n.routePath=t.path,e(n,r);r()}};pt.prototype.match=function(e,t){var n=this.keys,r=e.indexOf("?"),i=~r?e.slice(0,r):e,s=this.regexp.exec(decodeURIComponent(i));if(!s)return!1;delete t[0];for(var o=1,u=s.length;o<u;++o){var c=n[o-1],d=this.page._decodeURLEncodedURIComponent(s[o]);(d!==void 0||!hasOwnProperty.call(t,c.name))&&(t[c.name]=d)}return!0};var Gn=Qr(),ya=Gn,ma=Gn;ya.default=ma;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F=function(){return F=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},F.apply(this,arguments)};function pn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var j=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,U=Object.keys,Q=Array.isArray;typeof Promise!="undefined"&&!j.Promise&&(j.Promise=Promise);function ee(e,t){return typeof t!="object"||U(t).forEach(function(n){e[n]=t[n]}),e}var it=Object.getPrototypeOf,_a={}.hasOwnProperty;function se(e,t){return _a.call(e,t)}function We(e,t){typeof t=="function"&&(t=t(it(e))),(typeof Reflect=="undefined"?U:Reflect.ownKeys)(t).forEach(function(n){_e(e,n,t[n])})}var Jr=Object.defineProperty;function _e(e,t,n,r){Jr(e,t,ee(n&&se(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ge(e){return{from:function(t){return e.prototype=Object.create(t.prototype),_e(e.prototype,"constructor",e),{extend:We.bind(null,e.prototype)}}}}var ba=Object.getOwnPropertyDescriptor;function Yn(e,t){var n=ba(e,t),r;return n||(r=it(e))&&Yn(r,t)}var wa=[].slice;function Qt(e,t,n){return wa.call(e,t,n)}function qr(e,t){return t(e)}function qe(e){if(!e)throw new Error("Assertion Failed")}function Zr(e){j.setImmediate?setImmediate(e):setTimeout(e,0)}function ei(e,t){return e.reduce(function(n,r,i){var s=t(r,i);return s&&(n[s[0]]=s[1]),n},{})}function Ea(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function ye(e,t){if(se(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var s=ye(e,t[r]);n.push(s)}return n}var o=t.indexOf(".");if(o!==-1){var u=e[t.substr(0,o)];return u===void 0?void 0:ye(u,t.substr(o+1))}}function ue(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){qe(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)ue(e,t[r],n[r])}else{var s=t.indexOf(".");if(s!==-1){var o=t.substr(0,s),u=t.substr(s+1);if(u==="")n===void 0?Q(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var c=e[o];c||(c=e[o]={}),ue(c,u,n)}}else n===void 0?Q(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function xa(e,t){typeof t=="string"?ue(e,t,void 0):"length"in t&&[].map.call(t,function(n){ue(e,n,void 0)})}function ti(e){var t={};for(var n in e)se(e,n)&&(t[n]=e[n]);return t}var ka=[].concat;function ni(e){return ka.apply([],e)}var ri="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ni([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return j[e]}),Aa=ri.map(function(e){return j[e]});ei(ri,function(e){return[e,!0]});var ke=null;function vt(e){ke=typeof WeakMap!="undefined"&&new WeakMap;var t=vn(e);return ke=null,t}function vn(e){if(!e||typeof e!="object")return e;var t=ke&&ke.get(e);if(t)return t;if(Q(e)){t=[],ke&&ke.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(vn(e[n]))}else if(Aa.indexOf(e.constructor)>=0)t=e;else{var i=it(e);t=i===Object.prototype?{}:Object.create(i),ke&&ke.set(e,t);for(var s in e)se(e,s)&&(t[s]=vn(e[s]))}return t}var Sa={}.toString;function gn(e){return Sa.call(e).slice(8,-1)}var yn=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",Ma=typeof yn=="symbol"?function(e){var t;return e!=null&&(t=e[yn])&&t.apply(e)}:function(){return null},Ue={};function de(e){var t,n,r,i;if(arguments.length===1){if(Q(e))return e.slice();if(this===Ue&&typeof e=="string")return[e];if(i=Ma(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Xn=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},le=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ii(e,t){le=e,ai=t}var ai=function(){return!0},Ia=!new Error("").stack;function Ne(){if(Ia)try{throw Ne.arguments,new Error}catch(e){return e}return new Error}function mn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(ai).map(function(r){return`
`+r}).join("")):""}var Ra=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],si=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Qn=Ra.concat(si),Ca={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ye(e,t){this._e=Ne(),this.name=e,this.message=t}Ge(Ye).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+mn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function oi(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Ft(e,t,n,r){this._e=Ne(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=oi(e,t)}Ge(Ft).from(Ye);function et(e,t){this._e=Ne(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=oi(e,t)}Ge(et).from(Ye);var Jn=Qn.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ta=Ye,D=Qn.reduce(function(e,t){var n=t+"Error";function r(i,s){this._e=Ne(),this.name=n,i?typeof i=="string"?(this.message=""+i+(s?`
 `+s:""),this.inner=s||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=Ca[t]||n,this.inner=null)}return Ge(r).from(Ta),e[t]=r,e},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var Er=si.reduce(function(e,t){return e[t+"Error"]=D[t],e},{});function Ka(e,t){if(!e||e instanceof Ye||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Er[e.name])return e;var n=new Er[e.name](t||e.message,e);return"stack"in e&&_e(n,"stack",{get:function(){return this.inner.stack}}),n}var Jt=Qn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=D[t]),e},{});Jt.ModifyError=Ft;Jt.DexieError=Ye;Jt.BulkError=et;function $(){}function gt(e){return e}function Oa(e,t){return e==null||e===gt?t:function(n){return t(e(n))}}function Le(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Pa(e,t){return e===$?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Le(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Le(i,this.onerror):i),s!==void 0?s:n}}function Da(e,t){return e===$?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Le(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Le(r,this.onerror):r)}}function Ba(e,t){return e===$?t:function(n){var r=e.apply(this,arguments);ee(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Le(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Le(s,this.onerror):s),r===void 0?o===void 0?void 0:o:ee(r,o)}}function La(e,t){return e===$?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function qn(e,t){return e===$?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return t.apply(r,s)})}return t.apply(this,arguments)}}var at={},Fa=100,Na=20,ui=100,Zn=typeof Promise=="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,it(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,it(t),e]}(),_n=Zn[0],Nt=Zn[1],bn=Zn[2],ci=Nt&&Nt.then,Kt=_n&&_n.constructor,er=!!bn,wn=!1,$a=bn?function(){bn.then(kt)}:j.setImmediate?setImmediate.bind(null,kt):j.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){kt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(kt,0)},st=function(e,t){Ze.push([e,t]),$t&&($a(),$t=!1)},En=!0,$t=!0,De=[],Ot=[],xn=null,kn=gt,ze={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ar,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{Ar(e[0],e[1])}catch{}})}},P=ze,Ze=[],Be=0,Pt=[];function O(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=$,this._lib=!1;var t=this._PSD=P;if(le&&(this._stackHolder=Ne(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==at)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Sn(this,this._value);return}this._state=null,this._value=null,++t.ref,fi(this,e)}var An={get:function(){var e=P,t=jt;function n(r,i){var s=this,o=!e.global&&(e!==P||t!==jt),u=o&&!be(),c=new O(function(d,y){tr(s,new li(Ut(r,e,o,u),Ut(i,e,o,u),d,y,e))});return le&&pi(c,this),c}return n.prototype=at,n},set:function(e){_e(this,"then",e&&e.prototype===at?An:{get:function(){return e},set:An.set})}};We(O.prototype,{then:An,_then:function(e,t){tr(this,new li(null,null,e,t,P))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Dt(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Dt(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Dt(t)})},stack:{get:function(){if(this._stack)return this._stack;try{wn=!0;var e=di(this,[],Na),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{wn=!1}}},timeout:function(e,t){var n=this;return e<1/0?new O(function(r,i){var s=setTimeout(function(){return i(new D.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,s))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&_e(O.prototype,Symbol.toStringTag,"Dexie.Promise");ze.env=vi();function li(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}We(O,{all:function(){var e=de.apply(null,arguments).map(Ht);return new O(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,s){return O.resolve(i).then(function(o){e[s]=o,--r||t(e)},n)})})},resolve:function(e){if(e instanceof O)return e;if(e&&typeof e.then=="function")return new O(function(n,r){e.then(n,r)});var t=new O(at,!0,e);return pi(t,xn),t},reject:Dt,race:function(){var e=de.apply(null,arguments).map(Ht);return new O(function(t,n){e.map(function(r){return O.resolve(r).then(t,n)})})},PSD:{get:function(){return P},set:function(e){return P=e}},totalEchoes:{get:function(){return jt}},newPSD:Se,usePSD:Qe,scheduler:{get:function(){return st},set:function(e){st=e}},rejectionMapper:{get:function(){return kn},set:function(e){kn=e}},follow:function(e,t){return new O(function(n,r){return Se(function(i,s){var o=P;o.unhandleds=[],o.onunhandled=s,o.finalize=Le(function(){var u=this;Ha(function(){u.unhandleds.length===0?i():s(u.unhandleds[0])})},o.finalize),e()},t,n,r)})}});Kt&&(Kt.allSettled&&_e(O,"allSettled",function(){var e=de.apply(null,arguments).map(Ht);return new O(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,s){return O.resolve(i).then(function(o){return r[s]={status:"fulfilled",value:o}},function(o){return r[s]={status:"rejected",reason:o}}).then(function(){return--n||t(r)})})})}),Kt.any&&typeof AggregateError!="undefined"&&_e(O,"any",function(){var e=de.apply(null,arguments).map(Ht);return new O(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(s,o){return O.resolve(s).then(function(u){return t(u)},function(u){i[o]=u,--r||n(new AggregateError(i))})})})}));function fi(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&yt();n&&typeof n.then=="function"?fi(e,function(i,s){n instanceof O?n._then(i,s):n.then(i,s)}):(e._state=!0,e._value=n,hi(e)),r&&mt()}},Sn.bind(null,e))}catch(n){Sn(e,n)}}function Sn(e,t){if(Ot.push(t),e._state===null){var n=e._lib&&yt();t=kn(t),e._state=!1,e._value=t,le&&t!==null&&typeof t=="object"&&!t._promise&&Ea(function(){var r=Yn(t,"stack");t._promise=e,_e(t,"stack",{get:function(){return wn?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),Ua(e),hi(e),n&&mt()}}function hi(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)tr(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Be===0&&(++Be,st(function(){--Be===0&&nr()},[]))}function tr(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Be,st(ja,[n,e,t])}function ja(e,t,n){try{xn=t;var r,i=t._value;t._state?r=e(i):(Ot.length&&(Ot=[]),r=e(i),Ot.indexOf(i)===-1&&za(t)),n.resolve(r)}catch(s){n.reject(s)}finally{xn=null,--Be===0&&nr(),--n.psd.ref||n.psd.finalize()}}function di(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,s,o;i!=null?(s=i.name||"Error",o=i.message||i,r=mn(i,0)):(s=i,o=""),t.push(s+(o?": "+o:"")+r)}return le&&(r=mn(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&di(e._prev,t,n)),t}function pi(e,t){var n=t?t._numPrev+1:0;n<Fa&&(e._prev=t,e._numPrev=n)}function kt(){yt()&&mt()}function yt(){var e=En;return En=!1,$t=!1,e}function mt(){var e,t,n;do for(;Ze.length>0;)for(e=Ze,Ze=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Ze.length>0);En=!0,$t=!0}function nr(){var e=De;De=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Pt.slice(0),n=t.length;n;)t[--n]()}function Ha(e){function t(){e(),Pt.splice(Pt.indexOf(t),1)}Pt.push(t),++Be,st(function(){--Be===0&&nr()},[])}function Ua(e){De.some(function(t){return t._value===e._value})||De.push(e)}function za(e){for(var t=De.length;t;)if(De[--t]._value===e._value){De.splice(t,1);return}}function Dt(e){return new O(at,!1,e)}function H(e,t){var n=P;return function(){var r=yt(),i=P;try{return Me(n,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{Me(i,!1),r&&mt()}}}var X={awaits:0,echoes:0,id:0},Va=0,Bt=[],tn=0,jt=0,Wa=0;function Se(e,t,n,r){var i=P,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++Wa;var o=ze.env;s.env=er?{Promise:O,PromiseProp:{value:O,configurable:!0,writable:!0},all:O.all,race:O.race,allSettled:O.allSettled,any:O.any,resolve:O.resolve,reject:O.reject,nthen:xr(o.nthen,s),gthen:xr(o.gthen,s)}:{},t&&ee(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=Qe(s,e,n,r);return s.ref===0&&s.finalize(),u}function Xe(){return X.id||(X.id=++Va),++X.awaits,X.echoes+=ui,X.id}function be(){return X.awaits?(--X.awaits===0&&(X.id=0),X.echoes=X.awaits*ui,!0):!1}(""+ci).indexOf("[native code]")===-1&&(Xe=be=$);function Ht(e){return X.echoes&&e&&e.constructor===Kt?(Xe(),e.then(function(t){return be(),t},function(t){return be(),W(t)})):e}function Ga(e){++jt,(!X.echoes||--X.echoes===0)&&(X.echoes=X.id=0),Bt.push(P),Me(e,!0)}function Ya(){var e=Bt[Bt.length-1];Bt.pop(),Me(e,!1)}function Me(e,t){var n=P;if((t?X.echoes&&(!tn++||e!==P):tn&&(!--tn||e!==P))&&gi(t?Ga.bind(null,e):Ya),e!==P&&(P=e,n===ze&&(ze.env=vi()),er)){var r=ze.env.Promise,i=e.env;Nt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(j,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function vi(){var e=j.Promise;return er?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(j,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Nt.then,gthen:e.prototype.then}:{}}function Qe(e,t,n,r,i){var s=P;try{return Me(e,!0),t(n,r,i)}finally{Me(s,!1)}}function gi(e){ci.call(_n,e)}function Ut(e,t,n,r){return typeof e!="function"?e:function(){var i=P;n&&Xe(),Me(t,!0);try{return e.apply(this,arguments)}finally{Me(i,!1),r&&gi(be)}}}function xr(e,t){return function(n,r){return e.call(this,Ut(n,t),Ut(r,t))}}var kr="unhandledrejection";function Ar(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(j.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(kr,!0,!0),ee(r,i)):j.CustomEvent&&(r=new CustomEvent(kr,{detail:i}),ee(r,i)),r&&j.dispatchEvent&&(dispatchEvent(r),!j.PromiseRejectionEvent&&j.onunhandledrejection))try{j.onunhandledrejection(r)}catch{}le&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var W=O.reject;function Mn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!P.letThrough&&!e._vip){if(e._state.openComplete)return W(new D.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return W(new D.DatabaseClosed);e.open().catch($)}return e._state.dbReadyPromise.then(function(){return Mn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===Jn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Mn(e,t,n,r)})):W(s)}return i._promise(t,function(s,o){return Se(function(){return P.trans=i,r(s,o,i)})}).then(function(s){return i._completion.then(function(){return s})})}}var Sr="3.2.1",Pe=String.fromCharCode(65535),In=-1/0,fe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yi="String expected.",tt=[],qt=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Xa=qt,Qa=qt,mi=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Zt="__dbnames",nn="readonly",rn="readwrite";function Fe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var _i={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function At(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=vt(t),delete t[e]),t}:function(t){return t}}var Ja=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||P.trans,s=this.name;function o(c,d,y){if(!y.schema[s])throw new D.NotFound("Table "+s+" not part of transaction");return n(y.idbtrans,y)}var u=yt();try{return i&&i.db===this.db?i===P.trans?i._promise(t,o,r):Se(function(){return i._promise(t,o,r)},{trans:i,transless:P.transless||P}):Mn(this.db,t,[this.name],o)}finally{u&&mt()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(s){return r.hook.reading.fire(s)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Q(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=U(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(y){return y.compound&&n.every(function(_){return y.keyPath.indexOf(_)>=0})&&y.keyPath.every(function(_){return n.indexOf(_)>=0})})[0];if(r&&this.db._maxKey!==Pe)return this.where(r.name).equals(r.keyPath.map(function(y){return t[y]}));!r&&le&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,s=this.db._deps.indexedDB;function o(y,_){try{return s.cmp(y,_)===0}catch{return!1}}var u=n.reduce(function(y,_){var b=y[0],A=y[1],E=i[_],x=t[_];return[b||E,b||!E?Fe(A,E&&E.multi?function(S){var g=ye(S,_);return Q(g)&&g.some(function(l){return o(x,l)})}:function(S){return o(x,ye(S,_))}):A]},[null,null]),c=u[0],d=u[1];return c?this.where(c.name).equals(t[c.keyPath]).filter(d):r?this.filter(d):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,Q(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var s in r)if(se(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){ee(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,s=i.auto,o=i.keyPath,u=t;return o&&s&&(u=At(o)(t)),this._trans("readwrite",function(c){return r.core.mutate({trans:c,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(c){return c.numFailures?O.reject(c.failures[0]):c.lastResult}).then(function(c){if(o)try{ue(t,o,c)}catch{}return c})},e.prototype.update=function(t,n){if(typeof t=="object"&&!Q(t)){var r=ye(t,this.schema.primKey.keyPath);if(r===void 0)return W(new D.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?U(n).forEach(function(i){ue(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,s=i.auto,o=i.keyPath,u=t;return o&&s&&(u=At(o)(t)),this._trans("readwrite",function(c){return r.core.mutate({trans:c,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(c){return c.numFailures?O.reject(c.failures[0]):c.lastResult}).then(function(c){if(o)try{ue(t,o,c)}catch{}return c})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?O.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:_i})}).then(function(n){return n.numFailures?O.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(s){return n.hook.reading.fire(s)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,s=Array.isArray(n)?n:void 0;r=r||(s?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var c=i.schema.primKey,d=c.auto,y=c.keyPath;if(y&&s)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var _=t.length,b=y&&d?t.map(At(y)):t;return i.core.mutate({trans:u,type:"add",keys:s,values:b,wantResults:o}).then(function(A){var E=A.numFailures,x=A.results,S=A.lastResult,g=A.failures,l=o?x:S;if(E===0)return l;throw new et(i.name+".bulkAdd(): "+E+" of "+_+" operations failed",g)})})},e.prototype.bulkPut=function(t,n,r){var i=this,s=Array.isArray(n)?n:void 0;r=r||(s?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var c=i.schema.primKey,d=c.auto,y=c.keyPath;if(y&&s)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var _=t.length,b=y&&d?t.map(At(y)):t;return i.core.mutate({trans:u,type:"put",keys:s,values:b,wantResults:o}).then(function(A){var E=A.numFailures,x=A.results,S=A.lastResult,g=A.failures,l=o?x:S;if(E===0)return l;throw new et(i.name+".bulkPut(): "+E+" of "+_+" operations failed",g)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var s=i.numFailures,o=i.lastResult,u=i.failures;if(s===0)return o;throw new et(n.name+".bulkDelete(): "+s+" of "+r+" operations failed",u)})},e}();function _t(e){var t={},n=function(u,c){if(c){for(var d=arguments.length,y=new Array(d-1);--d;)y[d-1]=arguments[d];return t[u].subscribe.apply(null,y),e}else if(typeof u=="string")return t[u]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(u,c,d){if(typeof u=="object")return o(u);c||(c=La),d||(d=$);var y={subscribers:[],fire:d,subscribe:function(_){y.subscribers.indexOf(_)===-1&&(y.subscribers.push(_),y.fire=c(y.fire,_))},unsubscribe:function(_){y.subscribers=y.subscribers.filter(function(b){return b!==_}),y.fire=y.subscribers.reduce(c,d)}};return t[u]=n[u]=y,y}function o(u){U(u).forEach(function(c){var d=u[c];if(Q(d))s(c,u[c][0],u[c][1]);else if(d==="asap")var y=s(c,gt,function(){for(var b=arguments.length,A=new Array(b);b--;)A[b]=arguments[b];y.subscribers.forEach(function(E){Zr(function(){E.apply(null,A)})})});else throw new D.InvalidArgument("Invalid event config")})}}function bt(e,t){return Ge(t).from({prototype:e}),t}function qa(e){return bt(Ja.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:_t(null,{creating:[Pa,$],reading:[Oa,gt],updating:[Ba,$],deleting:[Da,$]})})}function je(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function an(e,t){e.filter=Fe(e.filter,t)}function sn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Fe(r(),t())}:t,e.justLimit=n&&!r}function Za(e,t){e.isMatch=Fe(e.isMatch,t)}function Lt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new D.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Mr(e,t,n){var r=Lt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function St(e,t,n,r){var i=e.replayFilter?Fe(e.filter,e.replayFilter()):e.filter;if(e.or){var s={},o=function(u,c,d){if(!i||i(c,d,function(b){return c.stop(b)},function(b){return c.fail(b)})){var y=c.primaryKey,_=""+y;_==="[object ArrayBuffer]"&&(_=""+new Uint8Array(y)),se(s,_)||(s[_]=!0,t(u,c,d))}};return Promise.all([e.or._iterate(o,n),Ir(Mr(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}else return Ir(Mr(e,r,n),Fe(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Ir(e,t,n,r){var i=r?function(o,u,c){return n(r(o),u,c)}:n,s=H(i);return e.then(function(o){if(o)return o.start(function(){var u=function(){return o.continue()};(!t||t(o,function(c){return u=c},function(c){o.stop(c),u=$},function(c){o.fail(c),u=$}))&&s(o.value,o,function(c){return u=c}),u()})})}function Z(e,t){try{var n=Rr(e),r=Rr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return ts(Cr(e),Cr(t));case"Array":return es(e,t)}}catch{}return NaN}function es(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,s=0;s<i;++s){var o=Z(e[s],t[s]);if(o!==0)return o}return n===r?0:n<r?-1:1}function ts(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,s=0;s<i;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return n===r?0:n<r?-1:1}function Rr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=gn(e);return n==="ArrayBuffer"?"binary":n}function Cr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ns=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,W.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,W.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Fe(n.algorithm,t)},e.prototype._iterate=function(t,n){return St(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&ee(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return St(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,s=i.table.core;if(je(i,!0))return s.count({trans:r,query:{index:Lt(i,s.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var o=0;return St(i,function(){return++o,!1},r,s).then(function(){return o})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],s=r.length-1;function o(d,y){return y?o(d[r[y]],y-1):d[i]}var u=this._ctx.dir==="next"?1:-1;function c(d,y){var _=o(d,s),b=o(y,s);return _<b?-u:_>b?u:0}return this.toArray(function(d){return d.sort(c)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&je(i,!0)&&i.limit>0){var s=i.valueMapper,o=Lt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(c){var d=c.result;return s?d.map(s):d})}else{var u=[];return St(i,function(c){return u.push(c)},r,i.table.core).then(function(){return u})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,je(n)?sn(n,function(){var r=t;return function(i,s){return r===0?!0:r===1?(--r,!1):(s(function(){i.advance(r),r=0}),!1)}}):sn(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),sn(this._ctx,function(){var n=t;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this},e.prototype.until=function(t,n){return an(this._ctx,function(r,i,s){return t(r.value)?(i(s),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return an(this._ctx,function(n){return t(n.value)}),Za(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&je(n,!0)&&n.limit>0)return this._read(function(i){var s=Lt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(function(i){var s=i.result;return s}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return an(this._ctx,function(i){var s=i.primaryKey.toString(),o=se(r,s);return r[s]=!0,!o}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var s;if(typeof t=="function")s=t;else{var o=U(t),u=o.length;s=function(g){for(var l=!1,h=0;h<u;++h){var v=o[h],f=t[v];ye(g,v)!==f&&(ue(g,v,f),l=!0)}return l}}var c=r.table.core,d=c.schema.primaryKey,y=d.outbound,_=d.extractKey,b=n.db._options.modifyChunkSize||200,A=[],E=0,x=[],S=function(g,l){var h=l.failures,v=l.numFailures;E+=g-v;for(var f=0,m=U(h);f<m.length;f++){var w=m[f];A.push(h[w])}};return n.clone().primaryKeys().then(function(g){var l=function(h){var v=Math.min(b,g.length-h);return c.getMany({trans:i,keys:g.slice(h,h+v),cache:"immutable"}).then(function(f){for(var m=[],w=[],k=y?[]:null,I=[],M=0;M<v;++M){var C=f[M],R={value:vt(C),primKey:g[h+M]};s.call(R,R.value,R)!==!1&&(R.value==null?I.push(g[h+M]):!y&&Z(_(C),_(R.value))!==0?(I.push(g[h+M]),m.push(R.value)):(w.push(R.value),y&&k.push(g[h+M])))}var B=je(r)&&r.limit===1/0&&(typeof t!="function"||t===on)&&{index:r.index,range:r.range};return Promise.resolve(m.length>0&&c.mutate({trans:i,type:"add",values:m}).then(function(K){for(var T in K.failures)I.splice(parseInt(T),1);S(m.length,K)})).then(function(){return(w.length>0||B&&typeof t=="object")&&c.mutate({trans:i,type:"put",keys:k,values:w,criteria:B,changeSpec:typeof t!="function"&&t}).then(function(K){return S(w.length,K)})}).then(function(){return(I.length>0||B&&t===on)&&c.mutate({trans:i,type:"delete",keys:I,criteria:B}).then(function(K){return S(I.length,K)})}).then(function(){return g.length>h+v&&l(h+b)})})};return l(0).then(function(){if(A.length>0)throw new Ft("Error modifying one or more objects",A,E,x);return g.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return je(t)&&(t.isPrimKey&&!Qa||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,s=n;return t.table.core.count({trans:r,query:{index:i,range:s}}).then(function(o){return t.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(function(u){var c=u.failures;u.lastResult,u.results;var d=u.numFailures;if(d)throw new Ft("Could not delete some values",Object.keys(c).map(function(y){return c[y]}),o-d);return o-d})})}):this.modify(on)},e}(),on=function(e,t){return t.value=null};function rs(e){return bt(ns.prototype,function(n,r){this.db=e;var i=_i,s=null;if(r)try{i=r()}catch(d){s=d}var o=n._ctx,u=o.table,c=u.hook.reading.fire;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:s,or:o.or,valueMapper:c!==gt?c:null}})}function is(e,t){return e<t?-1:e===t?0:1}function as(e,t){return e>t?-1:e===t?0:1}function ne(e,t,n){var r=e instanceof wi?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function He(e){return new e.Collection(e,function(){return bi("")}).limit(0)}function ss(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function os(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function us(e,t,n,r,i,s){for(var o=Math.min(e.length,r.length),u=-1,c=0;c<o;++c){var d=t[c];if(d!==r[c])return i(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):i(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;i(e[c],d)<0&&(u=c)}return o<r.length&&s==="next"?e+n.substr(e.length):o<e.length&&s==="prev"?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function Mt(e,t,n,r){var i,s,o,u,c,d,y,_=n.length;if(!n.every(function(x){return typeof x=="string"}))return ne(e,yi);function b(x){i=ss(x),s=os(x),o=x==="next"?is:as;var S=n.map(function(g){return{lower:s(g),upper:i(g)}}).sort(function(g,l){return o(g.lower,l.lower)});u=S.map(function(g){return g.upper}),c=S.map(function(g){return g.lower}),d=x,y=x==="next"?"":r}b("next");var A=new e.Collection(e,function(){return xe(u[0],c[_-1]+r)});A._ondirectionchange=function(x){b(x)};var E=0;return A._addAlgorithm(function(x,S,g){var l=x.key;if(typeof l!="string")return!1;var h=s(l);if(t(h,c,E))return!0;for(var v=null,f=E;f<_;++f){var m=us(l,h,u[f],c[f],o,d);m===null&&v===null?E=f+1:(v===null||o(v,m)>0)&&(v=m)}return S(v!==null?function(){x.continue(v+y)}:g),!1}),A}function xe(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function bi(e){return{type:1,lower:e,upper:e}}var wi=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?He(this):new this.Collection(this,function(){return xe(t,n,!r,!i)})}catch{return ne(this,fe)}},e.prototype.equals=function(t){return t==null?ne(this,fe):new this.Collection(this,function(){return bi(t)})},e.prototype.above=function(t){return t==null?ne(this,fe):new this.Collection(this,function(){return xe(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?ne(this,fe):new this.Collection(this,function(){return xe(t,void 0,!1)})},e.prototype.below=function(t){return t==null?ne(this,fe):new this.Collection(this,function(){return xe(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?ne(this,fe):new this.Collection(this,function(){return xe(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?ne(this,yi):this.between(t,t+Pe,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Mt(this,function(n,r){return n.indexOf(r[0])===0},[t],Pe)},e.prototype.equalsIgnoreCase=function(t){return Mt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=de.apply(Ue,arguments);return t.length===0?He(this):Mt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=de.apply(Ue,arguments);return t.length===0?He(this):Mt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Pe)},e.prototype.anyOf=function(){var t=this,n=de.apply(Ue,arguments),r=this._cmp;try{n.sort(r)}catch{return ne(this,fe)}if(n.length===0)return He(this);var i=new this.Collection(this,function(){return xe(n[0],n[n.length-1])});i._ondirectionchange=function(o){r=o==="next"?t._ascending:t._descending,n.sort(r)};var s=0;return i._addAlgorithm(function(o,u,c){for(var d=o.key;r(d,n[s])>0;)if(++s,s===n.length)return u(c),!1;return r(d,n[s])===0?!0:(u(function(){o.continue(n[s])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[In,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=de.apply(Ue,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return ne(this,fe)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[In,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,s=this._ascending,o=this._descending,u=this._min,c=this._max;if(t.length===0)return He(this);if(!t.every(function(f){return f[0]!==void 0&&f[1]!==void 0&&s(f[0],f[1])<=0}))return ne(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var d=!n||n.includeLowers!==!1,y=n&&n.includeUppers===!0;function _(f,m){for(var w=0,k=f.length;w<k;++w){var I=f[w];if(i(m[0],I[1])<0&&i(m[1],I[0])>0){I[0]=u(I[0],m[0]),I[1]=c(I[1],m[1]);break}}return w===k&&f.push(m),f}var b=s;function A(f,m){return b(f[0],m[0])}var E;try{E=t.reduce(_,[]),E.sort(A)}catch{return ne(this,fe)}var x=0,S=y?function(f){return s(f,E[x][1])>0}:function(f){return s(f,E[x][1])>=0},g=d?function(f){return o(f,E[x][0])>0}:function(f){return o(f,E[x][0])>=0};function l(f){return!S(f)&&!g(f)}var h=S,v=new this.Collection(this,function(){return xe(E[0][0],E[E.length-1][1],!d,!y)});return v._ondirectionchange=function(f){f==="next"?(h=S,b=s):(h=g,b=o),E.sort(A)},v._addAlgorithm(function(f,m,w){for(var k=f.key;h(k);)if(++x,x===E.length)return m(w),!1;return l(k)?!0:(r._cmp(k,E[x][1])===0||r._cmp(k,E[x][0])===0||m(function(){b===s?f.continue(E[x][0]):f.continue(E[x][1])}),!1)}),v},e.prototype.startsWithAnyOf=function(){var t=de.apply(Ue,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?He(this):this.inAnyRange(t.map(function(n){return[n,n+Pe]})):ne(this,"startsWithAnyOf() only works with strings")},e}();function cs(e){return bt(wi.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var s=e._deps.indexedDB;if(!s)throw new D.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=function(o,u){return s.cmp(u,o)},this._max=function(o,u){return s.cmp(o,u)>0?o:u},this._min=function(o,u){return s.cmp(o,u)<0?o:u},this._IDBKeyRange=e._deps.IDBKeyRange})}function ce(e){return H(function(t){return ot(t),e(t.target.error),!1})}function ot(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var ut="storagemutated",Ae="x-storagemutated-1",Ie=_t(null,ut),ls=function(){function e(){}return e.prototype._lock=function(){return qe(!P.global),++this._reculock,this._reculock===1&&!P.global&&(P.lockOwnerFor=this),this},e.prototype._unlock=function(){if(qe(!P.global),--this._reculock===0)for(P.global||(P.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Qe(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&P.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(qe(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new D.DatabaseClosed(i);case"MissingAPIError":throw new D.MissingAPI(i.message,i);default:throw new D.OpenFailed(i)}if(!this.active)throw new D.TransactionInactive;return qe(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=H(function(s){ot(s),n._reject(t.error)}),t.onabort=H(function(s){ot(s),n.active&&n._reject(new D.Abort(t.error)),n.active=!1,n.on("abort").fire(s)}),t.oncomplete=H(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Ie.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return W(new D.ReadOnly("Transaction is readonly"));if(!this.active)return W(new D.TransactionInactive);if(this._locked())return new O(function(o,u){i._blockedFuncs.push([function(){i._promise(t,n,r).then(o,u)},P])});if(r)return Se(function(){var o=new O(function(u,c){i._lock();var d=n(u,c,i);d&&d.then&&d.then(u,c)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var s=new O(function(o,u){var c=n(o,u,i);c&&c.then&&c.then(o,u)});return s._lib=!0,s},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=O.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new O(function(o,u){r.then(function(c){return n._waitingQueue.push(H(o.bind(null,c)))},function(c){return n._waitingQueue.push(H(u.bind(null,c)))}).finally(function(){n._waitingFor===s&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(se(n,t))return n[t];var r=this.schema[t];if(!r)throw new D.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function fs(e){return bt(ls.prototype,function(n,r,i,s,o){var u=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=_t(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new O(function(c,d){u._resolve=c,u._reject=d}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(c){var d=u.active;return u.active=!1,u.on.error.fire(c),u.parent?u.parent._reject(c):d&&u.idbtrans&&u.idbtrans.abort(),W(c)})})}function Rn(e,t,n,r,i,s,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Ei(t)}}function Ei(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function xi(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:ei(n,function(r){return[r.name,r]})}}function hs(e){return e.length===1?e[0]:e}var ct=function(e){try{return e.only([[]]),ct=function(){return[[]]},[[]]}catch{return ct=function(){return Pe},Pe}};function Cn(e){return e==null?function(){}:typeof e=="string"?ds(e):function(t){return ye(t,e)}}function ds(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return ye(n,e)}}function Tr(e){return[].slice.call(e)}var ps=0;function nt(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function vs(e,t,n){function r(_,b){var A=Tr(_.objectStoreNames);return{schema:{name:_.name,tables:A.map(function(E){return b.objectStore(E)}).map(function(E){var x=E.keyPath,S=E.autoIncrement,g=Q(x),l=x==null,h={},v={name:E.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:l,compound:g,keyPath:x,autoIncrement:S,unique:!0,extractKey:Cn(x)},indexes:Tr(E.indexNames).map(function(f){return E.index(f)}).map(function(f){var m=f.name,w=f.unique,k=f.multiEntry,I=f.keyPath,M=Q(I),C={name:m,compound:M,keyPath:I,unique:w,multiEntry:k,extractKey:Cn(I)};return h[nt(I)]=C,C}),getIndexByKeyPath:function(f){return h[nt(f)]}};return h[":id"]=v.primaryKey,x!=null&&(h[nt(x)]=v.primaryKey),v})},hasGetAll:A.length>0&&"getAll"in b.objectStore(A[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var b=_.lower,A=_.upper,E=_.lowerOpen,x=_.upperOpen,S=b===void 0?A===void 0?null:t.upperBound(A,!!x):A===void 0?t.lowerBound(b,!!E):t.bound(b,A,!!E,!!x);return S}function s(_){var b=_.name;function A(S){var g=S.trans,l=S.type,h=S.keys,v=S.values,f=S.range;return new Promise(function(m,w){m=H(m);var k=g.objectStore(b),I=k.keyPath==null,M=l==="put"||l==="add";if(!M&&l!=="delete"&&l!=="deleteRange")throw new Error("Invalid operation type: "+l);var C=(h||v||{length:1}).length;if(h&&v&&h.length!==v.length)throw new Error("Given keys array must have same length as given values array.");if(C===0)return m({numFailures:0,failures:{},results:[],lastResult:void 0});var R,B=[],K=[],T=0,N=function(te){++T,ot(te)};if(l==="deleteRange"){if(f.type===4)return m({numFailures:T,failures:K,results:[],lastResult:void 0});f.type===3?B.push(R=k.clear()):B.push(R=k.delete(i(f)))}else{var V=M?I?[v,h]:[v,null]:[h,null],ie=V[0],G=V[1];if(M)for(var J=0;J<C;++J)B.push(R=G&&G[J]!==void 0?k[l](ie[J],G[J]):k[l](ie[J])),R.onerror=N;else for(var J=0;J<C;++J)B.push(R=k[l](ie[J])),R.onerror=N}var Y=function(te){var oe=te.target.result;B.forEach(function(q,$e){return q.error!=null&&(K[$e]=q.error)}),m({numFailures:T,failures:K,results:l==="delete"?h:B.map(function(q){return q.result}),lastResult:oe})};R.onerror=function(te){N(te),Y(te)},R.onsuccess=Y})}function E(S){var g=S.trans,l=S.values,h=S.query,v=S.reverse,f=S.unique;return new Promise(function(m,w){m=H(m);var k=h.index,I=h.range,M=g.objectStore(b),C=k.isPrimaryKey?M:M.index(k.name),R=v?f?"prevunique":"prev":f?"nextunique":"next",B=l||!("openKeyCursor"in C)?C.openCursor(i(I),R):C.openKeyCursor(i(I),R);B.onerror=ce(w),B.onsuccess=H(function(K){var T=B.result;if(!T){m(null);return}T.___id=++ps,T.done=!1;var N=T.continue.bind(T),V=T.continuePrimaryKey;V&&(V=V.bind(T));var ie=T.advance.bind(T),G=function(){throw new Error("Cursor not started")},J=function(){throw new Error("Cursor not stopped")};T.trans=g,T.stop=T.continue=T.continuePrimaryKey=T.advance=G,T.fail=H(w),T.next=function(){var Y=this,te=1;return this.start(function(){return te--?Y.continue():Y.stop()}).then(function(){return Y})},T.start=function(Y){var te=new Promise(function(q,$e){q=H(q),B.onerror=ce($e),T.fail=$e,T.stop=function(Ee){T.stop=T.continue=T.continuePrimaryKey=T.advance=J,q(Ee)}}),oe=function(){if(B.result)try{Y()}catch(q){T.fail(q)}else T.done=!0,T.start=function(){throw new Error("Cursor behind last entry")},T.stop()};return B.onsuccess=H(function(q){B.onsuccess=oe,oe()}),T.continue=N,T.continuePrimaryKey=V,T.advance=ie,oe(),te},m(T)},w)})}function x(S){return function(g){return new Promise(function(l,h){l=H(l);var v=g.trans,f=g.values,m=g.limit,w=g.query,k=m===1/0?void 0:m,I=w.index,M=w.range,C=v.objectStore(b),R=I.isPrimaryKey?C:C.index(I.name),B=i(M);if(m===0)return l({result:[]});if(S){var K=f?R.getAll(B,k):R.getAllKeys(B,k);K.onsuccess=function(ie){return l({result:ie.target.result})},K.onerror=ce(h)}else{var T=0,N=f||!("openKeyCursor"in R)?R.openCursor(B):R.openKeyCursor(B),V=[];N.onsuccess=function(ie){var G=N.result;if(!G)return l({result:V});if(V.push(f?G.value:G.primaryKey),++T===m)return l({result:V});G.continue()},N.onerror=ce(h)}})}}return{name:b,schema:_,mutate:A,getMany:function(S){var g=S.trans,l=S.keys;return new Promise(function(h,v){h=H(h);for(var f=g.objectStore(b),m=l.length,w=new Array(m),k=0,I=0,M,C=function(T){var N=T.target;(w[N._pos]=N.result)!=null,++I===k&&h(w)},R=ce(v),B=0;B<m;++B){var K=l[B];K!=null&&(M=f.get(l[B]),M._pos=B,M.onsuccess=C,M.onerror=R,++k)}k===0&&h(w)})},get:function(S){var g=S.trans,l=S.key;return new Promise(function(h,v){h=H(h);var f=g.objectStore(b),m=f.get(l);m.onsuccess=function(w){return h(w.target.result)},m.onerror=ce(v)})},query:x(c),openCursor:E,count:function(S){var g=S.query,l=S.trans,h=g.index,v=g.range;return new Promise(function(f,m){var w=l.objectStore(b),k=h.isPrimaryKey?w:w.index(h.name),I=i(v),M=I?k.count(I):k.count();M.onsuccess=H(function(C){return f(C.target.result)}),M.onerror=ce(m)})}}}var o=r(e,n),u=o.schema,c=o.hasGetAll,d=u.tables.map(function(_){return s(_)}),y={};return d.forEach(function(_){return y[_.name]=_}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(_){var b=y[_];if(!b)throw new Error("Table '"+_+"' not found");return y[_]},MIN_KEY:-1/0,MAX_KEY:ct(t),schema:u}}function gs(e,t){return t.reduce(function(n,r){var i=r.create;return F(F({},n),i(n))},e)}function ys(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var s=gs(vs(t,i,r),e.dbcore);return{dbcore:s}}function rr(e,t){var n=e._novip,r=t.db,i=ys(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(s){var o=s.name;n.core.schema.tables.some(function(u){return u.name===o})&&(s.core=n.core.table(o),n[o]instanceof n.Table&&(n[o].core=s.core))})}function zt(e,t,n,r){var i=e._novip;n.forEach(function(s){var o=r[s];t.forEach(function(u){var c=Yn(u,s);(!c||"value"in c&&c.value===void 0)&&(u===i.Transaction.prototype||u instanceof i.Transaction?_e(u,s,{get:function(){return this.table(s)},set:function(d){Jr(this,s,{value:d,writable:!0,configurable:!0,enumerable:!0})}}):u[s]=new i.Table(s,o))})})}function Tn(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function ms(e,t){return e._cfg.version-t._cfg.version}function _s(e,t,n,r){var i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(n),s._completion.catch(r);var o=s._reject.bind(s),u=P.transless||P;Se(function(){P.trans=s,P.transless=u,t===0?(U(i).forEach(function(c){ir(n,c,i[c].primKey,i[c].indexes)}),rr(e,n),O.follow(function(){return e.on.populate.fire(s)}).catch(o)):bs(e,t,s,n).catch(o)})}function bs(e,t,n,r){var i=e._novip,s=[],o=i._versions,u=i._dbSchema=ar(i,i.idbdb,r),c=!1,d=o.filter(function(_){return _._cfg.version>=t});d.forEach(function(_){s.push(function(){var b=u,A=_._cfg.dbschema;On(i,b,r),On(i,A,r),u=i._dbSchema=A;var E=ki(b,A);E.add.forEach(function(v){ir(r,v[0],v[1].primKey,v[1].indexes)}),E.change.forEach(function(v){if(v.recreate)throw new D.Upgrade("Not yet support for changing primary key");var f=r.objectStore(v.name);v.add.forEach(function(m){return Kn(f,m)}),v.change.forEach(function(m){f.deleteIndex(m.name),Kn(f,m)}),v.del.forEach(function(m){return f.deleteIndex(m)})});var x=_._cfg.contentUpgrade;if(x&&_._cfg.version>t){rr(i,r),n._memoizedTables={},c=!0;var S=ti(A);E.del.forEach(function(v){S[v]=b[v]}),Tn(i,[i.Transaction.prototype]),zt(i,[i.Transaction.prototype],U(S),S),n.schema=S;var g=Xn(x);g&&Xe();var l,h=O.follow(function(){if(l=x(n),l&&g){var v=be.bind(null,null);l.then(v,v)}});return l&&typeof l.then=="function"?O.resolve(l):h.then(function(){return l})}}),s.push(function(b){if(!c||!Xa){var A=_._cfg.dbschema;Es(A,b)}Tn(i,[i.Transaction.prototype]),zt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function y(){return s.length?O.resolve(s.shift()(n.idbtrans)).then(y):O.resolve()}return y().then(function(){ws(u,r)})}function ki(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],s=t[r];if(!i)n.add.push([r,s]);else{var o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!qt)o.recreate=!0,n.change.push(o);else{var u=i.idxByName,c=s.idxByName,d=void 0;for(d in u)c[d]||o.del.push(d);for(d in c){var y=u[d],_=c[d];y?y.src!==_.src&&o.change.push(_):o.add.push(_)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function ir(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(s){return Kn(i,s)}),i}function ws(e,t){U(e).forEach(function(n){t.db.objectStoreNames.contains(n)||ir(t,n,e[n].primKey,e[n].indexes)})}function Es(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Kn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function ar(e,t,n){var r={},i=Qt(t.objectStoreNames,0);return i.forEach(function(s){for(var o=n.objectStore(s),u=o.keyPath,c=Rn(Ei(u),u||"",!1,!1,!!o.autoIncrement,u&&typeof u!="string",!0),d=[],y=0;y<o.indexNames.length;++y){var _=o.index(o.indexNames[y]);u=_.keyPath;var b=Rn(_.name,u,!!_.unique,!!_.multiEntry,!1,u&&typeof u!="string",!1);d.push(b)}r[s]=xi(s,c,d)}),r}function xs(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=ar(r,t,n);r._storeNames=Qt(t.objectStoreNames,0),zt(r,[r._allTables],U(i),i)}function ks(e,t){var n=ar(e,e.idbdb,t),r=ki(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function On(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,s=0;s<i.length;++s){var o=i[s],u=n.objectStore(o);r._hasGetAll="getAll"in u;for(var c=0;c<u.indexNames.length;++c){var d=u.indexNames[c],y=u.index(d).keyPath,_=typeof y=="string"?y:"["+Qt(y).join("+")+"]";if(t[o]){var b=t[o].idxByName[_];b&&(b.name=d,delete t[o].idxByName[_],t[o].idxByName[d]=b)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&j.WorkerGlobalScope&&j instanceof j.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function As(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Rn(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),Q(i),n===0)})}var Ss=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){U(t).forEach(function(r){if(t[r]!==null){var i=As(t[r]),s=i.shift();if(s.multi)throw new D.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")}),n[r]=xi(r,s,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?ee(this._cfg.storesSource,t):t;var r=n._versions,i={},s={};return r.forEach(function(o){ee(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),n._dbSchema=s,Tn(n,[n._allTables,n,n.Transaction.prototype]),zt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],U(s),s),n._storeNames=U(s),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=qn(this._cfg.contentUpgrade||$,t),this},e}();function Ms(e){return bt(Ss.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function sr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Mi(Zt,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function or(e){return e&&typeof e.databases=="function"}function Is(e){var t=e.indexedDB,n=e.IDBKeyRange;return or(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Zt})}):sr(t,n).toCollection().primaryKeys()}function Rs(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!or(n)&&t!==Zt&&sr(n,r).put({name:t}).catch($)}function Cs(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!or(n)&&t!==Zt&&sr(n,r).delete(t).catch($)}function Pn(e){return Se(function(){return P.letThrough=!0,e()})}function Ts(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function Ks(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?W(t.dbOpenError):e});le&&(t.openCanceller._stackHolder=Ne()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new D.DatabaseClosed("db.open() was cancelled")}var s=t.dbReadyResolve,o=null,u=!1;return O.race([r,(typeof navigator=="undefined"?O.resolve():Ts()).then(function(){return new O(function(c,d){if(i(),!n)throw new D.MissingAPI;var y=e.name,_=t.autoSchema?n.open(y):n.open(y,Math.round(e.verno*10));if(!_)throw new D.MissingAPI;_.onerror=ce(d),_.onblocked=H(e._fireOnBlocked),_.onupgradeneeded=H(function(b){if(o=_.transaction,t.autoSchema&&!e._options.allowEmptyDB){_.onerror=ot,o.abort(),_.result.close();var A=n.deleteDatabase(y);A.onsuccess=A.onerror=H(function(){d(new D.NoSuchDatabase("Database "+y+" doesnt exist"))})}else{o.onerror=ce(d);var E=b.oldVersion>Math.pow(2,62)?0:b.oldVersion;u=E<1,e._novip.idbdb=_.result,_s(e,E/10,o,d)}},d),_.onsuccess=H(function(){o=null;var b=e._novip.idbdb=_.result,A=Qt(b.objectStoreNames);if(A.length>0)try{var E=b.transaction(hs(A),"readonly");t.autoSchema?xs(e,b,E):(On(e,e._dbSchema,E),ks(e,E)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),rr(e,E)}catch{}tt.push(e),b.onversionchange=H(function(x){t.vcFired=!0,e.on("versionchange").fire(x)}),b.onclose=H(function(x){e.on("close").fire(x)}),u&&Rs(e._deps,y),c()},d)})})]).then(function(){return i(),t.onReadyBeingFired=[],O.resolve(Pn(function(){return e.on.ready.fire(e.vip)})).then(function c(){if(t.onReadyBeingFired.length>0){var d=t.onReadyBeingFired.reduce(qn,$);return t.onReadyBeingFired=[],O.resolve(Pn(function(){return d(e.vip)})).then(c)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(c){t.dbOpenError=c;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),W(c)}).finally(function(){t.openComplete=!0,s()})}function Dn(e){var t=function(o){return e.next(o)},n=function(o){return e.throw(o)},r=s(t),i=s(n);function s(o){return function(u){var c=o(u),d=c.value;return c.done?d:!d||typeof d.then!="function"?Q(d)?Promise.all(d).then(r,i):r(d):d.then(r,i)}}return s(t)()}function Os(e,t,n){var r=arguments.length;if(r<2)throw new D.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var s=ni(i);return[e,s,n]}function Ai(e,t,n,r,i){return O.resolve().then(function(){var s=P.transless||P,o=e._createTransaction(t,n,e._dbSchema,r),u={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(_){return _.name===Jn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Ai(e,t,n,null,i)})):W(_)}var c=Xn(i);c&&Xe();var d,y=O.follow(function(){if(d=i.call(o,o),d)if(c){var _=be.bind(null,null);d.then(_,_)}else typeof d.next=="function"&&typeof d.throw=="function"&&(d=Dn(d))},u);return(d&&typeof d.then=="function"?O.resolve(d).then(function(_){return o.active?_:W(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):y.then(function(){return d})).then(function(_){return r&&o._resolve(),o._completion.then(function(){return _})}).catch(function(_){return o._reject(_),W(_)})})}function It(e,t,n){for(var r=Q(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function Ps(e){return F(F({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},s=[];function o(x,S,g){var l=nt(x),h=i[l]=i[l]||[],v=x==null?0:typeof x=="string"?1:x.length,f=S>0,m=F(F({},g),{isVirtual:f,keyTail:S,keyLength:v,extractKey:Cn(x),unique:!f&&g.unique});if(h.push(m),m.isPrimaryKey||s.push(m),v>1){var w=v===2?x[0]:x.slice(0,v-1);o(w,S+1,g)}return h.sort(function(k,I){return k.keyTail-I.keyTail}),m}var u=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var c=0,d=r.indexes;c<d.length;c++){var y=d[c];o(y.keyPath,0,y)}function _(x){var S=i[nt(x)];return S&&S[0]}function b(x,S){return{type:x.type===1?2:x.type,lower:It(x.lower,x.lowerOpen?e.MAX_KEY:e.MIN_KEY,S),lowerOpen:!0,upper:It(x.upper,x.upperOpen?e.MIN_KEY:e.MAX_KEY,S),upperOpen:!0}}function A(x){var S=x.query.index;return S.isVirtual?F(F({},x),{query:{index:S,range:b(x.query.range,S.keyTail)}}):x}var E=F(F({},n),{schema:F(F({},r),{primaryKey:u,indexes:s,getIndexByKeyPath:_}),count:function(x){return n.count(A(x))},query:function(x){return n.query(A(x))},openCursor:function(x){var S=x.query.index,g=S.keyTail,l=S.isVirtual,h=S.keyLength;if(!l)return n.openCursor(x);function v(f){function m(k){k!=null?f.continue(It(k,x.reverse?e.MAX_KEY:e.MIN_KEY,g)):x.unique?f.continue(f.key.slice(0,h).concat(x.reverse?e.MIN_KEY:e.MAX_KEY,g)):f.continue()}var w=Object.create(f,{continue:{value:m},continuePrimaryKey:{value:function(k,I){f.continuePrimaryKey(It(k,e.MAX_KEY,g),I)}},primaryKey:{get:function(){return f.primaryKey}},key:{get:function(){var k=f.key;return h===1?k[0]:k.slice(0,h)}},value:{get:function(){return f.value}}});return w}return n.openCursor(A(x)).then(function(f){return f&&v(f)})}});return E}})}var Ds={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ps};function ur(e,t,n,r){return n=n||{},r=r||"",U(e).forEach(function(i){if(!se(t,i))n[r+i]=void 0;else{var s=e[i],o=t[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){var u=gn(s),c=gn(o);u!==c?n[r+i]=t[i]:u==="Object"?ur(s,o,n,r+i+"."):s!==o&&(n[r+i]=t[i])}else s!==o&&(n[r+i]=t[i])}}),U(t).forEach(function(i){se(e,i)||(n[r+i]=t[i])}),n}function Bs(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Ls={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return F(F({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=F(F({},n),{mutate:function(s){var o=P.trans,u=o.table(t).hook,c=u.deleting,d=u.creating,y=u.updating;switch(s.type){case"add":if(d.fire===$)break;return o._promise("readwrite",function(){return _(s)},!0);case"put":if(d.fire===$&&y.fire===$)break;return o._promise("readwrite",function(){return _(s)},!0);case"delete":if(c.fire===$)break;return o._promise("readwrite",function(){return _(s)},!0);case"deleteRange":if(c.fire===$)break;return o._promise("readwrite",function(){return b(s)},!0)}return n.mutate(s);function _(E){var x=P.trans,S=E.keys||Bs(r,E);if(!S)throw new Error("Keys missing");return E=E.type==="add"||E.type==="put"?F(F({},E),{keys:S}):F({},E),E.type!=="delete"&&(E.values=pn([],E.values,!0)),E.keys&&(E.keys=pn([],E.keys,!0)),Fs(n,E,S).then(function(g){var l=S.map(function(h,v){var f=g[v],m={onerror:null,onsuccess:null};if(E.type==="delete")c.fire.call(m,h,f,x);else if(E.type==="add"||f===void 0){var w=d.fire.call(m,h,E.values[v],x);h==null&&w!=null&&(h=w,E.keys[v]=h,r.outbound||ue(E.values[v],r.keyPath,h))}else{var k=ur(f,E.values[v]),I=y.fire.call(m,k,h,f,x);if(I){var M=E.values[v];Object.keys(I).forEach(function(C){se(M,C)?M[C]=I[C]:ue(M,C,I[C])})}}return m});return n.mutate(E).then(function(h){for(var v=h.failures,f=h.results,m=h.numFailures,w=h.lastResult,k=0;k<S.length;++k){var I=f?f[k]:S[k],M=l[k];I==null?M.onerror&&M.onerror(v[k]):M.onsuccess&&M.onsuccess(E.type==="put"&&g[k]?E.values[k]:I)}return{failures:v,results:f,numFailures:m,lastResult:w}}).catch(function(h){return l.forEach(function(v){return v.onerror&&v.onerror(h)}),Promise.reject(h)})})}function b(E){return A(E.trans,E.range,1e4)}function A(E,x,S){return n.query({trans:E,values:!1,query:{index:r,range:x},limit:S}).then(function(g){var l=g.result;return _({type:"delete",keys:l,trans:E}).then(function(h){return h.numFailures>0?Promise.reject(h.failures[0]):l.length<S?{failures:[],numFailures:0,lastResult:void 0}:A(E,F(F({},x),{lower:l[l.length-1],lowerOpen:!0}),S)})})}}});return i}})}};function Fs(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Si(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,s=0;i<t.keys.length&&s<e.length;++i)Z(t.keys[i],e[s])===0&&(r.push(n?vt(t.values[i]):t.values[i]),++s);return r.length===e.length?r:null}catch{return null}}var Ns={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return F(F({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Si(r.keys,r.trans._cache,r.cache==="clone");return i?O.resolve(i):n.getMany(r).then(function(s){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?vt(s):s},s})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},un;function cr(e){return!("from"in e)}var he=function(e,t){if(this)ee(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new he;return e&&"d"in e&&ee(n,e),n}};We(he.prototype,(un={add:function(e){return Vt(this,e),this},addKey:function(e){return lt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return lt(t,n,n)}),this}},un[yn]=function(){return Bn(this)},un));function lt(e,t,n){var r=Z(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(cr(e))return ee(e,{from:t,to:n,d:1});var i=e.l,s=e.r;if(Z(n,e.from)<0)return i?lt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Kr(e);if(Z(t,e.to)>0)return s?lt(s,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Kr(e);Z(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),Z(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var o=!e.r;i&&!e.l&&Vt(e,i),s&&o&&Vt(e,s)}}function Vt(e,t){function n(r,i){var s=i.from,o=i.to,u=i.l,c=i.r;lt(r,s,o),u&&n(r,u),c&&n(r,c)}cr(t)||n(e,t)}function $s(e,t){var n=Bn(t),r=n.next();if(r.done)return!1;for(var i=r.value,s=Bn(e),o=s.next(i.from),u=o.value;!r.done&&!o.done;){if(Z(u.from,i.to)<=0&&Z(u.to,i.from)>=0)return!0;Z(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(o=s.next(i.from)).value}return!1}function Bn(e){var t=cr(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Z(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Z(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Kr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var s=i==="r"?"l":"r",o=F({},e),u=e[i];e.from=u.from,e.to=u.to,e[i]=u[i],o[i]=u[s],e[s]=o,o.d=Or(o)}e.d=Or(e)}function Or(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var js={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new he(e.MIN_KEY,e.MAX_KEY);return F(F({},e),{table:function(r){var i=e.table(r),s=i.schema,o=s.primaryKey,u=o.extractKey,c=o.outbound,d=F(F({},i),{mutate:function(b){var A=b.trans,E=A.mutatedParts||(A.mutatedParts={}),x=function(w){var k="idb://"+t+"/"+r+"/"+w;return E[k]||(E[k]=new he)},S=x(""),g=x(":dels"),l=b.type,h=b.type==="deleteRange"?[b.range]:b.type==="delete"?[b.keys]:b.values.length<50?[[],b.values]:[],v=h[0],f=h[1],m=b.trans._cache;return i.mutate(b).then(function(w){if(Q(v)){l!=="delete"&&(v=w.results),S.addKeys(v);var k=Si(v,m);!k&&l!=="add"&&g.addKeys(v),(k||f)&&Hs(x,s,k,f)}else if(v){var I={from:v.lower,to:v.upper};g.add(I),S.add(I)}else S.add(n),g.add(n),s.indexes.forEach(function(M){return x(M.name).add(n)});return w})}}),y=function(b){var A,E,x=b.query,S=x.index,g=x.range;return[S,new he((A=g.lower)!==null&&A!==void 0?A:e.MIN_KEY,(E=g.upper)!==null&&E!==void 0?E:e.MAX_KEY)]},_={get:function(b){return[o,new he(b.key)]},getMany:function(b){return[o,new he().addKeys(b.keys)]},count:y,query:y,openCursor:y};return U(_).forEach(function(b){d[b]=function(A){var E=P.subscr;if(E){var x=function(m){var w="idb://"+t+"/"+r+"/"+m;return E[w]||(E[w]=new he)},S=x(""),g=x(":dels"),l=_[b](A),h=l[0],v=l[1];if(x(h.name||"").add(v),!h.isPrimaryKey)if(b==="count")g.add(n);else{var f=b==="query"&&c&&A.values&&i.query(F(F({},A),{values:!1}));return i[b].apply(this,arguments).then(function(m){if(b==="query"){if(c&&A.values)return f.then(function(M){var C=M.result;return S.addKeys(C),m});var w=A.values?m.result.map(u):m.result;A.values?S.addKeys(w):g.addKeys(w)}else if(b==="openCursor"){var k=m,I=A.values;return k&&Object.create(k,{key:{get:function(){return g.addKey(k.primaryKey),k.key}},primaryKey:{get:function(){var M=k.primaryKey;return g.addKey(M),M}},value:{get:function(){return I&&S.addKey(k.primaryKey),k.value}}})}return m})}}return i[b].apply(this,arguments)}}),d}})}};function Hs(e,t,n,r){function i(s){var o=e(s.name||"");function u(d){return d!=null?s.extractKey(d):null}var c=function(d){return s.multiEntry&&Q(d)?d.forEach(function(y){return o.addKey(y)}):o.addKey(d)};(n||r).forEach(function(d,y){var _=n&&u(n[y]),b=r&&u(r[y]);Z(_,b)!==0&&(_!=null&&c(_),b!=null&&c(b))})}t.indexes.forEach(i)}var Mi=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=F({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var s=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:$,dbReadyPromise:null,cancelOpen:$,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new O(function(u){o.dbReadyResolve=u}),o.openCanceller=new O(function(u,c){o.cancelOpen=c}),this._state=o,this.name=t,this.on=_t(this,"populate","blocked","versionchange","close",{ready:[qn,$]}),this.on.ready.subscribe=qr(this.on.ready.subscribe,function(u){return function(c,d){e.vip(function(){var y=r._state;if(y.openComplete)y.dbOpenError||O.resolve().then(c),d&&u(c);else if(y.onReadyBeingFired)y.onReadyBeingFired.push(c),d&&u(c);else{u(c);var _=r;d||u(function b(){_.on.ready.unsubscribe(c),_.on.ready.unsubscribe(b)})}})}}),this.Collection=rs(this),this.Table=qa(this),this.Transaction=fs(this),this.Version=Ms(this),this.WhereClause=cs(this),this.on("versionchange",function(u){u.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(u){!u.newVersion||u.newVersion<u.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+u.oldVersion/10)}),this._maxKey=ct(n.IDBKeyRange),this._createTransaction=function(u,c,d,y){return new r.Transaction(u,c,d,r._options.chromeTransactionDurability,y)},this._fireOnBlocked=function(u){r.on("blocked").fire(u),tt.filter(function(c){return c.name===r.name&&c!==r&&!c._state.vcFired}).map(function(c){return c.on("versionchange").fire(u)})},this.use(Ds),this.use(Ls),this.use(js),this.use(Ns),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(function(u){return u(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new D.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(ms),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||P.letThrough||this._vip)?t():new O(function(r,i){if(n._state.openComplete)return i(new D.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new D.DatabaseClosed);return}n.open().catch($)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,s=t.name;s&&this.unuse({stack:n,name:s});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:i==null?10:i,name:s}),o.sort(function(u,c){return u.level-c.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(s){return i?s.create!==i:r?s.name!==r:!1})),this},e.prototype.open=function(){return Ks(this)},e.prototype._close=function(){var t=this._state,n=tt.indexOf(this);if(n>=0&&tt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new O(function(r){t.dbReadyResolve=r}),t.openCanceller=new O(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new D.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new O(function(i,s){var o=function(){t.close();var u=t._deps.indexedDB.deleteDatabase(t.name);u.onsuccess=H(function(){Cs(t._deps,t.name),i()}),u.onerror=ce(s),u.onblocked=t._fireOnBlocked};if(n)throw new D.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return U(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Os.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,s=P.trans;(!s||s.db!==this||t.indexOf("!")!==-1)&&(s=null);var o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var u,c;try{if(c=n.map(function(y){var _=y instanceof i.Table?y.name:y;if(typeof _!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return _}),t=="r"||t===nn)u=nn;else if(t=="rw"||t==rn)u=rn;else throw new D.InvalidArgument("Invalid transaction mode: "+t);if(s){if(s.mode===nn&&u===rn)if(o)s=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s&&c.forEach(function(y){if(s&&s.storeNames.indexOf(y)===-1)if(o)s=null;else throw new D.SubTransaction("Table "+y+" not included in parent transaction.")}),o&&s&&!s.active&&(s=null)}}catch(y){return s?s._promise(null,function(_,b){b(y)}):W(y)}var d=Ai.bind(null,this,u,c,s,r);return s?s._promise(u,d,"lock"):P.trans?Qe(P.transless,function(){return i._whenReady(d)}):this._whenReady(d)},e.prototype.table=function(t){if(!se(this._allTables,t))throw new D.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),Us=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",zs=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[Us]=function(){return this},e}();function Ii(e,t){return U(t).forEach(function(n){var r=e[n]||(e[n]=new he);Vt(r,t[n])}),e}function Vs(e){return new zs(function(t){var n=Xn(e);function r(A){n&&Xe();var E=function(){return Se(e,{subscr:A,trans:null})},x=P.trans?Qe(P.transless,E):E();return n&&x.then(be,be),x}var i=!1,s={},o={},u={get closed(){return i},unsubscribe:function(){i=!0,Ie.storagemutated.unsubscribe(_)}};t.start&&t.start(u);var c=!1,d=!1;function y(){return U(o).some(function(A){return s[A]&&$s(s[A],o[A])})}var _=function(A){Ii(s,A),y()&&b()},b=function(){if(!(c||i)){s={};var A={},E=r(A);d||(Ie(ut,_),d=!0),c=!0,Promise.resolve(E).then(function(x){c=!1,!i&&(y()?b():(s={},o=A,t.next&&t.next(x)))},function(x){c=!1,t.error&&t.error(x),u.unsubscribe()})}};return b(),u})}var Ln;try{Ln={indexedDB:j.indexedDB||j.mozIndexedDB||j.webkitIndexedDB||j.msIndexedDB,IDBKeyRange:j.IDBKeyRange||j.webkitIDBKeyRange}}catch{Ln={indexedDB:null,IDBKeyRange:null}}var Te=Mi;We(Te,F(F({},Jt),{delete:function(e){var t=new Te(e,{addons:[]});return t.delete()},exists:function(e){return new Te(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Is(Te.dependencies).then(e)}catch{return W(new D.MissingAPI)}},defineClass:function(){function e(t){ee(this,t)}return e},ignoreTransaction:function(e){return P.trans?Qe(P.transless,e):e()},vip:Pn,async:function(e){return function(){try{var t=Dn(e.apply(this,arguments));return!t||typeof t.then!="function"?O.resolve(t):t}catch(n){return W(n)}}},spawn:function(e,t,n){try{var r=Dn(e.apply(n,t||[]));return!r||typeof r.then!="function"?O.resolve(r):r}catch(i){return W(i)}},currentTransaction:{get:function(){return P.trans||null}},waitFor:function(e,t){var n=O.resolve(typeof e=="function"?Te.ignoreTransaction(e):e).timeout(t||6e4);return P.trans?P.trans.waitFor(n):n},Promise:O,debug:{get:function(){return le},set:function(e){ii(e,e==="dexie"?function(){return!0}:mi)}},derive:Ge,extend:ee,props:We,override:qr,Events:_t,on:Ie,liveQuery:Vs,extendObservabilitySet:Ii,getByKeyPath:ye,setByKeyPath:ue,delByKeyPath:xa,shallowClone:ti,deepClone:vt,getObjectDiff:ur,cmp:Z,asap:Zr,minKey:In,addons:[],connections:tt,errnames:Jn,dependencies:Ln,semVer:Sr,version:Sr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));Te.maxKey=ct(Te.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(Ie(ut,function(e){if(!ve){var t;qt?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Ae,!0,!0,e)):t=new CustomEvent(Ae,{detail:e}),ve=!0,dispatchEvent(t),ve=!1}}),addEventListener(Ae,function(e){var t=e.detail;ve||Wt(t)}));function Wt(e){var t=ve;try{ve=!0,Ie.storagemutated.fire(e)}finally{ve=t}}var ve=!1;if(typeof BroadcastChannel!="undefined"){var Pr=new BroadcastChannel(Ae);Ie(ut,function(e){ve||Pr.postMessage(e)}),Pr.onmessage=function(e){e.data&&Wt(e.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){Ie(ut,function(e){try{ve||(typeof localStorage!="undefined"&&localStorage.setItem(Ae,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&pn([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:Ae,changedParts:e})}))}catch{}}),addEventListener("storage",function(e){if(e.key===Ae){var t=JSON.parse(e.newValue);t&&Wt(t.changedParts)}});var Dr=self.document&&navigator.serviceWorker;Dr&&Dr.addEventListener("message",Ws)}function Ws(e){var t=e.data;t&&t.type===Ae&&Wt(t.changedParts)}O.rejectionMapper=Ka;ii(le,mi);function Gs(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var Ys={},Ri={},Xs={},Qs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Xs}),Js=Gs(Qs);(function(e){(function(t){var n=t.Markdown=function(g){switch(typeof g){case"undefined":this.dialect=n.dialects.Gruber;break;case"object":this.dialect=g;break;default:if(g in n.dialects)this.dialect=n.dialects[g];else throw new Error("Unknown Markdown dialect '"+String(g)+"'");break}this.em_state=[],this.strong_state=[],this.debug_indent=""};t.parse=function(g,l){var h=new n(l);return h.toTree(g)},t.toHTML=function(l,h,v){var f=t.toHTMLTree(l,h,v);return t.renderJsonML(f)},t.toHTMLTree=function(l,h,v){typeof l=="string"&&(l=this.parse(l,h));var f=b(l),m={};f&&f.references&&(m=f.references);var w=x(l,m,v);return S(w),w};function r(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function i(){var g=Js;return"Markdown.mk_block( "+g.inspect(this.toString())+", "+g.inspect(this.trailing)+", "+g.inspect(this.lineNumber)+" )"}var s=n.mk_block=function(g,l,h){arguments.length==1&&(l=`

`);var v=new String(g);return v.trailing=l,v.inspect=i,v.toSource=r,h!=null&&(v.lineNumber=h),v};function o(g){for(var l=0,h=-1;(h=g.indexOf(`
`,h+1))!==-1;)l++;return l}n.prototype.split_blocks=function(l,h){l=l.replace(/(\r\n|\n|\r)/g,`
`);var v=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,f=[],m,w=1;for((m=/^(\s*\n)/.exec(l))!=null&&(w+=o(m[0]),v.lastIndex=m[0].length);(m=v.exec(l))!==null;)m[2]==`
#`&&(m[2]=`
`,v.lastIndex--),f.push(s(m[1],m[2],w)),w+=o(m[0]);return f},n.prototype.processBlock=function(l,h){var v=this.dialect.block,f=v.__order__;if("__call__"in v)return v.__call__.call(this,l,h);for(var m=0;m<f.length;m++){var w=v[f[m]].call(this,l,h);if(w)return(!d(w)||w.length>0&&!d(w[0]))&&this.debug(f[m],"didn't return a proper array"),w}return[]},n.prototype.processInline=function(l){return this.dialect.inline.__call__.call(this,String(l))},n.prototype.toTree=function(l,h){var v=l instanceof Array?l:this.split_blocks(l),f=this.tree;try{this.tree=h||this.tree||["markdown"];e:for(;v.length;){var m=this.processBlock(v.shift(),v);if(!m.length)continue e;this.tree.push.apply(this.tree,m)}return this.tree}finally{h&&(this.tree=f)}},n.prototype.debug=function(){var g=Array.prototype.slice.call(arguments);g.unshift(this.debug_indent),typeof print!="undefined"&&print.apply(print,g),typeof console!="undefined"&&typeof console.log!="undefined"&&console.log.apply(null,g)},n.prototype.loop_re_over_block=function(g,l,h){for(var v,f=l.valueOf();f.length&&(v=g.exec(f))!=null;)f=f.substr(v[0].length),h.call(this,v);return f},n.dialects={},n.dialects.Gruber={block:{atxHeader:function(l,h){var v=l.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!!v){var f=["header",{level:v[1].length}];return Array.prototype.push.apply(f,this.processInline(v[2])),v[0].length<l.length&&h.unshift(s(l.substr(v[0].length),l.trailing,l.lineNumber+2)),[f]}},setextHeader:function(l,h){var v=l.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!!v){var f=v[2]==="="?1:2,m=["header",{level:f},v[1]];return v[0].length<l.length&&h.unshift(s(l.substr(v[0].length),l.trailing,l.lineNumber+2)),[m]}},code:function(l,h){var v=[],f=/^(?: {0,3}\t| {4})(.*)\n?/;if(!l.match(f))return;e:do{var m=this.loop_re_over_block(f,l.valueOf(),function(w){v.push(w[1])});if(m.length){h.unshift(s(m,l.trailing));break e}else if(h.length){if(!h[0].match(f))break e;v.push(l.trailing.replace(/[^\n]/g,"").substring(2)),l=h.shift()}else break e}while(!0);return[["code_block",v.join(`
`)]]},horizRule:function(l,h){var v=l.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!!v){var f=[["hr"]];return v[1]&&f.unshift.apply(f,this.processBlock(v[1],[])),v[3]&&h.unshift(s(v[3])),f}},lists:function(){var g="[*+-]|\\d+\\.",l=/[*+-]/,h=new RegExp("^( {0,3})("+g+")[ 	]+"),v="(?: {0,3}\\t| {4})";function f(M){return new RegExp("(?:^("+v+"{0,"+M+"} {0,3})("+g+")\\s+)|(^"+v+"{0,"+(M-1)+"}[ ]{0,4})")}function m(M){return M.replace(/ {0,3}\t/g,"    ")}function w(M,C,R,B){if(C){M.push(["para"].concat(R));return}var K=M[M.length-1]instanceof Array&&M[M.length-1][0]=="para"?M[M.length-1]:M;B&&M.length>1&&R.unshift(B);for(var T=0;T<R.length;T++){var N=R[T],V=typeof N=="string";V&&K.length>1&&typeof K[K.length-1]=="string"?K[K.length-1]+=N:K.push(N)}}function k(M,C){for(var R=new RegExp("^("+v+"{"+M+"}.*?\\n?)*$"),B=new RegExp("^"+v+"{"+M+"}","gm"),K=[];C.length>0&&R.exec(C[0]);){var T=C.shift(),N=T.replace(B,"");K.push(s(N,T.trailing,T.lineNumber))}return K}function I(M,C,R){var B=M.list,K=B[B.length-1];if(!(K[1]instanceof Array&&K[1][0]=="para"))if(C+1==R.length)K.push(["para"].concat(K.splice(1,K.length-1)));else{var T=K.pop();K.push(["para"].concat(K.splice(1,K.length-1)),T)}}return function(M,C){var R=M.match(h);if(!R)return;function B(Et){var vr=l.exec(Et[2])?["bulletlist"]:["numberlist"];return K.push({list:vr,indent:Et[1]}),vr}var K=[],T=B(R),N,V=!1,ie=[K[0].list],G;e:for(;;){for(var J=M.split(/(?=\n)/),Y="",te=0;te<J.length;te++){var oe="",q=J[te].replace(/^\n/,function(Et){return oe=Et,""}),$e=f(K.length);if(R=q.match($e),R[1]!==void 0){Y.length&&(w(N,V,this.processInline(Y),oe),V=!1,Y=""),R[1]=m(R[1]);var Ee=Math.floor(R[1].length/4)+1;if(Ee>K.length)T=B(R),N.push(T),N=T[1]=["listitem"];else{var fr=!1;for(G=0;G<K.length;G++)if(K[G].indent==R[1]){T=K[G].list,K.splice(G+1,K.length-(G+1)),fr=!0;break}fr||(Ee++,Ee<=K.length?(K.splice(Ee,K.length-Ee),T=K[Ee-1].list):(T=B(R),N.push(T))),N=["listitem"],T.push(N)}oe=""}q.length>R[0].length&&(Y+=oe+q.substr(R[0].length))}Y.length&&(w(N,V,this.processInline(Y),oe),V=!1,Y="");var hr=k(K.length,C);hr.length>0&&(y(K,I,this),N.push.apply(N,this.toTree(hr,[])));var dr=C[0]&&C[0].valueOf()||"";if(dr.match(h)||dr.match(/^ /)){M=C.shift();var pr=this.dialect.block.horizRule(M,C);if(pr){ie.push.apply(ie,pr);break}y(K,I,this),V=!0;continue e}break}return ie}}(),blockquote:function(l,h){if(!!l.match(/^>/m)){var v=[];if(l[0]!=">"){for(var f=l.split(/\n/),m=[],w=l.lineNumber;f.length&&f[0][0]!=">";)m.push(f.shift()),w++;var k=s(m.join(`
`),`
`,l.lineNumber);v.push.apply(v,this.processBlock(k,[])),l=s(f.join(`
`),l.trailing,w)}for(;h.length&&h[0][0]==">";){var I=h.shift();l=s(l+l.trailing+I,I.trailing,l.lineNumber)}var M=l.replace(/^> ?/gm,"");this.tree;var C=this.toTree(M,["blockquote"]),R=b(C);return R&&R.references&&(delete R.references,_(R)&&C.splice(1,1)),v.push(C),v}},referenceDefn:function(l,h){var v=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!!l.match(v)){b(this.tree)||this.tree.splice(1,0,{});var f=b(this.tree);f.references===void 0&&(f.references={});var m=this.loop_re_over_block(v,l,function(w){w[2]&&w[2][0]=="<"&&w[2][w[2].length-1]==">"&&(w[2]=w[2].substring(1,w[2].length-1));var k=f.references[w[1].toLowerCase()]={href:w[2]};w[4]!==void 0?k.title=w[4]:w[5]!==void 0&&(k.title=w[5])});return m.length&&h.unshift(s(m,l.trailing)),[]}},para:function(l,h){return[["para"].concat(this.processInline(l))]}}},n.dialects.Gruber.inline={__oneElement__:function(l,h,v){var f,w;h=h||this.dialect.inline.__patterns__;var m=new RegExp("([\\s\\S]*?)("+(h.source||h)+")");if(f=m.exec(l),f){if(f[1])return[f[1].length,f[1]]}else return[l.length,l];var w;return f[2]in this.dialect.inline&&(w=this.dialect.inline[f[2]].call(this,l.substr(f.index),f,v||[])),w=w||[f[2].length,f[2]],w},__call__:function(l,h){var v=[],f;function m(w){typeof w=="string"&&typeof v[v.length-1]=="string"?v[v.length-1]+=w:v.push(w)}for(;l.length>0;)f=this.dialect.inline.__oneElement__.call(this,l,h,v),l=l.substr(f.shift()),y(f,m);return v},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(l){return this.dialect.inline.__escape__.exec(l)?[2,l.charAt(1)]:[1,"\\"]},"![":function(l){var h=l.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(h){h[2]&&h[2][0]=="<"&&h[2][h[2].length-1]==">"&&(h[2]=h[2].substring(1,h[2].length-1)),h[2]=this.dialect.inline.__call__.call(this,h[2],/\\/)[0];var v={alt:h[1],href:h[2]||""};return h[4]!==void 0&&(v.title=h[4]),[h[0].length,["img",v]]}return h=l.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),h?[h[0].length,["img_ref",{alt:h[1],ref:h[2].toLowerCase(),original:h[0]}]]:[2,"!["]},"[":function(l){var h=String(l),v=n.DialectHelpers.inline_until_char.call(this,l.substr(1),"]");if(!v)return[1,"["];var f=1+v[0],m=v[1],w,k;l=l.substr(f);var I=l.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(I){var M=I[1];if(f+=I[0].length,M&&M[0]=="<"&&M[M.length-1]==">"&&(M=M.substring(1,M.length-1)),!I[3])for(var C=1,R=0;R<M.length;R++)switch(M[R]){case"(":C++;break;case")":--C==0&&(f-=M.length-R,M=M.substring(0,R));break}return M=this.dialect.inline.__call__.call(this,M,/\\/)[0],k={href:M||""},I[3]!==void 0&&(k.title=I[3]),w=["link",k].concat(m),[f,w]}return I=l.match(/^\s*\[(.*?)\]/),I?(f+=I[0].length,k={ref:(I[1]||String(m)).toLowerCase(),original:h.substr(0,f)},w=["link_ref",k].concat(m),[f,w]):m.length==1&&typeof m[0]=="string"?(k={ref:m[0].toLowerCase(),original:h.substr(0,f)},w=["link_ref",k,m[0]],[f,w]):[1,"["]},"<":function(l){var h;return(h=l.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))!=null?h[3]?[h[0].length,["link",{href:"mailto:"+h[3]},h[3]]]:h[2]=="mailto"?[h[0].length,["link",{href:h[1]},h[1].substr(7)]]:[h[0].length,["link",{href:h[1]},h[1]]]:[1,"<"]},"`":function(l){var h=l.match(/(`+)(([\s\S]*?)\1)/);return h&&h[2]?[h[1].length+h[2].length,["inlinecode",h[3]]]:[1,"`"]},"  \n":function(l){return[3,["linebreak"]]}};function u(g,l){var h=g+"_state",v=g=="strong"?"em_state":"strong_state";function f(m){this.len_after=m,this.name="close_"+l}return function(m,w){if(this[h][0]==l)return this[h].shift(),[m.length,new f(m.length-l.length)];var k=this[v].slice(),I=this[h].slice();this[h].unshift(l);var M=this.processInline(m.substr(l.length)),C=M[M.length-1];if(this[h].shift(),C instanceof f){M.pop();var R=m.length-C.len_after;return[R,[g].concat(M)]}else return this[v]=k,this[h]=I,[l.length,l]}}n.dialects.Gruber.inline["**"]=u("strong","**"),n.dialects.Gruber.inline.__=u("strong","__"),n.dialects.Gruber.inline["*"]=u("em","*"),n.dialects.Gruber.inline._=u("em","_"),n.buildBlockOrder=function(g){var l=[];for(var h in g)h=="__order__"||h=="__call__"||l.push(h);g.__order__=l},n.buildInlinePatterns=function(g){var l=[];for(var h in g)if(!h.match(/^__.*__$/)){var v=h.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");l.push(h.length==1?v:"(?:"+v+")")}l=l.join("|"),g.__patterns__=l;var f=g.__call__;g.__call__=function(m,w){return w!=null?f.call(this,m,w):f.call(this,m,l)}},n.DialectHelpers={},n.DialectHelpers.inline_until_char=function(g,l){for(var h=0,v=[];;){if(g.charAt(h)==l)return h++,[h,v];if(h>=g.length)return null;var f=this.dialect.inline.__oneElement__.call(this,g.substr(h));h+=f[0],v.push.apply(v,f.slice(1))}},n.subclassDialect=function(g){function l(){}l.prototype=g.block;function h(){}return h.prototype=g.inline,{block:new l,inline:new h}},n.buildBlockOrder(n.dialects.Gruber.block),n.buildInlinePatterns(n.dialects.Gruber.inline),n.dialects.Maruku=n.subclassDialect(n.dialects.Gruber),n.dialects.Maruku.processMetaHash=function(l){for(var h=c(l),v={},f=0;f<h.length;++f)if(/^#/.test(h[f]))v.id=h[f].substring(1);else if(/^\./.test(h[f]))v.class?v.class=v.class+h[f].replace(/./," "):v.class=h[f].substring(1);else if(/\=/.test(h[f])){var m=h[f].split(/\=/);v[m[0]]=m[1]}return v};function c(g){for(var l=g.split(""),h=[""],v=!1;l.length;){var f=l.shift();switch(f){case" ":v?h[h.length-1]+=f:h.push("");break;case"'":case'"':v=!v;break;case"\\":f=l.shift();default:h[h.length-1]+=f;break}}return h}n.dialects.Maruku.block.document_meta=function(l,h){if(!(l.lineNumber>1)&&!!l.match(/^(?:\w+:.*\n)*\w+:.*$/)){b(this.tree)||this.tree.splice(1,0,{});var v=l.split(/\n/);for(p in v){var f=v[p].match(/(\w+):\s*(.*)$/),m=f[1].toLowerCase(),w=f[2];this.tree[1][m]=w}return[]}},n.dialects.Maruku.block.block_meta=function(l,h){var v=l.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!!v){var f=this.dialect.processMetaHash(v[2]),m;if(v[1]===""){var w=this.tree[this.tree.length-1];if(m=b(w),typeof w=="string")return;m||(m={},w.splice(1,0,m));for(a in f)m[a]=f[a];return[]}var k=l.replace(/\n.*$/,""),I=this.processBlock(k,[]);m=b(I[0]),m||(m={},I[0].splice(1,0,m));for(a in f)m[a]=f[a];return I}},n.dialects.Maruku.block.definition_list=function(l,h){var v=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,f=["dl"],m,w;if(w=l.match(v)){for(var k=[l];h.length&&v.exec(h[0]);)k.push(h.shift());for(var I=0;I<k.length;++I){var w=k[I].match(v),M=w[1].replace(/\n$/,"").split(/\n/),C=w[2].split(/\n:\s+/);for(m=0;m<M.length;++m)f.push(["dt",M[m]]);for(m=0;m<C.length;++m)f.push(["dd"].concat(this.processInline(C[m].replace(/(\n)\s+/,"$1"))))}}else return;return[f]},n.dialects.Maruku.block.table=function(l,h){var v=function(C,R){R=R||"\\s",R.match(/^[\\|\[\]{}?*.+^$]$/)&&(R="\\"+R);for(var B=[],K=new RegExp("^((?:\\\\.|[^\\\\"+R+"])*)"+R+"(.*)"),T;T=C.match(K);)B.push(T[1]),C=T[2];return B.push(C),B},f=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,m=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/,w,k;if(k=l.match(f))k[3]=k[3].replace(/^\s*\|/gm,"");else if(!(k=l.match(m)))return;var I=["table",["thead",["tr"]],["tbody"]];k[2]=k[2].replace(/\|\s*$/,"").split("|");var M=[];for(y(k[2],function(C){C.match(/^\s*-+:\s*$/)?M.push({align:"right"}):C.match(/^\s*:-+\s*$/)?M.push({align:"left"}):C.match(/^\s*:-+:\s*$/)?M.push({align:"center"}):M.push({})}),k[1]=v(k[1].replace(/\|\s*$/,""),"|"),w=0;w<k[1].length;w++)I[1][1].push(["th",M[w]||{}].concat(this.processInline(k[1][w].trim())));return y(k[3].replace(/\|\s*$/mg,"").split(`
`),function(C){var R=["tr"];for(C=v(C,"|"),w=0;w<C.length;w++)R.push(["td",M[w]||{}].concat(this.processInline(C[w].trim())));I[2].push(R)},this),[I]},n.dialects.Maruku.inline["{:"]=function(l,h,v){if(!v.length)return[2,"{:"];var f=v[v.length-1];if(typeof f=="string")return[2,"{:"];var m=l.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!m)return[2,"{:"];var w=this.dialect.processMetaHash(m[1]),k=b(f);k||(k={},f.splice(1,0,k));for(var I in w)k[I]=w[I];return[m[0].length,""]},n.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,n.buildBlockOrder(n.dialects.Maruku.block),n.buildInlinePatterns(n.dialects.Maruku.inline);var d=Array.isArray||function(g){return Object.prototype.toString.call(g)=="[object Array]"},y;Array.prototype.forEach?y=function(g,l,h){return g.forEach(l,h)}:y=function(g,l,h){for(var v=0;v<g.length;v++)l.call(h||g,g[v],v,g)};var _=function(g){for(var l in g)if(hasOwnProperty.call(g,l))return!1;return!0};function b(g){return d(g)&&g.length>1&&typeof g[1]=="object"&&!d(g[1])?g[1]:void 0}t.renderJsonML=function(g,l){l=l||{},l.root=l.root||!1;var h=[];if(l.root)h.push(E(g));else for(g.shift(),g.length&&typeof g[0]=="object"&&!(g[0]instanceof Array)&&g.shift();g.length;)h.push(E(g.shift()));return h.join(`

`)};function A(g){return g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function E(g){if(typeof g=="string")return A(g);var l=g.shift(),h={},v=[];for(g.length&&typeof g[0]=="object"&&!(g[0]instanceof Array)&&(h=g.shift());g.length;)v.push(E(g.shift()));var f="";for(var m in h)f+=" "+m+'="'+A(h[m])+'"';return l=="img"||l=="br"||l=="hr"?"<"+l+f+"/>":"<"+l+f+">"+v.join("")+"</"+l+">"}function x(g,l,h){var v;h=h||{};var f=g.slice(0);typeof h.preprocessTreeNode=="function"&&(f=h.preprocessTreeNode(f,l));var m=b(f);if(m){f[1]={};for(v in m)f[1][v]=m[v];m=f[1]}if(typeof f=="string")return f;switch(f[0]){case"header":f[0]="h"+f[1].level,delete f[1].level;break;case"bulletlist":f[0]="ul";break;case"numberlist":f[0]="ol";break;case"listitem":f[0]="li";break;case"para":f[0]="p";break;case"markdown":f[0]="html",m&&delete m.references;break;case"code_block":f[0]="pre",v=m?2:1;var w=["code"];w.push.apply(w,f.splice(v,f.length-v)),f[v]=w;break;case"inlinecode":f[0]="code";break;case"img":f[1].src=f[1].href,delete f[1].href;break;case"linebreak":f[0]="br";break;case"link":f[0]="a";break;case"link_ref":f[0]="a";var k=l[m.ref];if(k)delete m.ref,m.href=k.href,k.title&&(m.title=k.title),delete m.original;else return m.original;break;case"img_ref":f[0]="img";var k=l[m.ref];if(k)delete m.ref,m.src=k.href,k.title&&(m.title=k.title),delete m.original;else return m.original;break}if(v=1,m){for(var I in f[1]){v=2;break}v===1&&f.splice(v,1)}for(;v<f.length;++v)f[v]=x(f[v],l,h);return f}function S(g){for(var l=b(g)?2:1;l<g.length;)typeof g[l]=="string"?l+1<g.length&&typeof g[l+1]=="string"?g[l]+=g.splice(l+1,1)[0]:++l:(S(g[l]),++l)}})(function(){return e}())})(Ri);(function(e){e.markdown=Ri,e.parse=e.markdown.toHTML})(Ys);function we(e){return Array.isArray?Array.isArray(e):Ki(e)==="[object Array]"}const qs=1/0;function Zs(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-qs?"-0":t}function eo(e){return e==null?"":Zs(e)}function me(e){return typeof e=="string"}function Ci(e){return typeof e=="number"}function to(e){return e===!0||e===!1||no(e)&&Ki(e)=="[object Boolean]"}function Ti(e){return typeof e=="object"}function no(e){return Ti(e)&&e!==null}function re(e){return e!=null}function cn(e){return!e.trim().length}function Ki(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const ro="Incorrect 'index' type",io=e=>`Invalid value for key ${e}`,ao=e=>`Pattern length exceeds max of ${e}.`,so=e=>`Missing ${e} property in key`,oo=e=>`Property 'weight' in key '${e}' must be a positive integer`,Br=Object.prototype.hasOwnProperty;class uo{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=Oi(r);n+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Oi(e){let t=null,n=null,r=null,i=1;if(me(e)||we(e))r=e,t=Lr(e),n=Fn(e);else{if(!Br.call(e,"name"))throw new Error(so("name"));const s=e.name;if(r=s,Br.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(oo(s));t=Lr(s),n=Fn(s)}return{path:t,id:n,weight:i,src:r}}function Lr(e){return we(e)?e:e.split(".")}function Fn(e){return we(e)?e.join("."):e}function co(e,t){let n=[],r=!1;const i=(s,o,u)=>{if(!!re(s))if(!o[u])n.push(s);else{let c=o[u];const d=s[c];if(!re(d))return;if(u===o.length-1&&(me(d)||Ci(d)||to(d)))n.push(eo(d));else if(we(d)){r=!0;for(let y=0,_=d.length;y<_;y+=1)i(d[y],o,u+1)}else o.length&&i(d,o,u+1)}};return i(e,me(t)?t.split("."):t,0),r?n:n[0]}const lo={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},fo={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},ho={location:0,threshold:.6,distance:100},po={useExtendedSearch:!1,getFn:co,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var L=Ce(Ce(Ce(Ce({},fo),lo),ho),po);const vo=/[^ ]+/g;function go(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(vo).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),u=parseFloat(Math.round(o*r)/r);return n.set(s,u),u},clear(){n.clear()}}}class lr{constructor({getFn:t=L.getFn,fieldNormWeight:n=L.fieldNormWeight}={}){this.norm=go(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,me(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();me(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!re(t)||cn(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=this.getFn(t,i.path);if(!!re(o)){if(we(o)){let u=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:d,value:y}=c.pop();if(!!re(y))if(me(y)&&!cn(y)){let _={v:y,i:d,n:this.norm.get(y)};u.push(_)}else we(y)&&y.forEach((_,b)=>{c.push({nestedArrIndex:b,value:_})})}r.$[s]=u}else if(!cn(o)){let u={v:o,n:this.norm.get(o)};r.$[s]=u}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Pi(e,t,{getFn:n=L.getFn,fieldNormWeight:r=L.fieldNormWeight}={}){const i=new lr({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(Oi)),i.setSources(t),i.create(),i}function yo(e,{getFn:t=L.getFn,fieldNormWeight:n=L.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new lr({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function Rt(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=L.distance,ignoreLocation:s=L.ignoreLocation}={}){const o=t/e.length;if(s)return o;const u=Math.abs(r-n);return i?o+u/i:u?1:o}function mo(e=[],t=L.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let u=e[s];u&&r===-1?r=s:!u&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const Ke=32;function _o(e,t,n,{location:r=L.location,distance:i=L.distance,threshold:s=L.threshold,findAllMatches:o=L.findAllMatches,minMatchCharLength:u=L.minMatchCharLength,includeMatches:c=L.includeMatches,ignoreLocation:d=L.ignoreLocation}={}){if(t.length>Ke)throw new Error(ao(Ke));const y=t.length,_=e.length,b=Math.max(0,Math.min(r,_));let A=s,E=b;const x=u>1||c,S=x?Array(_):[];let g;for(;(g=e.indexOf(t,E))>-1;){let w=Rt(t,{currentLocation:g,expectedLocation:b,distance:i,ignoreLocation:d});if(A=Math.min(w,A),E=g+y,x){let k=0;for(;k<y;)S[g+k]=1,k+=1}}E=-1;let l=[],h=1,v=y+_;const f=1<<y-1;for(let w=0;w<y;w+=1){let k=0,I=v;for(;k<I;)Rt(t,{errors:w,currentLocation:b+I,expectedLocation:b,distance:i,ignoreLocation:d})<=A?k=I:v=I,I=Math.floor((v-k)/2+k);v=I;let M=Math.max(1,b-I+1),C=o?_:Math.min(b+I,_)+y,R=Array(C+2);R[C+1]=(1<<w)-1;for(let K=C;K>=M;K-=1){let T=K-1,N=n[e.charAt(T)];if(x&&(S[T]=+!!N),R[K]=(R[K+1]<<1|1)&N,w&&(R[K]|=(l[K+1]|l[K])<<1|1|l[K+1]),R[K]&f&&(h=Rt(t,{errors:w,currentLocation:T,expectedLocation:b,distance:i,ignoreLocation:d}),h<=A)){if(A=h,E=T,E<=b)break;M=Math.max(1,2*b-E)}}if(Rt(t,{errors:w+1,currentLocation:b,expectedLocation:b,distance:i,ignoreLocation:d})>A)break;l=R}const m={isMatch:E>=0,score:Math.max(.001,h)};if(x){const w=mo(S,u);w.length?c&&(m.indices=w):m.isMatch=!1}return m}function bo(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class Di{constructor(t,{location:n=L.location,threshold:r=L.threshold,distance:i=L.distance,includeMatches:s=L.includeMatches,findAllMatches:o=L.findAllMatches,minMatchCharLength:u=L.minMatchCharLength,isCaseSensitive:c=L.isCaseSensitive,ignoreLocation:d=L.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:c,ignoreLocation:d},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const y=(b,A)=>{this.chunks.push({pattern:b,alphabet:bo(b),startIndex:A})},_=this.pattern.length;if(_>Ke){let b=0;const A=_%Ke,E=_-A;for(;b<E;)y(this.pattern.substr(b,Ke),b),b+=Ke;if(A){const x=_-Ke;y(this.pattern.substr(x),x)}}else y(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let E={isMatch:!0,score:0};return r&&(E.indices=[[0,t.length-1]]),E}const{location:i,distance:s,threshold:o,findAllMatches:u,minMatchCharLength:c,ignoreLocation:d}=this.options;let y=[],_=0,b=!1;this.chunks.forEach(({pattern:E,alphabet:x,startIndex:S})=>{const{isMatch:g,score:l,indices:h}=_o(t,E,x,{location:i+S,distance:s,threshold:o,findAllMatches:u,minMatchCharLength:c,includeMatches:r,ignoreLocation:d});g&&(b=!0),_+=l,g&&h&&(y=[...y,...h])});let A={isMatch:b,score:b?_/this.chunks.length:1};return b&&r&&(A.indices=y),A}}class Re{constructor(t){this.pattern=t}static isMultiMatch(t){return Fr(t,this.multiRegex)}static isSingleMatch(t){return Fr(t,this.singleRegex)}search(){}}function Fr(e,t){const n=e.match(t);return n?n[1]:null}class wo extends Re{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Eo extends Re{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class xo extends Re{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class ko extends Re{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Ao extends Re{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class So extends Re{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Bi extends Re{constructor(t,{location:n=L.location,threshold:r=L.threshold,distance:i=L.distance,includeMatches:s=L.includeMatches,findAllMatches:o=L.findAllMatches,minMatchCharLength:u=L.minMatchCharLength,isCaseSensitive:c=L.isCaseSensitive,ignoreLocation:d=L.ignoreLocation}={}){super(t);this._bitapSearch=new Di(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:c,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Li extends Re{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const Nn=[wo,Li,xo,ko,So,Ao,Eo,Bi],Nr=Nn.length,Mo=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,Io="|";function Ro(e,t={}){return e.split(Io).map(n=>{let r=n.trim().split(Mo).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const u=r[s];let c=!1,d=-1;for(;!c&&++d<Nr;){const y=Nn[d];let _=y.isMultiMatch(u);_&&(i.push(new y(_,t)),c=!0)}if(!c)for(d=-1;++d<Nr;){const y=Nn[d];let _=y.isSingleMatch(u);if(_){i.push(new y(_,t));break}}}return i})}const Co=new Set([Bi.type,Li.type]);class To{constructor(t,{isCaseSensitive:n=L.isCaseSensitive,includeMatches:r=L.includeMatches,minMatchCharLength:i=L.minMatchCharLength,ignoreLocation:s=L.ignoreLocation,findAllMatches:o=L.findAllMatches,location:u=L.location,threshold:c=L.threshold,distance:d=L.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:u,threshold:c,distance:d},this.pattern=n?t:t.toLowerCase(),this.query=Ro(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let s=0,o=[],u=0;for(let c=0,d=n.length;c<d;c+=1){const y=n[c];o.length=0,s=0;for(let _=0,b=y.length;_<b;_+=1){const A=y[_],{isMatch:E,indices:x,score:S}=A.search(t);if(E){if(s+=1,u+=S,r){const g=A.constructor.type;Co.has(g)?o=[...o,...x]:o.push(x)}}else{u=0,s=0,o.length=0;break}}if(s){let _={isMatch:!0,score:u/s};return r&&(_.indices=o),_}}return{isMatch:!1,score:1}}}const $n=[];function Ko(...e){$n.push(...e)}function jn(e,t){for(let n=0,r=$n.length;n<r;n+=1){let i=$n[n];if(i.condition(e,t))return new i(e,t)}return new Di(e,t)}const Gt={AND:"$and",OR:"$or"},Hn={PATH:"$path",PATTERN:"$val"},Un=e=>!!(e[Gt.AND]||e[Gt.OR]),Oo=e=>!!e[Hn.PATH],Po=e=>!we(e)&&Ti(e)&&!Un(e),$r=e=>({[Gt.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Fi(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=Oo(i);if(!o&&s.length>1&&!Un(i))return r($r(i));if(Po(i)){const c=o?i[Hn.PATH]:s[0],d=o?i[Hn.PATTERN]:i[c];if(!me(d))throw new Error(io(c));const y={keyId:Fn(c),pattern:d};return n&&(y.searcher=jn(d,t)),y}let u={children:[],operator:s[0]};return s.forEach(c=>{const d=i[c];we(d)&&d.forEach(y=>{u.children.push(r(y))})}),u};return Un(e)||(e=$r(e)),r(e)}function Do(e,{ignoreFieldNorm:t=L.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const u=i?i.weight:null;r*=Math.pow(o===0&&u?Number.EPSILON:o,(u||1)*(t?1:s))}),n.score=r})}function Bo(e,t){const n=e.matches;t.matches=[],!!re(n)&&n.forEach(r=>{if(!re(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function Lo(e,t){t.score=e.score}function Fo(e,t,{includeMatches:n=L.includeMatches,includeScore:r=L.includeScore}={}){const i=[];return n&&i.push(Bo),r&&i.push(Lo),e.map(s=>{const{idx:o}=s,u={item:t[o],refIndex:o};return i.length&&i.forEach(c=>{c(s,u)}),u})}class wt{constructor(t,n={},r){this.options=Ce(Ce({},L),n),this.options.useExtendedSearch,this._keyStore=new uo(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof lr))throw new Error(ro);this._myIndex=n||Pi(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){!re(t)||(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:u}=this.options;let c=me(t)?me(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Do(c,{ignoreFieldNorm:u}),s&&c.sort(o),Ci(n)&&n>-1&&(c=c.slice(0,n)),Fo(c,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=jn(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:u})=>{if(!re(s))return;const{isMatch:c,score:d,indices:y}=n.searchIn(s);c&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:u,indices:y}]})}),i}_searchLogical(t){const n=Fi(t,this.options),r=(u,c,d)=>{if(!u.children){const{keyId:_,searcher:b}=u,A=this._findMatches({key:this._keyStore.get(_),value:this._myIndex.getValueForItemAtKeyId(c,_),searcher:b});return A&&A.length?[{idx:d,item:c,matches:A}]:[]}const y=[];for(let _=0,b=u.children.length;_<b;_+=1){const A=u.children[_],E=r(A,c,d);if(E.length)y.push(...E);else if(u.operator===Gt.AND)return[]}return y},i=this._myIndex.records,s={},o=[];return i.forEach(({$:u,i:c})=>{if(re(u)){let d=r(n,u,c);d.length&&(s[c]||(s[c]={idx:c,item:u,matches:[]},o.push(s[c])),d.forEach(({matches:y})=>{s[c].matches.push(...y)}))}}),o}_searchObjectList(t){const n=jn(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:u})=>{if(!re(o))return;let c=[];r.forEach((d,y)=>{c.push(...this._findMatches({key:d,value:o[y],searcher:n}))}),c.length&&s.push({idx:u,item:o,matches:c})}),s}_findMatches({key:t,value:n,searcher:r}){if(!re(n))return[];let i=[];if(we(n))n.forEach(({v:s,i:o,n:u})=>{if(!re(s))return;const{isMatch:c,score:d,indices:y}=r.searchIn(s);c&&i.push({score:d,key:t,value:s,idx:o,norm:u,indices:y})});else{const{v:s,n:o}=n,{isMatch:u,score:c,indices:d}=r.searchIn(s);u&&i.push({score:c,key:t,value:s,norm:o,indices:d})}return i}}wt.version="6.5.3";wt.createIndex=Pi;wt.parseIndex=yo;wt.config=L;wt.parseQuery=Fi;Ko(To);export{Ys as A,Go as B,Qo as C,Mi as D,qi as E,wt as F,Zi as G,qo as H,ya as I,ou as S,Xo as a,Zo as b,Wo as c,Vo as d,Yo as e,Wi as f,jo as g,zo as h,su as i,Ho as j,Vr as k,ea as l,Jo as m,jr as n,ru as o,au as p,tu as q,ta as r,$o as s,zr as t,Uo as u,iu as v,na as w,ft as x,nu as y,eu as z};
